/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./source/_games.ts"
/*!**************************!*\
  !*** ./source/_games.ts ***!
  \**************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Games: () => (/* binding */ Games)\n/* harmony export */ });\n/* harmony import */ var _alacrity_incarnations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./alacrity/_incarnations */ \"./source/alacrity/_incarnations.ts\");\n/* harmony import */ var _alacrity_bodies__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./alacrity/_bodies */ \"./source/alacrity/_bodies.ts\");\n/* harmony import */ var _systems_keyboard__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./systems/keyboard */ \"./source/systems/keyboard.ts\");\n/* harmony import */ var _systems_physics__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./systems/physics */ \"./source/systems/physics.ts\");\n/* harmony import */ var _render_assets__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./render/assets */ \"./source/render/assets.ts\");\n/* harmony import */ var _render_composite__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./render/composite */ \"./source/render/composite.ts\");\n/* harmony import */ var _systems_camera__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./systems/camera */ \"./source/systems/camera.ts\");\n/* harmony import */ var _render_shaderloader__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./render/shaderloader */ \"./source/render/shaderloader.ts\");\n/* harmony import */ var _render_render__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./render/_render */ \"./source/render/_render.ts\");\n/* harmony import */ var _systems_window__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./systems/window */ \"./source/systems/window.ts\");\n/* harmony import */ var _parsers_iniparser__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./parsers/iniparser */ \"./source/parsers/iniparser.ts\");\n/* harmony import */ var _parsers_tiledParser__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./parsers/tiledParser */ \"./source/parsers/tiledParser.ts\");\n/* harmony import */ var _alacrity_gameobjects__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./alacrity/_gameobjects */ \"./source/alacrity/_gameobjects.ts\");\n/* harmony import */ var _parsers_ganiParser__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./parsers/ganiParser */ \"./source/parsers/ganiParser.ts\");\n/* harmony import */ var _physics_capture__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./physics/capture */ \"./source/physics/capture.ts\");\n/* harmony import */ var _physics_npcCollision__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./physics/npcCollision */ \"./source/physics/npcCollision.ts\");\n/* harmony import */ var _render_shaders_normal__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./render/shaders/normal */ \"./source/render/shaders/normal.ts\");\n/* harmony import */ var _render_shaders_reverser__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./render/shaders/reverser */ \"./source/render/shaders/reverser.ts\");\n/* harmony import */ var _render_shaders_whitetransparent__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./render/shaders/whitetransparent */ \"./source/render/shaders/whitetransparent.ts\");\n/* harmony import */ var _physics_gridCollision__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./physics/gridCollision */ \"./source/physics/gridCollision.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar Games;\r\n(function (Games) {\r\n    class Generic {\r\n        // public static self : Generic;\r\n        // public abstract static bob : string;\r\n        // public static pool : Array<Generic> = [];\r\n        gameid;\r\n        alacritypool = [];\r\n        systempool = [];\r\n        paused = false;\r\n        rootFolder = \"_assets/\";\r\n        cellbuild;\r\n        fileextensions = [\"png\", \"gani\", \"wav\", \"csv\"];\r\n        gameframe;\r\n        currentLevel = undefined;\r\n        window;\r\n        glContext;\r\n        shadercontext;\r\n        // private static nextid:number = 0;\r\n        static gamespool = [];\r\n        // public sharedobjects : Array<T.SharedBlueprint> = [];\r\n        remoteobjects = {};\r\n        loadedobjquant = 0;\r\n        animationsobject;\r\n        constructor(target, width, height, shaders = [new _render_shaders_normal__WEBPACK_IMPORTED_MODULE_16__.Normal(), new _render_shaders_reverser__WEBPACK_IMPORTED_MODULE_17__.Reverser(), new _render_shaders_whitetransparent__WEBPACK_IMPORTED_MODULE_18__.WhiteTransparent()]) {\r\n            this.glContext = new _render_render__WEBPACK_IMPORTED_MODULE_8__.Render.GLContext(target, width + \"\", height + \"\");\r\n            this.shadercontext = new _render_shaderloader__WEBPACK_IMPORTED_MODULE_7__.ShaderLoader(this.glContext.gl, shaders);\r\n            Generic.gamespool.push(this);\r\n            this.gameid = Generic.gamespool.length - 1;\r\n            this.window = new _systems_window__WEBPACK_IMPORTED_MODULE_9__.Window(this.glContext);\r\n            // Generic.nextid++;\r\n            // Generic.pool.push(this);\r\n        }\r\n        async load() { await this.initialize(); }\r\n        async initialize(keyboard = true, touch = true) {\r\n            // Time.Delta.refresh();\r\n            if (keyboard)\r\n                new _systems_keyboard__WEBPACK_IMPORTED_MODULE_2__.Keyboard();\r\n            // if(touch) new Touch();\r\n            if (this.gamename == undefined || this.gamename == \"\")\r\n                await Promise.all(await _render_assets__WEBPACK_IMPORTED_MODULE_4__.Assets.loadAllExtInFolder(this.rootFolder, this.fileextensions));\r\n            else\r\n                await Promise.all(await _render_assets__WEBPACK_IMPORTED_MODULE_4__.Assets.loadAllExtInFolder(this.rootFolder + this.gamename + '/', this.fileextensions));\r\n            await Promise.all(await _render_assets__WEBPACK_IMPORTED_MODULE_4__.Assets.loadAllExtInFolder(this.rootFolder + '_debug/', this.fileextensions));\r\n            await this.shadercontext.init();\r\n        }\r\n        // public static connectFauna(gameid:number,player:GameObjects.Player){\r\n        //   Generic.gamespool[gameid].\r\n        // }\r\n        run(sharedobjects) {\r\n            for (let i = this.loadedobjquant; i < sharedobjects.length; i++) {\r\n                let newobj = sharedobjects[i];\r\n                // this.sharedobjects.pop();\r\n                if (newobj.owner.id == this.gameid)\r\n                    continue;\r\n                let invocation = new _alacrity_gameobjects__WEBPACK_IMPORTED_MODULE_12__.GameObjects.SharedObject(newobj);\r\n                invocation.presence = new _alacrity_incarnations__WEBPACK_IMPORTED_MODULE_0__.Incarnations.Incarnated(new _render_composite__WEBPACK_IMPORTED_MODULE_5__.Composite.Frame(this.glContext, this.shadercontext, []));\r\n                invocation.presence.pos = invocation.pos;\r\n                invocation.presence.dir = invocation.dir;\r\n                invocation.presence.anims = this.loadAnims(invocation.anisrc);\r\n                invocation.presence.switchanimation(invocation.currentani);\r\n                this.remoteobjects[sharedobjects[i].id] = invocation;\r\n                this.gameframe.frame.push(invocation.presence.myFrame);\r\n            }\r\n            this.loadedobjquant = sharedobjects.length;\r\n            // Time.Delta.refresh();\r\n            for (let s of this.systempool) {\r\n                s.refresh();\r\n            }\r\n            for (let o of sharedobjects) {\r\n                let tomod = this.remoteobjects[o.id];\r\n                if (tomod) {\r\n                    tomod.presence.switchanimation(o.currentani);\r\n                    tomod.presence.dir = o.dir;\r\n                    tomod.presence.myFrame.rprops.pos = o.pos;\r\n                }\r\n            }\r\n            // if(!this.paused) Bodies.Alacrity.refresh(this.alacritypool);\r\n            if (!this.paused)\r\n                this.refreshalacrities();\r\n            // else Bodies.Alacrity.refreshsome(this.ui);\r\n            // this.gameframe.camera.refresh();\r\n            _alacrity_bodies__WEBPACK_IMPORTED_MODULE_1__.Bodies.Alacrity.resetallmovements(this.alacritypool);\r\n        }\r\n        refreshalacrities() {\r\n            this.alacritypool = this.alacritypool.filter((a) => !a.delete);\r\n            for (let i = 0; i < this.alacritypool.length; i++) {\r\n                this.alacritypool[i].update();\r\n            }\r\n            for (let i = 0; i < this.alacritypool.length; i++) {\r\n                this.alacritypool[i].finalize();\r\n            }\r\n        }\r\n        loadAnims(src) {\r\n            let animations = {};\r\n            for (let s in src) {\r\n                let file = src[s];\r\n                let ani = _parsers_ganiParser__WEBPACK_IMPORTED_MODULE_13__.GaniParser.parse(_render_assets__WEBPACK_IMPORTED_MODULE_4__.Assets.getText(file)).animations;\r\n                let aniarr = [];\r\n                for (let a of ani) {\r\n                    aniarr.push(this.buildAni(a));\r\n                }\r\n                animations[s] = aniarr;\r\n            }\r\n            return animations;\r\n        }\r\n        async newTiledLevel(leveln) {\r\n            if (this.currentLevel !== undefined) {\r\n                for (let r of this.currentLevel.representation) {\r\n                    r.rprops.delete = true;\r\n                }\r\n                for (let b of this.currentLevel.bodies) {\r\n                    b.myFrame.rprops.delete = true;\r\n                }\r\n                // this.gamephysics.collisionpool = [];\r\n            }\r\n            let level = this.levels[leveln];\r\n            await level.load();\r\n            // if(this.currentLevel === undefined){\r\n            //   this.gameframe = new Composite.Frame(this.glContext, this.shadercontext,\r\n            //     [\r\n            //       ...level.representation,\r\n            //       ...level.bodies.map((a)=>a.myFrame),\r\n            //       // Debug.Grid.see(collisiongrid, {x:0,y:0,w:40*16,h:40*16})\r\n            //     ]\r\n            //   );\r\n            //   this.gameframe.camera = new Camera(this.srcview, {x:0,y:0,...level.levelsize});\r\n            // } else {\r\n            //   this.gameframe.camera.setbounds({x:0,y:0,...level.levelsize});\r\n            //   this.gameframe.addtocomposition(\r\n            //     [\r\n            //       ...level.representation,\r\n            //       ...level.bodies.map((a)=>a.myFrame),\r\n            //     ]\r\n            //   );\r\n            // }\r\n            return level;\r\n        }\r\n        displayLevel(level) {\r\n            if (this.gameframe == undefined) {\r\n                this.gameframe = new _render_composite__WEBPACK_IMPORTED_MODULE_5__.Composite.Frame(this.glContext, this.shadercontext, [\r\n                    ...level.representation,\r\n                    ...level.bodies.map((a) => a.myFrame),\r\n                    // Debug.Grid.see(collisiongrid, {x:0,y:0,w:40*16,h:40*16})\r\n                ]);\r\n                this.gameframe.camera = new _systems_camera__WEBPACK_IMPORTED_MODULE_6__[\"default\"](this.srcview, { x: 0, y: 0, ...level.levelsize });\r\n                // this.systempool.push(this.gameframe.camera);\r\n            }\r\n            else {\r\n                this.gameframe.camera.setbounds({ x: 0, y: 0, ...level.levelsize });\r\n                this.gameframe.addtocomposition([\r\n                    ...level.representation,\r\n                    ...level.bodies.map((a) => a.myFrame),\r\n                ]);\r\n            }\r\n        }\r\n        async buildLevel(level) {\r\n            level.cellbuild = await _parsers_iniparser__WEBPACK_IMPORTED_MODULE_10__.IniParser.loadIni(this.rootFolder + level.ininame);\r\n            level.levelsize = { w: this.cellbuild.tiles[0].tileYX[0].length * this.cellbuild.square.w, h: this.cellbuild.tiles[0].tileYX.length * this.cellbuild.square.h };\r\n            // await Assets.addText(this.rootFolder+this.gamename+\"/00/tree.csv\")\r\n            // this.gamephysics.collisionpool.push(new CollisionGrid(this.cellbuild.collisions[0], 16, C.CollideLayers.player, C.CollideTypes.block));\r\n            // this.player = new Character(game);\r\n            // new divUI(this.player)\r\n            // this.bodies.push(this.player);\r\n            level.representation = _parsers_tiledParser__WEBPACK_IMPORTED_MODULE_11__.Tiled.blit(this.glContext, this.shadercontext, this.cellbuild, \"level-layer\");\r\n            // this.bodies.push(new Tree(game));\r\n        }\r\n        buildAni(anibuild) {\r\n            let anim = new _render_composite__WEBPACK_IMPORTED_MODULE_5__.Composite.Animation(this.glContext, this.shadercontext, []);\r\n            // let snaps : Array<Composite.Snap>;\r\n            for (let f of anibuild.frames) {\r\n                anim.frames.push(this.buildSnap(f));\r\n            }\r\n            return anim;\r\n        }\r\n        buildSnap(snapbuild) {\r\n            // let snap : Composite.Snap\r\n            let snap = new _render_composite__WEBPACK_IMPORTED_MODULE_5__.Composite.Snap(this.glContext, this.shadercontext, []);\r\n            for (let p of snapbuild) {\r\n                snap.parts.push(new _render_composite__WEBPACK_IMPORTED_MODULE_5__.Composite.Image(this.glContext, this.shadercontext, p.file, p.srcrect, p.dstrect));\r\n            }\r\n            return snap;\r\n        }\r\n        frameComposites(contents) {\r\n            return new _render_composite__WEBPACK_IMPORTED_MODULE_5__.Composite.Frame(this.glContext, this.shadercontext, contents);\r\n        }\r\n        frameGame(contents) {\r\n            this.window.frm = new _render_composite__WEBPACK_IMPORTED_MODULE_5__.Composite.Frame(this.glContext, this.shadercontext, contents);\r\n            this.window.frm.rprops.srcrect = { x: 0, y: 0, w: this.glContext.gl.canvas.width, h: this.glContext.gl.canvas.height };\r\n            this.window.frm.rprops.shaderID = \"reverser\";\r\n        }\r\n    }\r\n    Games.Generic = Generic;\r\n    class Physical extends Generic {\r\n        // public static self : Physical;\r\n        gamephysics;\r\n        async initialize(keyboard = true, touch = true) {\r\n            await super.initialize(keyboard, touch);\r\n            this.gamephysics = new _systems_physics__WEBPACK_IMPORTED_MODULE_3__.Physics();\r\n            this.systempool.push(this.gamephysics);\r\n            // await this.shadercontext.init();\r\n        }\r\n        async newTiledLevel(leveln) {\r\n            // Physical.self.gamephysics.collisionpool = [];  \r\n            let level = await super.newTiledLevel(leveln);\r\n            return level;\r\n        }\r\n        addCapture(captureProperties, incarnation) {\r\n            this.gamephysics.collisionpool.push(new _physics_capture__WEBPACK_IMPORTED_MODULE_14__.Capture(captureProperties.cwith, captureProperties.type, incarnation, captureProperties.hitbox, captureProperties.call));\r\n        }\r\n        addAsCollision(incarnation, cwith, type) {\r\n            this.gamephysics.collisionpool.push(new _physics_npcCollision__WEBPACK_IMPORTED_MODULE_15__.NPCCollision(incarnation, cwith, type));\r\n            console.log(this.gamephysics.collisionpool);\r\n        }\r\n        addGrid(boolArr, resolution, cwith, type) {\r\n            this.gamephysics.collisionpool.push(new _physics_gridCollision__WEBPACK_IMPORTED_MODULE_19__.CollisionGrid(boolArr, resolution, cwith, type));\r\n        }\r\n    }\r\n    class Action extends Physical {\r\n        player;\r\n        async newTiledLevel(leveln) {\r\n            let level = await super.newTiledLevel(leveln);\r\n            // this.gameframe.camera.cameraman.actor = this.player;\r\n            // this.player.myCamera = this.gameframe.camera;\r\n            return level;\r\n        }\r\n    }\r\n    Games.Action = Action;\r\n    // export abstract class Puzzle extends Generic{}\r\n    // export abstract class Strategy extends Physical {\r\n    //   public async newTiledLevel(leveln: number): Promise<GameObjects.Level> {\r\n    //     let level = await super.newTiledLevel(leveln);\r\n    //     this.gameframe.camera.cameraman.actor = this.gameframe.camera.cameraman.freemovement;\r\n    //     return level;\r\n    //   }\r\n    // }\r\n})(Games || (Games = {}));\r\n\n\n//# sourceURL=webpack://TEWOU/./source/_games.ts?\n}");

/***/ },

/***/ "./source/_type.ts"
/*!*************************!*\
  !*** ./source/_type.ts ***!
  \*************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RunSwitch: () => (/* binding */ RunSwitch)\n/* harmony export */ });\nvar RunSwitch;\r\n(function (RunSwitch) {\r\n    RunSwitch[RunSwitch[\"off\"] = 0] = \"off\";\r\n    RunSwitch[RunSwitch[\"disabled\"] = 1] = \"disabled\";\r\n    RunSwitch[RunSwitch[\"enabled\"] = 2] = \"enabled\";\r\n    RunSwitch[RunSwitch[\"running\"] = 3] = \"running\";\r\n    RunSwitch[RunSwitch[\"elapsed\"] = 4] = \"elapsed\";\r\n})(RunSwitch || (RunSwitch = {}));\r\n// export type GameAnimation = {\r\n// }\r\n\n\n//# sourceURL=webpack://TEWOU/./source/_type.ts?\n}");

/***/ },

/***/ "./source/alacrity/_bodies.ts"
/*!************************************!*\
  !*** ./source/alacrity/_bodies.ts ***!
  \************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Bodies: () => (/* binding */ Bodies)\n/* harmony export */ });\n/* harmony import */ var _time__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./time */ \"./source/alacrity/time.ts\");\n/* harmony import */ var _render_composite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../render/composite */ \"./source/render/composite.ts\");\n/* harmony import */ var _physics_states__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../physics/states */ \"./source/physics/states.ts\");\n\r\n\r\n\r\n// import Gravity from \"../systems/gravity\";\r\n// import { glContext } from '../_type';\r\nvar Bodies;\r\n(function (Bodies) {\r\n    class Alacrity {\r\n        lifetime = new _time__WEBPACK_IMPORTED_MODULE_0__.Time.Timeout([Infinity], 'lifetime');\r\n        delete = false;\r\n        triggers = [];\r\n        timeouts = [];\r\n        gameid;\r\n        // public abstract update();\r\n        constructor() {\r\n            // Alacrity.pool.push(this);\r\n        }\r\n        finalize() { }\r\n        resetmovementvector() { }\r\n        static refresh(pool) {\r\n            let rpool = pool.filter((e) => !e.delete);\r\n            for (let i = 0; i < rpool.length; i++) {\r\n                rpool[i].update();\r\n            }\r\n            for (let i = 0; i < rpool.length; i++) {\r\n                rpool[i].finalize();\r\n            }\r\n        }\r\n        static refreshsome(some) {\r\n            for (let i = 0; i < some.length; i++) {\r\n                some[i].update();\r\n            }\r\n            for (let i = 0; i < some.length; i++) {\r\n                some[i].finalize();\r\n            }\r\n        }\r\n        static resetallmovements(pool) {\r\n            for (let a of pool) {\r\n                a.resetmovementvector();\r\n            }\r\n        }\r\n        update() {\r\n            this.timeouts = this.timeouts.filter((t) => {\r\n                if (t.deletion)\r\n                    return false;\r\n                this.triggers.push(t.test());\r\n                return true;\r\n            });\r\n        }\r\n        addtimeout(durations, actions, repeat = true, continuous = true) {\r\n            let timeout = new _time__WEBPACK_IMPORTED_MODULE_0__.Time.Timeout(durations, \"noname\", { continuous: continuous, repeat: repeat }, actions);\r\n            this.timeouts.push(timeout);\r\n            return timeout;\r\n        }\r\n        destroy() {\r\n            this.delete = true;\r\n        }\r\n        react(name, params) { return false; }\r\n    }\r\n    Bodies.Alacrity = Alacrity;\r\n    class UIElement extends Alacrity {\r\n        myAnim;\r\n        hitbox = { x: 0, y: 0, w: 0, h: 0 };\r\n        pos = { x: 0, y: 0 };\r\n        hidden = false;\r\n        constructor(animation) {\r\n            super();\r\n            this.myAnim = animation;\r\n            for (let m of this.myAnim.frames) {\r\n                m.rprops.pos = this.pos;\r\n            }\r\n            // this.myAnim.rprops.pos = this.pos;\r\n            this.myAnim.rprops.hidden = this.hidden;\r\n        }\r\n    }\r\n    Bodies.UIElement = UIElement;\r\n    class Existence extends Alacrity {\r\n        pos = { x: 0, y: 0 };\r\n        hitbox = { x: 0, y: 0, w: 0, h: 0 };\r\n    }\r\n    Bodies.Existence = Existence;\r\n    class Embodiment extends Existence {\r\n        myFrame;\r\n        collisions = [];\r\n        // public hitbox     : T.Bounds = {x:0,y:0,w:0,h:0};\r\n        activeeffects = [1, 1, 1, 1];\r\n        // public pos : T.Point = {x:0,y:0};\r\n        flip = { flipx: false, flipy: false };\r\n        constructor(frame) {\r\n            super();\r\n            let fr;\r\n            if (!(frame instanceof _render_composite__WEBPACK_IMPORTED_MODULE_1__.Composite.Frame)) {\r\n                if (Array.isArray(frame)) {\r\n                    fr = new _render_composite__WEBPACK_IMPORTED_MODULE_1__.Composite.Frame(frame[0].glContext, frame[0].shadercontext, frame);\r\n                }\r\n                else {\r\n                    fr = new _render_composite__WEBPACK_IMPORTED_MODULE_1__.Composite.Frame(frame.glContext, frame.shadercontext, [frame]);\r\n                }\r\n            }\r\n            else {\r\n                fr = frame;\r\n            }\r\n            this.myFrame = fr;\r\n            this.myFrame.rprops.pos = this.pos;\r\n            this.myFrame.rprops.layer = .5;\r\n            this.myFrame.rprops.flip = this.flip;\r\n        }\r\n        destroy() {\r\n            this.delete = true;\r\n            this.myFrame.rprops.delete = true;\r\n        }\r\n    }\r\n    Bodies.Embodiment = Embodiment;\r\n    class Mobility extends Embodiment {\r\n        // public abstract pos   : T.Point;\r\n        movementvector = { x: 0, y: 0 };\r\n        // public gravityvector  : T.Point = {x:0,y:0};\r\n        speed = .2;\r\n        velocity = new Set();\r\n        normalgravity = { strength: .075, x: 0, y: 1 };\r\n        destination = null;\r\n        movetimer = new _time__WEBPACK_IMPORTED_MODULE_0__.Time.Timeout([Infinity], \"move\");\r\n        movecallback = () => { };\r\n        finalize() {\r\n            if (this.destination != null) {\r\n                // console.log(this.movetimer.test().state)\r\n                // console.log(this.movetimer.end)\r\n                if ((Math.abs(this.pos.x - this.destination.x) < 1 &&\r\n                    Math.abs(this.pos.y - this.destination.y) < 1) ||\r\n                    this.movetimer.test().state == \"triggered\") {\r\n                    this.destination = null;\r\n                    this.movecallback();\r\n                }\r\n                else {\r\n                    let distance = {\r\n                        x: this.destination.x - this.pos.x,\r\n                        y: this.destination.y - this.pos.y\r\n                    };\r\n                    if (distance.x != 0 || distance.y != 0) {\r\n                        let length = Math.sqrt(distance.x * distance.x +\r\n                            distance.y * distance.y);\r\n                        if (length > 0) {\r\n                            this.movementvector.x += distance.x / length;\r\n                            this.movementvector.y += distance.y / length;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            let movement = {\r\n                x: this.movementvector.x * this.speed * _time__WEBPACK_IMPORTED_MODULE_0__.Time.Delta.delta,\r\n                y: this.movementvector.y * this.speed * _time__WEBPACK_IMPORTED_MODULE_0__.Time.Delta.delta,\r\n            };\r\n            for (let g of this.velocity) {\r\n                movement.x += g.x * g.strength * _time__WEBPACK_IMPORTED_MODULE_0__.Time.Delta.delta;\r\n                movement.y += g.y * g.strength * _time__WEBPACK_IMPORTED_MODULE_0__.Time.Delta.delta;\r\n            }\r\n            if ((movement.x < 0 && !(this.activeeffects[1] & _physics_states__WEBPACK_IMPORTED_MODULE_2__.CollideTypes.block)) ||\r\n                (movement.x > 0 && !(this.activeeffects[3] & _physics_states__WEBPACK_IMPORTED_MODULE_2__.CollideTypes.block))) {\r\n                this.pos.x += movement.x;\r\n            }\r\n            if ((movement.y < 0 && !(this.activeeffects[0] & _physics_states__WEBPACK_IMPORTED_MODULE_2__.CollideTypes.block)) ||\r\n                (movement.y > 0 && !(this.activeeffects[2] & _physics_states__WEBPACK_IMPORTED_MODULE_2__.CollideTypes.block))) {\r\n                this.pos.y += movement.y;\r\n            }\r\n            // console.log(this.pos.x)\r\n            // this.movementvector = {x:0,y:0};\r\n        }\r\n        resetmovementvector() {\r\n            this.movementvector = { x: 0, y: 0 };\r\n        }\r\n        movetowards(destination, during = Infinity, callback = () => { }) {\r\n            this.destination = destination;\r\n            this.movetimer.ms = [during];\r\n            // console.log(during);\r\n            this.movetimer.restart();\r\n            this.movecallback = callback;\r\n        }\r\n    }\r\n    Bodies.Mobility = Mobility;\r\n    // export abstract class Animated extends Mobility {\r\n    //   public    paused      : boolean = false;\r\n    //   protected anims       : Array<Composite.Animation>;\r\n    //   protected timers      : Time.Timeout[] = [];\r\n    //   protected currentanim : number = 0;\r\n    //   protected timings     : number[][] = [];\r\n    //   // private   currentFrame : number = 0;\r\n    //   constructor(frame: Composite.Frame){\r\n    //     super(frame);\r\n    //     this.anims = anims;\r\n    //     // this.currentAnim = this.anims[0];\r\n    //     for(let i = 0; i < this.anims.length; i++){\r\n    //       this.timers.push(new Time.Timeout([Infinity], \"\" + i));\r\n    //     }\r\n    //     // this.changeframe.paused = true;\r\n    //     // this.timeouts.push(this.changeframe);\r\n    //   }\r\n    //   public update(){\r\n    //     super.update();\r\n    //     // this.handleanimations();\r\n    //   }\r\n    //   public switchanim(animnumber: number){\r\n    //     if(animnumber < 0 || animnumber >= this.anims.length) return;\r\n    //     this.currentanim = animnumber;\r\n    //     this.timers[animnumber].restart();\r\n    //     this.anims[this.currentanim].currentFrame = 0;\r\n    //     this.myFrame.frame = [this.anims[this.currentanim]];\r\n    //     // this.changeframe.restart();\r\n    //   }\r\n    //   public settimings(timings: number[][]){\r\n    //     this.timings = timings;\r\n    //   }\r\n    // }\r\n})(Bodies || (Bodies = {}));\r\n\n\n//# sourceURL=webpack://TEWOU/./source/alacrity/_bodies.ts?\n}");

/***/ },

/***/ "./source/alacrity/_gameobjects.ts"
/*!*****************************************!*\
  !*** ./source/alacrity/_gameobjects.ts ***!
  \*****************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GameObjects: () => (/* binding */ GameObjects)\n/* harmony export */ });\n/* harmony import */ var _incarnations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_incarnations */ \"./source/alacrity/_incarnations.ts\");\n/* harmony import */ var _parsers_iniparser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../parsers/iniparser */ \"./source/parsers/iniparser.ts\");\n/* harmony import */ var _systems_keyboard__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../systems/keyboard */ \"./source/systems/keyboard.ts\");\n/* harmony import */ var _render_assets__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../render/assets */ \"./source/render/assets.ts\");\n/* harmony import */ var _parsers_tiledParser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../parsers/tiledParser */ \"./source/parsers/tiledParser.ts\");\n\r\n\r\n\r\n\r\n\r\n// import { Generic } from '../_games';\r\nvar GameObjects;\r\n(function (GameObjects) {\r\n    class Level {\r\n        // public cellbuild: T.CellBuild;\r\n        bodies = [];\r\n        representation;\r\n        levelsize;\r\n        grids;\r\n        cellbuild;\r\n        // public physics    : Physics = new Physics();\r\n        async load() {\r\n            this.cellbuild = await _parsers_iniparser__WEBPACK_IMPORTED_MODULE_1__.IniParser.loadIni(\"_assets/\" + this.ininame);\r\n            this.levelsize = { w: this.cellbuild.tiles[0].tileYX[0].length * this.cellbuild.square.w, h: this.cellbuild.tiles[0].tileYX.length * this.cellbuild.square.h };\r\n        }\r\n        async buildCell(file, glContext, shadercontext) {\r\n            this.cellbuild = await _parsers_iniparser__WEBPACK_IMPORTED_MODULE_1__.IniParser.loadIni(file);\r\n            this.cellbuild.texture = _render_assets__WEBPACK_IMPORTED_MODULE_3__.Assets.retrieveTex(this.cellbuild.tileset, glContext);\r\n            this.levelsize = { w: this.cellbuild.tiles[0].tileYX[0].length * this.cellbuild.square.w, h: this.cellbuild.tiles[0].tileYX.length * this.cellbuild.square.h };\r\n            this.representation = _parsers_tiledParser__WEBPACK_IMPORTED_MODULE_4__.Tiled.blit(glContext, shadercontext, this.cellbuild, \"level-layer\");\r\n        }\r\n    }\r\n    GameObjects.Level = Level;\r\n    class SharedObject {\r\n        // public shared : T.SharedBlueprint;\r\n        presence;\r\n        pos;\r\n        anisrc = {};\r\n        currentani;\r\n        hitbox;\r\n        ownerid;\r\n        ownername;\r\n        dir;\r\n        // public haspopulated: Array<number> = []; //ids of populated games (where the object has been created already)\r\n        constructor(shared) {\r\n            // this.shared = shared;\r\n            this.pos = shared.pos;\r\n            this.anisrc = shared.anisrc;\r\n            this.currentani = shared.currentani;\r\n            this.hitbox = shared.hitbox;\r\n            this.ownerid = shared.owner.id;\r\n            this.ownername = shared.owner.name;\r\n            this.dir = shared.dir;\r\n        }\r\n        update() {\r\n        }\r\n    }\r\n    GameObjects.SharedObject = SharedObject;\r\n    class Fauna extends _incarnations__WEBPACK_IMPORTED_MODULE_0__.Incarnations.Fauna {\r\n    }\r\n    GameObjects.Fauna = Fauna;\r\n    class Player extends _incarnations__WEBPACK_IMPORTED_MODULE_0__.Incarnations.Incarnated {\r\n        // protected allstates = (1<<AniSt.count) - 1;\r\n        hp = { max: 3, current: 3 };\r\n        myCamera;\r\n        keyboardactions = {};\r\n        registerkey(key, actions) {\r\n            this.keyboardactions[key] = actions;\r\n        }\r\n        updatekeys() {\r\n            for (let k in this.keyboardactions) {\r\n                let keyactions = this.keyboardactions[k];\r\n                if (_systems_keyboard__WEBPACK_IMPORTED_MODULE_2__.Keyboard.keys[k] != undefined) {\r\n                    switch (_systems_keyboard__WEBPACK_IMPORTED_MODULE_2__.Keyboard.keys[k]) {\r\n                        case -1:\r\n                            if (keyactions.keyup != undefined)\r\n                                keyactions.keyup();\r\n                            break;\r\n                        case 0:\r\n                            break;\r\n                        case 1:\r\n                            if (keyactions.keydown != undefined)\r\n                                keyactions.keydown();\r\n                            if (keyactions.keypressed != undefined)\r\n                                keyactions.keypressed();\r\n                            break;\r\n                        case 2:\r\n                            if (keyactions.keyheld != undefined)\r\n                                keyactions.keyheld();\r\n                            if (keyactions.keypressed != undefined)\r\n                                keyactions.keypressed();\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        update() {\r\n            super.update();\r\n            this.updatekeys();\r\n        }\r\n    }\r\n    GameObjects.Player = Player;\r\n    class GameAnimations {\r\n    }\r\n    GameObjects.GameAnimations = GameAnimations;\r\n})(GameObjects || (GameObjects = {}));\r\n\n\n//# sourceURL=webpack://TEWOU/./source/alacrity/_gameobjects.ts?\n}");

/***/ },

/***/ "./source/alacrity/_incarnations.ts"
/*!******************************************!*\
  !*** ./source/alacrity/_incarnations.ts ***!
  \******************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Incarnations: () => (/* binding */ Incarnations)\n/* harmony export */ });\n/* harmony import */ var _bodies__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_bodies */ \"./source/alacrity/_bodies.ts\");\n/* harmony import */ var _type__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_type */ \"./source/_type.ts\");\n\r\n\r\nvar Incarnations;\r\n(function (Incarnations) {\r\n    let Dir;\r\n    (function (Dir) {\r\n        Dir[Dir[\"up\"] = 0] = \"up\";\r\n        Dir[Dir[\"left\"] = 1] = \"left\";\r\n        Dir[Dir[\"down\"] = 2] = \"down\";\r\n        Dir[Dir[\"right\"] = 3] = \"right\";\r\n    })(Dir = Incarnations.Dir || (Incarnations.Dir = {}));\r\n    // export abstract class Level {\r\n    //     // public cellbuild: T.CellBuild;\r\n    //     public bodies : Bodies.Embodiment[] = [];\r\n    //     public abstract ininame : string;\r\n    //     public representation : Composite.Snap[];\r\n    //     public levelsize  : T.Box;\r\n    //     public grids : Array<CollisionGrid>;\r\n    //     public cellbuild : T.CellBuild;\r\n    //     // public physics    : Physics = new Physics();\r\n    //   public async load(){\r\n    //   this.cellbuild = await IniParser.loadIni(\"_assets/\"+this.ininame);\r\n    //   this.levelsize = {w: this.cellbuild.tiles[0].tileYX[0].length * this.cellbuild.square.w, h: this.cellbuild.tiles[0].tileYX.length * this.cellbuild.square.h};\r\n    //   }\r\n    // }\r\n    class Incarnated extends _bodies__WEBPACK_IMPORTED_MODULE_0__.Bodies.Mobility {\r\n        state = \"\";\r\n        anims = {};\r\n        dir = 2;\r\n        // protected game : Games;\r\n        switchanimation(state, direction = -1) {\r\n            let dir = direction == -1 ? this.dir : direction;\r\n            if (this.state == state) {\r\n                this.myFrame.frame = [this.anims[this.state][dir]];\r\n                return;\r\n            }\r\n            this.state = state;\r\n            this.myFrame.frame = [this.anims[this.state][dir]];\r\n            this.anims[this.state][dir].restart();\r\n        }\r\n    }\r\n    Incarnations.Incarnated = Incarnated;\r\n    class Fauna extends Incarnated {\r\n        update() {\r\n            super.update();\r\n            for (let a in this.actions) {\r\n                if (this.actions[a].state == _type__WEBPACK_IMPORTED_MODULE_1__.RunSwitch.off)\r\n                    continue;\r\n                if (this.actions[a].state == _type__WEBPACK_IMPORTED_MODULE_1__.RunSwitch.disabled) {\r\n                    if (this.actions[a].disabled != undefined)\r\n                        this.actions[a].disabled();\r\n                    this.actions[a].state = _type__WEBPACK_IMPORTED_MODULE_1__.RunSwitch.off;\r\n                }\r\n                else if (this.actions[a].state == _type__WEBPACK_IMPORTED_MODULE_1__.RunSwitch.enabled) {\r\n                    if (this.actions[a].enabled != undefined)\r\n                        this.actions[a].enabled();\r\n                    if (this.actions[a].running != undefined)\r\n                        this.actions[a].running();\r\n                    this.actions[a].state = _type__WEBPACK_IMPORTED_MODULE_1__.RunSwitch.running;\r\n                }\r\n                else if (this.actions[a].timer?.test().state == 'triggered') {\r\n                    if (this.actions[a].elapsed != undefined)\r\n                        this.actions[a].elapsed();\r\n                }\r\n                else if (this.actions[a].state == _type__WEBPACK_IMPORTED_MODULE_1__.RunSwitch.running) {\r\n                    if (this.actions[a].running != undefined)\r\n                        this.actions[a].running();\r\n                }\r\n            }\r\n        }\r\n        switchaction(action) {\r\n            this.actions[action].timer?.restart();\r\n            this.actions[action].state = _type__WEBPACK_IMPORTED_MODULE_1__.RunSwitch.enabled;\r\n            if (action == this.action)\r\n                return;\r\n            // if(this.action!=''){\r\n            // this.actions[this.action].timer?.pause();\r\n            this.actions[this.action].state = _type__WEBPACK_IMPORTED_MODULE_1__.RunSwitch.disabled;\r\n            // }\r\n            this.action = action;\r\n        }\r\n    }\r\n    Incarnations.Fauna = Fauna;\r\n    // export abstract class Player extends Fauna {\r\n    //   // protected allstates = (1<<AniSt.count) - 1;\r\n    //     public hp : Health = {max:3,current:3};\r\n    //     public myCamera  : Camera;\r\n    //   }\r\n})(Incarnations || (Incarnations = {}));\r\n\n\n//# sourceURL=webpack://TEWOU/./source/alacrity/_incarnations.ts?\n}");

/***/ },

/***/ "./source/alacrity/time.ts"
/*!*********************************!*\
  !*** ./source/alacrity/time.ts ***!
  \*********************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Time: () => (/* binding */ Time)\n/* harmony export */ });\nvar Time;\r\n(function (Time) {\r\n    class Watch {\r\n        static lastTick = 0;\r\n        static currTick = 0;\r\n    }\r\n    class Delta {\r\n        static firstTick = 0;\r\n        static delta = 16;\r\n        static refresh() {\r\n            Watch.currTick = Date.now();\r\n            Delta.delta = Math.min(Watch.currTick - Watch.lastTick, 100);\r\n            Watch.lastTick = Watch.currTick;\r\n        }\r\n        static getTick() {\r\n            return Watch.currTick;\r\n        }\r\n    }\r\n    Time.Delta = Delta;\r\n    class Timeout {\r\n        ms;\r\n        step = 0;\r\n        end;\r\n        start;\r\n        deletion = false;\r\n        paused = false;\r\n        done = false;\r\n        continuous = false;\r\n        repeat = true;\r\n        pauseTime = 0;\r\n        actions = {};\r\n        // private static allPaused : boolean = false;\r\n        // private static pausedAtPause : Set<Timeout> = new Set();\r\n        // private static pool    : Set<Timeout> = new Set();\r\n        trigName;\r\n        constructor(ms, triggerName, params = { continuous: false, repeat: true }, actions = {}) {\r\n            this.ms = ms;\r\n            this.trigName = triggerName;\r\n            if (params.continuous)\r\n                this.continuous = params.continuous;\r\n            else\r\n                this.continuous = false;\r\n            if (params.repeat)\r\n                this.repeat = params.repeat;\r\n            else\r\n                this.repeat = true;\r\n            this.start = Watch.currTick;\r\n            if (ms[0] === Infinity)\r\n                this.end = Infinity;\r\n            else\r\n                this.end = Watch.currTick + ms[0];\r\n            this.actions = actions;\r\n            // Timeout.pool.add(this);\r\n            // if(Timeout.allPaused) this.pause();\r\n        }\r\n        reset() {\r\n            this.start = Watch.currTick;\r\n            if (this.ms[this.step] === Infinity)\r\n                this.end = Infinity;\r\n            else\r\n                this.end = Watch.currTick + this.ms[this.step];\r\n        }\r\n        restart() {\r\n            this.paused = false;\r\n            this.step = 0;\r\n            this.reset();\r\n        }\r\n        // public static pauseAll(){\r\n        //   if(Timeout.allPaused) return;\r\n        //   for(let t of Timeout.pool){\r\n        //     if(t.paused) Timeout.pausedAtPause.add(t);\r\n        //     else t.pause();\r\n        //   }\r\n        //   Timeout.allPaused = true;\r\n        // }\r\n        // public static resumeAll(){\r\n        //   if(!Timeout.allPaused) return;\r\n        //   let unpause = new Set<Timeout>(Timeout.pool);\r\n        //   for(let t of Timeout.pausedAtPause){\r\n        //     unpause.delete(t);\r\n        //   }\r\n        //   for(let t of unpause){\r\n        //     t.resume();\r\n        //   }\r\n        //   Timeout.pausedAtPause.clear();\r\n        //   Timeout.allPaused = false;\r\n        // }\r\n        pause() {\r\n            this.pauseTime = Watch.currTick;\r\n            this.paused = true;\r\n        }\r\n        resume() {\r\n            this.start += Watch.currTick - this.pauseTime;\r\n            if (this.end === Infinity) { }\r\n            else\r\n                this.end += Watch.currTick - this.pauseTime;\r\n            this.pauseTime = 0;\r\n            this.paused = false;\r\n        }\r\n        getTimeoutTicks() {\r\n            return (this.paused ? this.pauseTime : Watch.currTick) - this.start;\r\n        }\r\n        test() {\r\n            if (this.done)\r\n                return { name: this.trigName, state: \"done\" };\r\n            if (!this.paused) {\r\n                if (this.end <= Watch.currTick) {\r\n                    if (this.continuous)\r\n                        this.step++;\r\n                    else if (!this.repeat)\r\n                        this.done = true;\r\n                    if (this.step >= this.ms.length) {\r\n                        this.step = 0;\r\n                        if (!this.repeat)\r\n                            this.done = true;\r\n                    }\r\n                    this.start = Watch.currTick;\r\n                    if (this.ms[this.step] !== Infinity)\r\n                        this.end = Watch.currTick + this.ms[this.step];\r\n                    else\r\n                        this.end = Infinity;\r\n                    if (this.actions.triggered)\r\n                        this.actions.triggered(this);\r\n                    return { name: this.trigName, state: \"triggered\" };\r\n                }\r\n                if (this.actions.active)\r\n                    this.actions.active(this);\r\n                else\r\n                    return { name: this.trigName, state: \"active\" };\r\n            }\r\n            if (this.end === Infinity) { }\r\n            else\r\n                this.end += Delta.delta;\r\n            return { name: this.trigName, state: \"paused\" };\r\n        }\r\n    }\r\n    Time.Timeout = Timeout;\r\n})(Time || (Time = {}));\r\n\n\n//# sourceURL=webpack://TEWOU/./source/alacrity/time.ts?\n}");

/***/ },

/***/ "./source/api.ts"
/*!***********************!*\
  !*** ./source/api.ts ***!
  \***********************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   API: () => (/* binding */ API),\n/* harmony export */   ActionGame: () => (/* binding */ ActionGame),\n/* harmony export */   Animation: () => (/* binding */ Animation),\n/* harmony export */   CaptureProperties: () => (/* reexport safe */ _physics_capture__WEBPACK_IMPORTED_MODULE_9__.CaptureProperties),\n/* harmony export */   CollideLayers: () => (/* reexport safe */ _physics_states__WEBPACK_IMPORTED_MODULE_8__.CollideLayers),\n/* harmony export */   CollideTypes: () => (/* reexport safe */ _physics_states__WEBPACK_IMPORTED_MODULE_8__.CollideTypes),\n/* harmony export */   Engine: () => (/* reexport safe */ _engine__WEBPACK_IMPORTED_MODULE_7__.Engine),\n/* harmony export */   Fauna: () => (/* binding */ Fauna),\n/* harmony export */   Frame: () => (/* binding */ Frame),\n/* harmony export */   Level: () => (/* binding */ Level),\n/* harmony export */   Player: () => (/* binding */ Player),\n/* harmony export */   Rectangle: () => (/* binding */ Rectangle)\n/* harmony export */ });\n/* harmony import */ var _games__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_games */ \"./source/_games.ts\");\n/* harmony import */ var _alacrity_gameobjects__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./alacrity/_gameobjects */ \"./source/alacrity/_gameobjects.ts\");\n/* harmony import */ var _render_composite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./render/composite */ \"./source/render/composite.ts\");\n/* harmony import */ var _parsers_ganiParser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./parsers/ganiParser */ \"./source/parsers/ganiParser.ts\");\n/* harmony import */ var _render_assets__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./render/assets */ \"./source/render/assets.ts\");\n/* harmony import */ var _parsers_iniparser__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./parsers/iniparser */ \"./source/parsers/iniparser.ts\");\n/* harmony import */ var _parsers_tiledParser__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./parsers/tiledParser */ \"./source/parsers/tiledParser.ts\");\n/* harmony import */ var _engine__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./engine */ \"./source/engine.ts\");\n/* harmony import */ var _physics_states__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./physics/states */ \"./source/physics/states.ts\");\n/* harmony import */ var _physics_capture__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./physics/capture */ \"./source/physics/capture.ts\");\n\r\n\r\n\r\n\r\n\r\n// import * as T from \"./_type\"\r\n// import { CollideLayers } from './physics/states';\r\n// import { CollideTypes } from './physics/states';\r\n// import { Bodies } from \"./alacrity/_bodies\";\r\n\r\n\r\n\r\n// import Assets from './render/assets';\r\n// export Engine\r\n\r\n\r\n\r\nclass Level extends _alacrity_gameobjects__WEBPACK_IMPORTED_MODULE_1__.GameObjects.Level {\r\n}\r\nclass Player extends _alacrity_gameobjects__WEBPACK_IMPORTED_MODULE_1__.GameObjects.Player {\r\n}\r\nclass Fauna extends _alacrity_gameobjects__WEBPACK_IMPORTED_MODULE_1__.GameObjects.Fauna {\r\n}\r\nclass ActionGame extends _games__WEBPACK_IMPORTED_MODULE_0__.Games.Action {\r\n    parseGani(file) {\r\n        return _parsers_ganiParser__WEBPACK_IMPORTED_MODULE_3__.GaniParser.parse(_render_assets__WEBPACK_IMPORTED_MODULE_4__.Assets.getText(file)).animations.map((a) => this.buildAni(a));\r\n    }\r\n}\r\nclass Animation extends _render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Animation {\r\n}\r\nclass Frame extends _render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Frame {\r\n}\r\nclass Rectangle extends _render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Rectangle {\r\n}\r\nclass API {\r\n    // public static createFrame(game:ActionGame,composite:Array<Composite.Composite>){\r\n    // }\r\n    static playSound(file) {\r\n        _render_assets__WEBPACK_IMPORTED_MODULE_4__.Assets.playSound(file);\r\n    }\r\n    static imageFromCSV(game, file) {\r\n        game.cellbuild.tiles = [_parsers_iniparser__WEBPACK_IMPORTED_MODULE_5__.IniParser.loadCSV(_render_assets__WEBPACK_IMPORTED_MODULE_4__.Assets.getText(file))];\r\n        return _parsers_tiledParser__WEBPACK_IMPORTED_MODULE_6__.Tiled.blit(game.glContext, game.shadercontext, game.cellbuild, \"Tree\")[0];\r\n    }\r\n    static async preloadText(file) {\r\n        await _render_assets__WEBPACK_IMPORTED_MODULE_4__.Assets.addText(file);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/api.ts?\n}");

/***/ },

/***/ "./source/engine.ts"
/*!**************************!*\
  !*** ./source/engine.ts ***!
  \**************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Engine: () => (/* binding */ Engine)\n/* harmony export */ });\n/* harmony import */ var _render_assets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./render/assets */ \"./source/render/assets.ts\");\n/* harmony import */ var _systems_keyboard__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./systems/keyboard */ \"./source/systems/keyboard.ts\");\n/* harmony import */ var _alacrity_time__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./alacrity/time */ \"./source/alacrity/time.ts\");\n\r\n\r\n\r\n// import RaceGame from './games/arduboyracing/game'\r\n// import ArbreGame from './games/arbre/game'\r\n// import sfx from './games/sfx/game'\r\nclass Engine {\r\n    static paused = true;\r\n    static games = [];\r\n    static sharedobjects = [];\r\n    constructor(game) {\r\n        // new Render.GL(document.body.clientWidth+'',document.body.clientHeight+'');\r\n        // Engine.games.push(game);\r\n    }\r\n    static async start(game) {\r\n        // await ShaderLoader.init();\r\n        _render_assets__WEBPACK_IMPORTED_MODULE_0__.Assets.initAudio();\r\n        await game.load();\r\n        // Time.Timeout.pauseAll();\r\n        return;\r\n    }\r\n    static mainLoop = () => {\r\n        _alacrity_time__WEBPACK_IMPORTED_MODULE_2__.Time.Delta.refresh();\r\n        Engine.games.forEach((g) => {\r\n            // g.sharedobjects = ;\r\n            g.run(Engine.sharedobjects);\r\n            g.window.update();\r\n            // g.sharedobjects = [];\r\n        }); // drop static, or run multiple games\r\n        _systems_keyboard__WEBPACK_IMPORTED_MODULE_1__.Keyboard.refresh(); // shouldn't it be before engine.game.run?\r\n        // Touch.refresh(); // drop functionality\r\n        // Window.refresh(); // move into game\r\n        // add something that knows which window is active keyboard should only act on active window\r\n        // if(!Engine.paused)\r\n        // Engine.sharedobjects = [];\r\n        requestAnimationFrame(Engine.mainLoop);\r\n        // else requestAnimationFrame(Engine.pauseLoop);\r\n    };\r\n}\r\n// let paused = true;\r\n// const mainLoop = () => {\r\n// }\r\n// let game: Games.Generic;\r\n/*\r\n\r\nnew Render.GL(document.body.clientWidth+'',document.body.clientHeight+'');\r\nconsole.log(document.body.clientWidth);\r\n// console.log(Render.Info.gl)\r\n// game = new sfx();\r\n// game = new ArbreGame();\r\n// game = new RaceGame();\r\n// game = new GameDemon();\r\n\r\n\r\nstart().then(()=>{\r\n  document.getElementById('gobutton').style.visibility = 'visible';\r\n  mainLoop();\r\n});\r\n\r\nlet gobutton = document.getElementById('gobutton').getBoundingClientRect();\r\n\r\nTouch.addButton('gobutton',{x:gobutton.x,y:gobutton.y,w:gobutton.width,h:500}, ()=>{\r\n  // Time.Delta.firstTick = Date.now();\r\n  Time.Timeout.resumeAll();\r\n  Assets.audioContext.resume();\r\n  document.getElementById('gobutton').style.display = 'none';\r\n  game.start();\r\n  paused = false;\r\n})\r\n}\r\n*/\r\n\n\n//# sourceURL=webpack://TEWOU/./source/engine.ts?\n}");

/***/ },

/***/ "./source/parsers/ganiParser.ts"
/*!**************************************!*\
  !*** ./source/parsers/ganiParser.ts ***!
  \**************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GaniParser: () => (/* binding */ GaniParser)\n/* harmony export */ });\nclass GaniParser {\r\n    // private \r\n    static parse(file) {\r\n        let sprites = [];\r\n        let properties = 0;\r\n        let next = \"\";\r\n        let anims = [];\r\n        for (let i = 0; i < 4; i++) {\r\n            anims.push({\r\n                frames: []\r\n            });\r\n        }\r\n        // let anims: Array<Composite.Animation> = [new Composite.Animation([]),new Composite.Animation([]),new Composite.Animation([]),new Composite.Animation([])]\r\n        // let anims: Array<Array<Composite.Snap>>= [[]]\r\n        // let gani: Gani = {\r\n        //   properties : 0,\r\n        //   // sprites : [],\r\n        //   next: \"\",\r\n        //   animations: \r\n        // };\r\n        let ani = false;\r\n        let defaults = {\r\n            HEAD: \"\",\r\n            BODY: \"\",\r\n            SWORD: \"redlightsabersword.png\"\r\n        };\r\n        let lines = file.split('\\n').map((l) => l.trim());\r\n        for (let i = 0; i < lines.length; i++) {\r\n            let properties = lines[i].split(' ');\r\n            let firstargument = properties.shift();\r\n            switch (firstargument) {\r\n                case \"DEFAULTHEAD\":\r\n                    defaults.HEAD = properties.join(' ');\r\n                    break;\r\n                case \"DEFAULTBODY\":\r\n                    defaults.BODY = properties.join(' ');\r\n            }\r\n        }\r\n        let direction = 0;\r\n        for (let i = 0; i < lines.length; i++) {\r\n            if (ani) {\r\n                if (lines[i].startsWith(\"ANIEND\"))\r\n                    break;\r\n                if (lines[i].startsWith(\"PLAYSOUND\"))\r\n                    continue;\r\n                let timeout = 300;\r\n                if (lines[i].startsWith(\"WAIT\")) {\r\n                    timeout = Number(lines[i].split(' ')[1]) * 1000;\r\n                    continue;\r\n                }\r\n                let imgs = lines[i].split(',').filter((l) => l != '');\r\n                if (imgs.length > 0) {\r\n                    // let snap: Composite.Snap = new Composite.Snap([]);\r\n                    let parts = [];\r\n                    for (let j = 0; j < imgs.length; j++) {\r\n                        let attributes = imgs[j].split(' ').filter((l) => l != '');\r\n                        // console.log(attributes)\r\n                        if (sprites[Number(attributes[0])].file === \"\")\r\n                            continue;\r\n                        // snap.parts.push(\r\n                        //   new Composite.Image(\r\n                        //     sprites[Number(attributes[0])].file, \r\n                        //     sprites[Number(attributes[0])].srcrect, \r\n                        //     { x:Number(attributes[1]), y: Number(attributes[2]),\r\n                        //       w:sprites[Number(attributes[0])].srcrect.w,\r\n                        //       h:sprites[Number(attributes[0])].srcrect.h,\r\n                        // }));\r\n                        parts.push({\r\n                            file: sprites[Number(attributes[0])].file,\r\n                            srcrect: sprites[Number(attributes[0])].srcrect,\r\n                            dstrect: {\r\n                                x: Number(attributes[1]),\r\n                                y: Number(attributes[2]),\r\n                                w: sprites[Number(attributes[0])].srcrect.w,\r\n                                h: sprites[Number(attributes[0])].srcrect.h,\r\n                            }\r\n                        });\r\n                    }\r\n                    // snap.parts = snap.parts.filter()\r\n                    // anims[direction].frames.push(snap);\r\n                    anims[direction].frames.push(parts);\r\n                    direction = (direction + 1) % 4;\r\n                }\r\n            }\r\n            else {\r\n                let properties = lines[i].split(' ').filter((l) => l != '');\r\n                // console.log(properties)\r\n                let firstargument = properties.shift();\r\n                switch (firstargument) {\r\n                    case \"SPRITE\":\r\n                        sprites[Number(properties[0])] = {\r\n                            file: defaults[properties[1]] == undefined ? \"\" : \"_assets/arbre/\" + defaults[properties[1]],\r\n                            srcrect: { x: Number(properties[2]), y: Number(properties[3]), w: Number(properties[4]), h: Number(properties[5]) }\r\n                        };\r\n                        // console.log( sprites[Number(properties[0])]);\r\n                        break;\r\n                    case \"ATTACHSPRITE\":\r\n                        break;\r\n                    case \"ANI\":\r\n                        ani = true;\r\n                        break;\r\n                    case \"LOOP\":\r\n                        // properties |= GaniProperties.LOOP;\r\n                        break;\r\n                    case \"CONTINUOUS\":\r\n                        // properties |= GaniProperties.CONTINUOUS;\r\n                        break;\r\n                    case \"SETBACKTO\":\r\n                        next = properties.join(' ');\r\n                        break;\r\n                    case \"SINGLEDIRECTION\":\r\n                        // properties |= GaniProperties.SINGLEDIRECTION;\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n        console.log(anims);\r\n        return {\r\n            properties: properties,\r\n            next: next,\r\n            animations: anims\r\n        };\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/parsers/ganiParser.ts?\n}");

/***/ },

/***/ "./source/parsers/iniparser.ts"
/*!*************************************!*\
  !*** ./source/parsers/iniparser.ts ***!
  \*************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IniParser: () => (/* binding */ IniParser)\n/* harmony export */ });\n/* harmony import */ var _render_assets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../render/assets */ \"./source/render/assets.ts\");\n\r\nclass IniParser {\r\n    static loadCSV(file) {\r\n        return { tileYX: file.split('\\n').filter((a) => a != '').map(x => x.split(',').map(y => Number(y))) };\r\n    }\r\n    static async loadIni(iniFileName) {\r\n        let tiles = [];\r\n        let npcs = \"\";\r\n        let collisions = [];\r\n        let tileset;\r\n        let tilesetwidth;\r\n        let square = { w: 16, h: 16 };\r\n        let playLayer;\r\n        let file = \"\";\r\n        // const lvlPath = iniFileName.split('.')[0];\r\n        const inifile = _render_assets__WEBPACK_IMPORTED_MODULE_0__.Assets.getText(await _render_assets__WEBPACK_IMPORTED_MODULE_0__.Assets.addText(iniFileName));\r\n        // const iniFile = await Assets.getText(iniFileName);\r\n        const iniLines = inifile.split('\\n');\r\n        for (let i = 0; i < iniLines.length; i++) {\r\n            const currLine = iniLines[i].split(' ');\r\n            switch (currLine[0]) {\r\n                case \"TILESET\":\r\n                    const currParams = currLine[1].split(':');\r\n                    switch (currParams[0]) {\r\n                        case \"SQUARE\":\r\n                            square = { w: Number(currParams[1]), h: Number(currParams[1]) };\r\n                            break;\r\n                        case \"FILE\":\r\n                            tileset = await _render_assets__WEBPACK_IMPORTED_MODULE_0__.Assets.addImage(currParams[1]);\r\n                            file = currParams[1];\r\n                            // tilesetwidth = Assets.getTextureWidth(currParams[1]);\r\n                            // console.log(tilesetwidth)\r\n                            break;\r\n                    }\r\n                    ;\r\n                    break;\r\n                case \"PLAYGROUND\":\r\n                    playLayer = Number(currLine[1]);\r\n                    break;\r\n                case \"CSV\":\r\n                    let props = currLine[1].split(':');\r\n                    const tileLayer = _render_assets__WEBPACK_IMPORTED_MODULE_0__.Assets.getText(await _render_assets__WEBPACK_IMPORTED_MODULE_0__.Assets.addText(props[1]));\r\n                    tiles[Number(props[0])] = { tileYX: tileLayer.split('\\n').filter((a) => a != '').map(x => x.split(',').map(y => Number(y))) };\r\n                    break;\r\n                case \"NPCS\":\r\n                    let npcsInfo = _render_assets__WEBPACK_IMPORTED_MODULE_0__.Assets.getText(await _render_assets__WEBPACK_IMPORTED_MODULE_0__.Assets.addText(currLine[1]));\r\n                    npcs = npcsInfo /* .replace(/\\n(?!\\Z)/g,',').split(',') */;\r\n                    break;\r\n                case \"COLLISION\":\r\n                    const collisionLn = _render_assets__WEBPACK_IMPORTED_MODULE_0__.Assets.getText(await _render_assets__WEBPACK_IMPORTED_MODULE_0__.Assets.addText(currLine[1]));\r\n                    const ln = collisionLn.trim().split('\\n');\r\n                    let coll = [];\r\n                    for (let l of ln) {\r\n                        coll.push(l.split(',').map((y) => Number(y) < 0 ? false : true));\r\n                    }\r\n                    collisions.push(coll);\r\n                    console.log(collisions);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            ;\r\n        }\r\n        tilesetwidth = _render_assets__WEBPACK_IMPORTED_MODULE_0__.Assets.getTextureWidth(file) - (_render_assets__WEBPACK_IMPORTED_MODULE_0__.Assets.getTextureWidth(file) % square.w);\r\n        return {\r\n            tiles: tiles,\r\n            npcs: npcs,\r\n            collisions: collisions,\r\n            tileset: tileset,\r\n            tilesetwidth: tilesetwidth,\r\n            square: square,\r\n            playLayer: playLayer,\r\n            grid: { w: tiles[0].tileYX[0].length, h: tiles[0].tileYX.length }\r\n        };\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/parsers/iniparser.ts?\n}");

/***/ },

/***/ "./source/parsers/tiledParser.ts"
/*!***************************************!*\
  !*** ./source/parsers/tiledParser.ts ***!
  \***************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Tiled: () => (/* binding */ Tiled)\n/* harmony export */ });\n/* harmony import */ var _render_composite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../render/composite */ \"./source/render/composite.ts\");\n/* harmony import */ var _render_textures__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../render/textures */ \"./source/render/textures.ts\");\n/**\r\n *\r\n * Send a 2char string and returns tile position in pics1_dyl.png array\r\n *\r\n * TODO: Links, Signs, NPCs, Chests and Baddies\r\n *\r\n *  */\r\n\r\n\r\nclass Tiled {\r\n    static blit(glContext, shadercontext, cellbuild, prefix) {\r\n        let i = -1;\r\n        return cellbuild.tiles.map(layer => {\r\n            i++;\r\n            console.log(layer);\r\n            const framebuffer = glContext.gl.createFramebuffer();\r\n            glContext.gl.bindFramebuffer(glContext.gl.FRAMEBUFFER, glContext.framebuffer);\r\n            const cellWidth = cellbuild.square.w * layer.tileYX[0].length;\r\n            const cellHeight = cellbuild.square.h * layer.tileYX.length;\r\n            const tilesetTW = (cellbuild.tilesetwidth / cellbuild.square.w);\r\n            // const tilesetTH  =  game.assetList.tileset.h  / game.assetList.square    ;\r\n            let cellTex = _render_textures__WEBPACK_IMPORTED_MODULE_1__[\"default\"].createTexToBlitOn(glContext, cellWidth, cellHeight);\r\n            glContext.gl.framebufferTexture2D(glContext.gl.FRAMEBUFFER, glContext.gl.COLOR_ATTACHMENT0, glContext.gl.TEXTURE_2D, cellbuild.texture, 0);\r\n            glContext.gl.bindTexture(glContext.gl.TEXTURE_2D, cellTex);\r\n            for (let y = 0; y < layer.tileYX.length; y++) {\r\n                for (let x = 0; x < layer.tileYX[y].length; x++) {\r\n                    glContext.gl.copyTexSubImage2D(glContext.gl.TEXTURE_2D, 0, x * cellbuild.square.w, y * cellbuild.square.h, \r\n                    // 0,\r\n                    layer.tileYX[y][x] % tilesetTW * cellbuild.square.w, Math.floor(layer.tileYX[y][x] / tilesetTW) * cellbuild.square.h, cellbuild.square.w, cellbuild.square.h);\r\n                }\r\n            }\r\n            // console.log(cellTex);\r\n            // glContext.gl.deleteFramebuffer(framebuffer)\r\n            glContext.addTexture(prefix + i, cellTex);\r\n            let a = new _render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Image(glContext, shadercontext, prefix + i, { x: 0, y: 0, w: cellWidth, h: cellHeight }, { x: 0, y: 0, w: cellWidth, h: cellHeight });\r\n            let b = new _render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Snap(glContext, shadercontext, [a]);\r\n            b.rprops.layer = i - cellbuild.playLayer;\r\n            return b;\r\n        });\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/parsers/tiledParser.ts?\n}");

/***/ },

/***/ "./source/physics/_collision.ts"
/*!**************************************!*\
  !*** ./source/physics/_collision.ts ***!
  \**************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Collision)\n/* harmony export */ });\nclass Collision {\r\n    deleteMe = false;\r\n    // public cpool : Array<Collision> = [];\r\n    // public dbgName : string = \"not defined collision\";\r\n    // public from : CollideLayers;\r\n    cwith;\r\n    type;\r\n    self;\r\n    offY;\r\n    offX;\r\n    width;\r\n    height;\r\n    ogBounds = { x: 0, y: 0, w: 0, h: 0 };\r\n    padding = { x: 1, y: 1 };\r\n    constructor(cwith, type) {\r\n        // this.from    = from;\r\n        this.cwith = cwith;\r\n        this.type = type;\r\n        // this.padding = padding * Globals.zoom;\r\n        // this.npc = null;\r\n        // this.cpool.push(this);\r\n    }\r\n    update(to) {\r\n        for (let e of to) {\r\n            this.intersect(e);\r\n        }\r\n    }\r\n    static inBounds(x, y, bounds) {\r\n        return x > bounds.x &&\r\n            x < bounds.x + bounds.w &&\r\n            y > bounds.y &&\r\n            y < bounds.y + bounds.h;\r\n    }\r\n    computeCollidePoints(bd, padding = { x: 1, y: 1 }, res = { w: 1, h: 1 }, sizeBit = 0) {\r\n        let mercy = [[\r\n                /* [0][0] */ Math.max(0, Math.floor((bd.x + padding.x * 2) / res.w)) >>> sizeBit,\r\n                /* [0][1] */ Math.max(0, Math.floor((bd.x) / res.w)) >>> sizeBit,\r\n                /* [0][2] */ Math.max(0, Math.floor((bd.x + bd.w - padding.x * 2) / res.w)) >>> sizeBit,\r\n                /* [0][3] */ Math.max(0, Math.floor((bd.x + bd.w) / res.w)) >>> sizeBit\r\n            ], [\r\n                /* [1][0] */ Math.max(0, Math.floor((bd.y + padding.y * 2) / res.h)),\r\n                /* [1][1] */ Math.max(0, Math.floor((bd.y) / res.h)),\r\n                /* [1][2] */ Math.max(0, Math.floor((bd.y + bd.h - padding.y * 2) / res.h)),\r\n                /* [1][3] */ Math.max(0, Math.floor((bd.y + bd.h) / res.h))\r\n            ]];\r\n        // [dir][xy][pt#]\r\n        return [\r\n            [[mercy[0][0], mercy[0][2]], [mercy[1][1], mercy[1][1]]],\r\n            [[mercy[0][1], mercy[0][1]], [mercy[1][0], mercy[1][2]]],\r\n            [[mercy[0][0], mercy[0][2]], [mercy[1][3], mercy[1][3]]],\r\n            [[mercy[0][3], mercy[0][3]], [mercy[1][0], mercy[1][2]]]\r\n        ];\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/physics/_collision.ts?\n}");

/***/ },

/***/ "./source/physics/capture.ts"
/*!***********************************!*\
  !*** ./source/physics/capture.ts ***!
  \***********************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Capture: () => (/* binding */ Capture)\n/* harmony export */ });\n/* harmony import */ var _collision__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_collision */ \"./source/physics/_collision.ts\");\n\r\nclass Capture extends _collision__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    hitbox;\r\n    owner;\r\n    call;\r\n    constructor(cwith, type, owner, hitbox, call) {\r\n        super(cwith, type);\r\n        this.owner = owner;\r\n        this.hitbox = hitbox;\r\n        this.call = call;\r\n    }\r\n    intersect(bd) {\r\n        let rectA = { x: this.owner.pos.x + this.hitbox.x, y: this.owner.pos.y + this.hitbox.y, w: this.hitbox.w, h: this.hitbox.h };\r\n        let rectB = { x: bd.pos.x + bd.hitbox.x, y: bd.pos.y + bd.hitbox.y, w: bd.hitbox.w, h: bd.hitbox.h };\r\n        // overlap\r\n        if ((rectA.x < rectB.x + rectB.w && rectA.x + rectA.w > rectB.x && rectA.y < rectB.y + rectB.h && rectA.y + rectA.h > rectB.y)) {\r\n            this.deleteMe = this.call(this.owner, bd);\r\n        }\r\n        // this.deleteMe = true;\r\n    }\r\n}\r\n// overlap\r\n// if(((Math.max(bd1.x,bd2.x)>=Math.min(bd1.x,bd2.x) && Math.max(bd1.x,bd2.x) <= Math.max(bd1.x+bd1.w,bd2.x+bd2.w)) ||\r\n//      Math.min(bd1.x+bd1.w,bd2.x+bx2.w) >= Math.min(bd1.x,bd2.x) && Math.min(bd1.x+bd1.w,bd2.x+bd2.w) <= Math.max(bd1.x+bd1.w,bd2.x+bd2.w)) &&\r\n//    ((Math.max(bd1.y,bd2.y)>=Math.min(bd1.y,bd2.y) && Math.max(bd1.y,bd2.y) <= Math.max(bd1.y+bd1.h,bd2.y+bd2.h)) ||\r\n//      Math.min(bd1.y+bd1.h,bd2.y+bx2.h) >= Math.min(bd1.y,bd2.y) && Math.min(bd1.y+bd1.h,bd2.y+bd2.h) <= Math.max(bd1.y+bd1.h,bd2.y+bd2.h)))\r\n\n\n//# sourceURL=webpack://TEWOU/./source/physics/capture.ts?\n}");

/***/ },

/***/ "./source/physics/gridCollision.ts"
/*!*****************************************!*\
  !*** ./source/physics/gridCollision.ts ***!
  \*****************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CollisionGrid: () => (/* binding */ CollisionGrid)\n/* harmony export */ });\n/* harmony import */ var _states__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./states */ \"./source/physics/states.ts\");\n/* harmony import */ var _collision__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_collision */ \"./source/physics/_collision.ts\");\n\r\n\r\n// import Game from '../../game/games';\r\n// import Games from '../../game/games';\r\nclass CollisionGrid extends _collision__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\r\n    // public npc;\r\n    padding = { x: 2, y: 2 };\r\n    resolution = 16;\r\n    walls = []; // walls[y][x]\r\n    // private game  : Games;\r\n    // private square  : number;\r\n    // private displaytileSize  : number;\r\n    // prote padding : T.Box = {w:1,h:1};\r\n    static sizeBit = 5; //32 bit\r\n    static bitSize = 1 << this.sizeBit;\r\n    ylimit;\r\n    xlimit;\r\n    constructor(boolArr, resolution, cwith, type) {\r\n        super(cwith, type);\r\n        this.ylimit = boolArr.length;\r\n        let gridwidth = boolArr[0].length;\r\n        this.xlimit = Math.ceil(boolArr[0].length / CollisionGrid.bitSize);\r\n        // console.log(boolArr)\r\n        let flatArr = boolArr.flat(Infinity);\r\n        let passes = 0;\r\n        this.resolution = resolution;\r\n        for (let idx = 0; idx < flatArr.length; idx += gridwidth) {\r\n            // console.log(\"/\")\r\n            this.walls.push(Array());\r\n            // let bAidx : number;\r\n            for (let i = 0; i < gridwidth; i += CollisionGrid.bitSize) {\r\n                let stuff = 0;\r\n                for (let bAidx = 0; bAidx < CollisionGrid.bitSize; bAidx++) {\r\n                    if (i + bAidx >= gridwidth)\r\n                        break;\r\n                    if (flatArr[idx + i + bAidx] == true) {\r\n                        stuff |= 1 << bAidx;\r\n                    }\r\n                }\r\n                // console.log(stuff);\r\n                this.walls[passes].push(stuff);\r\n            }\r\n            passes += 1;\r\n            // idx += game.levelWidth;\r\n        }\r\n        // console.log(this.walls);\r\n    }\r\n    //gXbd and gYbd are in grid coordinates\r\n    againstGrid(gXbd, gYbd, bdX) {\r\n        let xIndex = gXbd;\r\n        let yIndex = gYbd;\r\n        if (yIndex >= this.ylimit || yIndex < 0)\r\n            return false;\r\n        const bitX = Math.floor(((bdX) / this.resolution)) % (CollisionGrid.bitSize); //CollisionGrid.sizeBit;\r\n        let bShift = bitX;\r\n        let checkX = 1 << bShift;\r\n        if (xIndex >= this.xlimit || xIndex < 0)\r\n            return false;\r\n        return ((this.walls[yIndex][xIndex] & checkX) != 0);\r\n    }\r\n    testWall(point) {\r\n        return this.againstGrid(Math.floor(point.x / this.resolution) >>> CollisionGrid.sizeBit, Math.floor(point.y / this.resolution), point.x);\r\n    }\r\n    /**\r\n     *\r\n     * @param arch\r\n     * @returns 0 up to 3 right boolean array of if a wall is nearby in each direction\r\n     */\r\n    intersect(bd) {\r\n        // if(bd.dbgName==\"scorpion\"){\r\n        //   console.log(\"TOUTE\");\r\n        // }\r\n        const collidePoints = this.computeCollidePoints({ x: bd.pos.x + bd.hitbox.x, y: bd.pos.y + bd.hitbox.y, w: bd.hitbox.w, h: bd.hitbox.h }, this.padding, { w: this.resolution, h: this.resolution }, CollisionGrid.sizeBit);\r\n        // console.log(\"Collide Points:\", collidePoints);\r\n        //check top\r\n        this.checkCollisionDirection(bd, 0, collidePoints[0][0][0], collidePoints[0][1][0], bd.pos.x + bd.hitbox.x + 2 * this.padding.x, collidePoints[0][0][1], collidePoints[0][1][1], bd.pos.x + bd.hitbox.x + bd.hitbox.w - 2 * this.padding.x);\r\n        //check left\r\n        this.checkCollisionDirection(bd, 1, \r\n        // collidePoints[1][0][0],collidePoints[1][1][0], collidePoints[1][0][0],\r\n        // collidePoints[1][0][1],collidePoints[1][1][1], collidePoints[1][0][1])\r\n        collidePoints[1][0][0], collidePoints[1][1][0], bd.pos.x + bd.hitbox.x, collidePoints[1][0][1], collidePoints[1][1][1], bd.pos.x + bd.hitbox.x);\r\n        //check below\r\n        this.checkCollisionDirection(bd, 2, collidePoints[2][0][0], collidePoints[2][1][0], bd.pos.x + bd.hitbox.x + 2 * this.padding.x, collidePoints[2][0][1], collidePoints[2][1][1], bd.pos.x + bd.hitbox.x + bd.hitbox.w - 2 * this.padding.x);\r\n        //check right\r\n        this.checkCollisionDirection(bd, 3, collidePoints[3][0][0], collidePoints[3][1][0], bd.pos.x + bd.hitbox.x + bd.hitbox.w - this.padding.x, collidePoints[3][0][1], collidePoints[3][1][1], bd.pos.x + bd.hitbox.x + bd.hitbox.w - this.padding.x);\r\n        // return result;\r\n    }\r\n    checkCollisionDirection(bd, direction, x1, y1, posX1, x2, y2, posX2) {\r\n        const collision1 = this.againstGrid(x1, y1, posX1);\r\n        const collision2 = this.againstGrid(x2, y2, posX2);\r\n        // console.log(`Direction: ${direction}, Collision1: ${collision1}, Collision2: ${collision2}`);\r\n        bd.activeeffects[direction] |=\r\n            collision1 || collision2\r\n                ? this.type\r\n                : _states__WEBPACK_IMPORTED_MODULE_0__.CollideTypes.none;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/physics/gridCollision.ts?\n}");

/***/ },

/***/ "./source/physics/npcCollision.ts"
/*!****************************************!*\
  !*** ./source/physics/npcCollision.ts ***!
  \****************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NPCCollision: () => (/* binding */ NPCCollision)\n/* harmony export */ });\n/* harmony import */ var _states__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./states */ \"./source/physics/states.ts\");\n/* harmony import */ var _collision__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_collision */ \"./source/physics/_collision.ts\");\n\r\n\r\n// import Collision from \"../collisions/_collision\"\r\nclass NPCCollision extends _collision__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\r\n    // public self : Bodies.Embodiment;\r\n    constructor(self, cwith, types) {\r\n        super(cwith, types);\r\n        this.self = self;\r\n        this.padding = { x: 8, y: 8 };\r\n    }\r\n    intersect(bd) {\r\n        const body = { x: bd.pos.x + bd.hitbox.x, y: bd.pos.y + bd.hitbox.y, w: bd.hitbox.w, h: bd.hitbox.h };\r\n        const collidePoints = this.computeCollidePoints(body, this.padding);\r\n        const npcBounds = {\r\n            x: this.self.pos.x + this.self.hitbox.x,\r\n            y: this.self.pos.y + this.self.hitbox.y,\r\n            w: this.self.hitbox.w,\r\n            h: this.self.hitbox.h\r\n        };\r\n        let applyEffects = [\r\n            _states__WEBPACK_IMPORTED_MODULE_0__.CollideTypes.none,\r\n            _states__WEBPACK_IMPORTED_MODULE_0__.CollideTypes.none,\r\n            _states__WEBPACK_IMPORTED_MODULE_0__.CollideTypes.none,\r\n            _states__WEBPACK_IMPORTED_MODULE_0__.CollideTypes.none\r\n        ];\r\n        if ((body.x > npcBounds.x && body.x + this.padding.x < npcBounds.x + npcBounds.w) || (body.x + body.w - this.padding.x > npcBounds.x && body.x + body.w < npcBounds.x + npcBounds.w)) {\r\n            // Check top\r\n            applyEffects[0] |= ((npcBounds.y + npcBounds.h) - body.y > 0 && body.y > npcBounds.y) ? this.type : _states__WEBPACK_IMPORTED_MODULE_0__.CollideTypes.none;\r\n            // Check below\r\n            applyEffects[2] |= (npcBounds.y - (body.y + body.h) < 0 && body.y + body.h < npcBounds.y + npcBounds.h) ? this.type : _states__WEBPACK_IMPORTED_MODULE_0__.CollideTypes.none;\r\n        }\r\n        if ((body.y > npcBounds.y && body.y + this.padding.y < npcBounds.y + npcBounds.h) || (body.y + body.w - this.padding.y > npcBounds.y && body.y + body.w < npcBounds.y + npcBounds.h)) {\r\n            // Check left\r\n            applyEffects[1] |= ((npcBounds.x + npcBounds.w) - body.x > 0 && body.x > npcBounds.x) ? this.type : _states__WEBPACK_IMPORTED_MODULE_0__.CollideTypes.none;\r\n            // Check right\r\n            // console.log(\"npcbdx\" + npcBounds.x + \" rightmost:\" + (body.x + body.w) +\" lt0:\" + (npcBounds.x - body.x + body.w) + \" limits:\" + (body.x + body.w < npcBounds.x + npcBounds.w))\r\n            applyEffects[3] |= (npcBounds.x - (body.x + body.w) < 0 && body.x + body.w < npcBounds.x + npcBounds.w) ? this.type : _states__WEBPACK_IMPORTED_MODULE_0__.CollideTypes.none;\r\n        }\r\n        // Apply effects\r\n        for (let i = 0; i < 4; i++) {\r\n            bd.activeeffects[i] |= applyEffects[i];\r\n        }\r\n    }\r\n    // Helper function to check bounds\r\n    static checkBounds(points, bounds) {\r\n        return _collision__WEBPACK_IMPORTED_MODULE_1__[\"default\"].inBounds(points[0][0], points[1][0], bounds) ||\r\n            _collision__WEBPACK_IMPORTED_MODULE_1__[\"default\"].inBounds(points[0][1], points[1][1], bounds);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/physics/npcCollision.ts?\n}");

/***/ },

/***/ "./source/physics/states.ts"
/*!**********************************!*\
  !*** ./source/physics/states.ts ***!
  \**********************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CollideLayers: () => (/* binding */ CollideLayers),\n/* harmony export */   CollideTypes: () => (/* binding */ CollideTypes)\n/* harmony export */ });\nvar CollideTypes;\r\n(function (CollideTypes) {\r\n    CollideTypes[CollideTypes[\"none\"] = 1] = \"none\";\r\n    CollideTypes[CollideTypes[\"block\"] = 2] = \"block\";\r\n    CollideTypes[CollideTypes[\"hurt\"] = 4] = \"hurt\";\r\n    CollideTypes[CollideTypes[\"interact\"] = 8] = \"interact\";\r\n    CollideTypes[CollideTypes[\"climbable\"] = 16] = \"climbable\";\r\n    CollideTypes[CollideTypes[\"water\"] = 32] = \"water\";\r\n    CollideTypes[CollideTypes[\"instakill\"] = 64] = \"instakill\";\r\n    CollideTypes[CollideTypes[\"get\"] = 128] = \"get\";\r\n    CollideTypes[CollideTypes[\"custom0\"] = 256] = \"custom0\";\r\n    CollideTypes[CollideTypes[\"custom1\"] = 512] = \"custom1\";\r\n    CollideTypes[CollideTypes[\"custom2\"] = 1024] = \"custom2\";\r\n    CollideTypes[CollideTypes[\"custom3\"] = 2048] = \"custom3\";\r\n    CollideTypes[CollideTypes[\"custom4\"] = 4096] = \"custom4\";\r\n    CollideTypes[CollideTypes[\"custom5\"] = 8192] = \"custom5\";\r\n    CollideTypes[CollideTypes[\"custom6\"] = 16384] = \"custom6\";\r\n    CollideTypes[CollideTypes[\"custom7\"] = 32768] = \"custom7\";\r\n    CollideTypes[CollideTypes[\"custom8\"] = 65536] = \"custom8\";\r\n    CollideTypes[CollideTypes[\"custom9\"] = 131072] = \"custom9\";\r\n    CollideTypes[CollideTypes[\"all\"] = 262143] = \"all\";\r\n})(CollideTypes || (CollideTypes = {}));\r\nvar CollideLayers;\r\n(function (CollideLayers) {\r\n    CollideLayers[CollideLayers[\"none\"] = 1] = \"none\";\r\n    CollideLayers[CollideLayers[\"player\"] = 2] = \"player\";\r\n    CollideLayers[CollideLayers[\"npc\"] = 4] = \"npc\";\r\n    CollideLayers[CollideLayers[\"grid\"] = 8] = \"grid\";\r\n    CollideLayers[CollideLayers[\"interactable\"] = 16] = \"interactable\";\r\n    CollideLayers[CollideLayers[\"all\"] = 31] = \"all\";\r\n})(CollideLayers || (CollideLayers = {}));\r\n\n\n//# sourceURL=webpack://TEWOU/./source/physics/states.ts?\n}");

/***/ },

/***/ "./source/render/_render.ts"
/*!**********************************!*\
  !*** ./source/render/_render.ts ***!
  \**********************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Render: () => (/* binding */ Render)\n/* harmony export */ });\n// import S\r\nvar Render;\r\n(function (Render) {\r\n    class Info {\r\n        static MAXLAYERS = 256;\r\n        // public static contextPool : Array<T.glContext> = [];\r\n        // protected static vbuffer: WebGLBuffer;\r\n        // protected static Rframebuffer : WebGLFramebuffer;\r\n        // protected static framebuffer : WebGLFramebuffer;\r\n        // protected static renderbuffer : WebGLRenderbuffer;\r\n        // static gl: WebGL2RenderingContext;\r\n        static txt;\r\n        static textCanvas;\r\n        static contextCounter = -1;\r\n    }\r\n    Render.Info = Info;\r\n    class GLContext extends Info {\r\n        vbuffer;\r\n        Rframebuffer;\r\n        framebuffer;\r\n        renderbuffer;\r\n        gl;\r\n        id;\r\n        textures;\r\n        constructor(canvas, width, height) {\r\n            super();\r\n            // console.log(canvas)\r\n            Info.contextCounter++;\r\n            // super();\r\n            // console.log(height,width);\r\n            // if(!Info.txt && document.getElementById('text')!=undefined){\r\n            //   Info.txt = (():CanvasRenderingContext2D => {\r\n            //     // document.getElementsByTagName('body')[0].clientWidth\r\n            //     document.getElementById('text').setAttribute('width', document.getElementsByTagName('body')[0].clientWidth+'');\r\n            //     document.getElementById('text').setAttribute('height',document.getElementsByTagName('body')[0].clientHeight+'');\r\n            //     return (document.querySelector('#text') as HTMLCanvasElement).\r\n            //     getContext('2d');\r\n            //   })()\r\n            //   Info.textCanvas = (document.querySelector('#text') as HTMLCanvasElement)\r\n            // }\r\n            // if(!Info.gl){\r\n            let gl = (() => {\r\n                // let cnv = document.createElement('canvas');\r\n                canvas.setAttribute(\"width\", width);\r\n                canvas.setAttribute(\"height\", height);\r\n                canvas.style.width = width + \"px\";\r\n                canvas.style.height = height + \"px\";\r\n                // document.body.appendChild(cnv);\r\n                // let ctx = (cnv as HTMLCanvasElement).getContext(\"webgl2\",\r\n                //   {premultipliedAlpha: false}\r\n                // )\r\n                // document.getElementById(\"canvas\")!.setAttribute(\"width\",  width)\r\n                // document.getElementById(\"canvas\")!.setAttribute(\"height\", height)\r\n                let ctx = canvas.\r\n                    getContext(\"webgl2\", { premultipliedAlpha: false });\r\n                ctx.enable(ctx.BLEND);\r\n                ctx.blendFunc(ctx.SRC_ALPHA, ctx.ONE_MINUS_SRC_ALPHA);\r\n                return ctx;\r\n            })();\r\n            // Info.contextPool.push({\r\n            // let context = {\r\n            this.framebuffer = gl.createFramebuffer();\r\n            this.Rframebuffer = gl.createFramebuffer();\r\n            this.renderbuffer = gl.createRenderbuffer();\r\n            this.vbuffer = gl.createBuffer();\r\n            this.gl = gl;\r\n            this.id = String(Info.contextCounter);\r\n            this.textures = {};\r\n            // contextID    : Info.contextCounter\r\n            // }\r\n            // )\r\n            // Info.framebuffer  = Info.gl.createFramebuffer() ;\r\n            // Info.Rframebuffer = Info.gl.createFramebuffer() ;\r\n            // Info.renderbuffer = Info.gl.createRenderbuffer();\r\n            // Info.vbuffer      = Info.gl.createBuffer()      ;\r\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vbuffer);\r\n            this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array([\r\n                1, 0, 0, 0, 0, 1,\r\n                1, 0, 0, 1, 1, 1 // Triangle 2\r\n            ]), this.gl.STATIC_DRAW);\r\n            this.gl.clearColor(0, 0.5, 0, 0);\r\n            this.gl.bindFramebuffer(this.gl.READ_FRAMEBUFFER, this.Rframebuffer);\r\n            this.gl.bindFramebuffer(this.gl.DRAW_FRAMEBUFFER, this.framebuffer);\r\n            this.gl.bindRenderbuffer(this.gl.RENDERBUFFER, this.renderbuffer);\r\n            this.gl.renderbufferStorage(this.gl.RENDERBUFFER, this.gl.RGBA8, 2000, 2000);\r\n            this.gl.framebufferRenderbuffer(this.gl.DRAW_FRAMEBUFFER, this.gl.COLOR_ATTACHMENT0, this.gl.RENDERBUFFER, this.renderbuffer);\r\n            this.gl.readBuffer(this.gl.COLOR_ATTACHMENT0);\r\n            this.gl.drawBuffers([this.gl.COLOR_ATTACHMENT0]);\r\n            // Info.gl.drawingBufferColorSpace = \"display-p3\";\r\n            // Info.gl.unpackColorSpace = \"display-p3\";\r\n            // Info.contextPool.push(context);\r\n            // return context;\r\n        }\r\n        addTexture(name, tex) {\r\n            this.textures[name] = tex;\r\n        }\r\n        getTexture(name) {\r\n            return this.textures[name];\r\n        }\r\n    }\r\n    Render.GLContext = GLContext;\r\n    // private static resizeCanvasToDisplaySize(canvas, multiplier) {\r\n    //   multiplier = multiplier || 1;\r\n    //   const width  = canvas.clientWidth  * multiplier | 0;\r\n    //   const height = canvas.clientHeight * multiplier | 0;\r\n    //   if (canvas.width !== width ||  canvas.height !== height) {\r\n    //     canvas.width  = width;\r\n    //     canvas.height = height;\r\n    //     return true;\r\n    //   }\r\n    //   return false;\r\n    // }\r\n})(Render || (Render = {}));\r\n\n\n//# sourceURL=webpack://TEWOU/./source/render/_render.ts?\n}");

/***/ },

/***/ "./source/render/_shaders.ts"
/*!***********************************!*\
  !*** ./source/render/_shaders.ts ***!
  \***********************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Shader)\n/* harmony export */ });\nclass Shader {\r\n    shaders = {};\r\n    fallbackShader = 'normal';\r\n    previousShader = \"\";\r\n    currShader;\r\n    gl;\r\n    constructor(gl) {\r\n        // super();\r\n        this.gl = gl;\r\n    }\r\n    getShader(id = '') {\r\n        let shader = this.shaders[id] || this.shaders[this.fallbackShader] || undefined;\r\n        if (shader === undefined) {\r\n            console.log(\"Shader \" + id + \" doesn't exist and couldn't find fallback shader \" + this.fallbackShader);\r\n        }\r\n        return shader;\r\n    }\r\n    compileShader(type, source) {\r\n        let shader = this.gl.createShader(type);\r\n        this.gl.shaderSource(shader, source);\r\n        this.gl.compileShader(shader);\r\n        let success = this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS);\r\n        if (success)\r\n            return shader;\r\n        console.debug(this.gl.getShaderInfoLog(shader));\r\n        this.gl.deleteShader(shader);\r\n        return null;\r\n    }\r\n    createProgram(vertexShader, fragmentShader) {\r\n        let program = this.gl.createProgram();\r\n        this.gl.attachShader(program, vertexShader);\r\n        this.gl.attachShader(program, fragmentShader);\r\n        this.gl.linkProgram(program);\r\n        let success = this.gl.getProgramParameter(program, this.gl.LINK_STATUS);\r\n        if (success)\r\n            return program;\r\n        console.debug(this.gl.getProgramInfoLog(program));\r\n        this.gl.deleteProgram(program);\r\n        return null;\r\n    }\r\n    passShader(cmp, plane) {\r\n        if (cmp.rprops.shaderID != undefined)\r\n            this.validateShader(cmp.rprops.shaderID);\r\n        else\r\n            this.validateShader(this.fallbackShader);\r\n        // console.log(Shader.currShader.name)\r\n        if (this.currShader != undefined) {\r\n            // for(const a in this.currShader.first){\r\n            //   // console.log(\"A\");\r\n            //   this.currShader.first[a]();\r\n            // }\r\n            for (const a of this.currShader.second) {\r\n                a();\r\n            }\r\n            for (const a of this.currShader.passes) {\r\n                a(this.gl, cmp, plane);\r\n            }\r\n        }\r\n    }\r\n    validateShader(shaderID) {\r\n        if (this.previousShader !== shaderID) {\r\n            this.currShader = this.shaders[shaderID];\r\n            if (this.currShader != undefined) {\r\n                this.initShader(this.currShader);\r\n                this.previousShader = shaderID;\r\n            }\r\n            else {\r\n                console.log('Using Fallback shader');\r\n                this.currShader = this.shaders[this.fallbackShader] || undefined;\r\n                if (this.currShader != undefined)\r\n                    this.initShader(this.currShader);\r\n                else\r\n                    console.log(\"Fallback shader undefined\");\r\n                this.previousShader = this.fallbackShader;\r\n            }\r\n        }\r\n    }\r\n    initShader(sh) {\r\n        this.gl.useProgram(sh.program);\r\n        for (const a of this.currShader.first) {\r\n            a(this.gl);\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/render/_shaders.ts?\n}");

/***/ },

/***/ "./source/render/assets.ts"
/*!*********************************!*\
  !*** ./source/render/assets.ts ***!
  \*********************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Assets: () => (/* binding */ Assets)\n/* harmony export */ });\n/* harmony import */ var _textures__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./textures */ \"./source/render/textures.ts\");\n\r\nclass Assets {\r\n    static pathprefix = '';\r\n    static parser = new DOMParser();\r\n    static textures = {};\r\n    static texts = {};\r\n    static sounds = {};\r\n    static imgExts = ['png', 'jpg', 'gif', 'jpeg'];\r\n    static txtExts = ['nw', 'txt', 'vert', 'frag', 'gani', 'csv'];\r\n    static sndExts = ['wav', 'mp3'];\r\n    static audioContext;\r\n    static placeholder = \"_assets/blocking.png\";\r\n    static setprefix(prefix) {\r\n        this.pathprefix = prefix;\r\n    }\r\n    static getTexture(fileName) {\r\n        if (!Assets.textures[this.pathprefix + fileName]) {\r\n            console.log(\"Texture file not found or not loaded : \" + this.pathprefix + fileName);\r\n            return Assets.textures[this.placeholder];\r\n        }\r\n        return Assets.textures[this.pathprefix + fileName];\r\n    }\r\n    static getTextureWidth(fileName) {\r\n        if (!Assets.textures[this.pathprefix + fileName]) {\r\n            console.log(\"Texture file not found or not loaded : \" + this.pathprefix + fileName);\r\n            return -1;\r\n        }\r\n        return Assets.textures[this.pathprefix + fileName].width;\r\n    }\r\n    static getTextureHeight(fileName) {\r\n        if (!Assets.textures[this.pathprefix + fileName]) {\r\n            console.log(\"Texture file not found or not loaded : \" + this.pathprefix + fileName);\r\n            return -1;\r\n        }\r\n        return Assets.textures[this.pathprefix + fileName].height;\r\n    }\r\n    static getText(fileName) {\r\n        if (!Assets.texts[this.pathprefix + fileName]) {\r\n            console.log(\"Text file not found or not loaded : \" + this.pathprefix + fileName);\r\n            return \"\";\r\n        }\r\n        return Assets.texts[this.pathprefix + fileName];\r\n    }\r\n    static initAudio() {\r\n        // window.addEventListener('load', function() {\r\n        Assets.audioContext = new window.AudioContext();\r\n        // });\r\n    }\r\n    // public static addTexture(name: string, tex: WebGLTexture, size: T.Box) {\r\n    //   Assets.textures[name] = {t:tex, ...size};\r\n    // }\r\n    static retrieveTex(fileName, glContext) {\r\n        if (!glContext.textures[fileName]) {\r\n            // Assumes the file always exists\r\n            glContext.textures[fileName] = _textures__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createTexture(glContext, Assets.getTexture(fileName));\r\n        }\r\n        return glContext.textures[fileName];\r\n    }\r\n    static async addImage(fileName) {\r\n        if (!Assets.textures[this.pathprefix + fileName]) {\r\n            let img = new Image();\r\n            img.src = this.pathprefix + fileName;\r\n            try {\r\n                await img.decode().then(() => {\r\n                    // ne peut pas crer une texture immdiatement\r\n                    Assets.textures[this.pathprefix + fileName] = img;\r\n                });\r\n            }\r\n            catch {\r\n                console.log(\"Error\");\r\n            }\r\n        }\r\n        return this.pathprefix + fileName;\r\n    }\r\n    static async addText(fileName) {\r\n        if (!Assets.texts[this.pathprefix + fileName]) {\r\n            Assets.texts[this.pathprefix + fileName] = await fetch(this.pathprefix + fileName).then((x) => x.text());\r\n        }\r\n        return this.pathprefix + fileName;\r\n    }\r\n    static async addSound(fileName) {\r\n        if (!Assets.sounds[this.pathprefix + fileName]) {\r\n            await fetch(this.pathprefix + fileName)\r\n                .then(response => response.arrayBuffer())\r\n                .then(arrayBuffer => Assets.audioContext.decodeAudioData(arrayBuffer))\r\n                .then(decodedAudio => {\r\n                Assets.sounds[this.pathprefix + fileName] = decodedAudio;\r\n            })\r\n                .catch(error => console.error('Error loading audio file:', error));\r\n        }\r\n        return this.pathprefix + fileName;\r\n    }\r\n    static playSound(fileName) {\r\n        if (!Assets.sounds[this.pathprefix + fileName]) {\r\n            Assets.addSound(this.pathprefix + fileName).then((file) => Assets.play(Assets.sounds[this.pathprefix + fileName]));\r\n        }\r\n        else {\r\n            Assets.play(Assets.sounds[this.pathprefix + fileName]);\r\n        }\r\n    }\r\n    static play(decodedAudio) {\r\n        let source = Assets.audioContext.createBufferSource();\r\n        source.buffer = decodedAudio;\r\n        source.connect(Assets.audioContext.destination);\r\n        source.start();\r\n    }\r\n    /**\r\n     *\r\n     * @param folderPath Folder to load files from\r\n     * @param ext File extension(s) to load\r\n     * @returns Relative path of files found\r\n     */\r\n    static async loadAllExtInFolder(folderPath, ext) {\r\n        let xhr = new XMLHttpRequest();\r\n        let jobs = [];\r\n        xhr.open('GET', folderPath, false);\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState === 4 && xhr.status === 200) {\r\n                let filesa = Assets.parser.parseFromString(xhr.responseText, \"text/html\").getElementsByTagName('a');\r\n                // could use files = filesa.map((f)=>{return f.getAttributes(\"href\")})\r\n                let files = [];\r\n                for (let i = 0; i < filesa.length; i++)\r\n                    files.push(filesa[i].getAttribute(\"href\"));\r\n                for (let file of files) {\r\n                    if (file.trim().length <= 0)\r\n                        continue;\r\n                    let fspl = file.split('.');\r\n                    let fileType = fspl[fspl.length - 1];\r\n                    if (fileType.endsWith('/'))\r\n                        continue;\r\n                    if (fileType.startsWith('?'))\r\n                        continue;\r\n                    if (ext.includes(fileType)) {\r\n                        if (Assets.imgExts.includes(fileType))\r\n                            jobs.push(Assets.addImage(folderPath + file));\r\n                        else if (Assets.txtExts.includes(fileType))\r\n                            jobs.push(Assets.addText(folderPath + file));\r\n                        else if (Assets.sndExts.includes(fileType))\r\n                            jobs.push(Assets.addSound(folderPath + file));\r\n                        else\r\n                            console.log('Incompatible file : ' + file);\r\n                    }\r\n                    else\r\n                        console.log('File is neither ' + ext.join(' or ') + ' : ' + file);\r\n                }\r\n            }\r\n        };\r\n        xhr.send();\r\n        await Promise.all(jobs);\r\n        return jobs;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/render/assets.ts?\n}");

/***/ },

/***/ "./source/render/composite.ts"
/*!************************************!*\
  !*** ./source/render/composite.ts ***!
  \************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Composite: () => (/* binding */ Composite)\n/* harmony export */ });\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_render */ \"./source/render/_render.ts\");\n/* harmony import */ var _textures__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./textures */ \"./source/render/textures.ts\");\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./assets */ \"./source/render/assets.ts\");\n/* harmony import */ var _alacrity_time__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../alacrity/time */ \"./source/alacrity/time.ts\");\n\r\n\r\n\r\n\r\nvar Composite;\r\n(function (Composite_1) {\r\n    class Renderable extends _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info {\r\n        rprops;\r\n        texture;\r\n        file;\r\n        ready;\r\n        parent = undefined;\r\n        glContext;\r\n        shadercontext;\r\n        constructor(glContext, shadercontext) {\r\n            super();\r\n            this.glContext = glContext;\r\n            this.shadercontext = shadercontext;\r\n            this.rprops = {\r\n                srcrect: undefined,\r\n                dstrect: { x: 0, y: 0, w: 0, h: 0 },\r\n                pos: { x: 0, y: 0 },\r\n                flip: { flipx: false, flipy: false },\r\n                angle: 0,\r\n                scale: { x: 1, y: 1 },\r\n                layer: 0,\r\n                hidden: false,\r\n                delete: false\r\n            };\r\n        }\r\n        getclientbounds() {\r\n            return {\r\n                x: this.getclientleft(),\r\n                y: this.getclienttop(),\r\n                w: this.getclientwidth(),\r\n                h: this.getclientheight()\r\n            };\r\n        }\r\n        // add \"add\" methods to Snap, animation, frame (or simply composite?) \r\n        //// so parent is updated at addition (instead of pushing directly)\r\n        getclientleft() {\r\n            // console.log(this.rprops.pos.x)\r\n            if (!this.parent) {\r\n                return this.rprops.pos.x * this.getwidthratio(); // + (this.parent==undefined?0:this.parent.getclientleft());\r\n            }\r\n            return (this.rprops.pos.x + this.parent.getclientleft()) * this.getwidthratio();\r\n        }\r\n        getclienttop() {\r\n            return (this.rprops.pos.y + (this.parent == undefined ? 0 : this.parent.getclienttop())) * this.getwidthratio();\r\n        }\r\n        getclientwidth(dstrect = this.rprops.dstrect) {\r\n            return dstrect.w * this.getwidthratio();\r\n        }\r\n        getclientheight(dstrect = this.rprops.dstrect) {\r\n            return dstrect.h * this.getheightratio();\r\n            // removed by dead control flow\n\r\n        }\r\n        getwidthratio() {\r\n            if (this.parent != undefined) {\r\n                return (this.rprops.dstrect.w / this.rprops.srcrect.w) * this.parent.getwidthratio();\r\n            }\r\n            return this.rprops.dstrect.w / this.rprops.srcrect.w;\r\n        }\r\n        getheightratio() {\r\n            if (this.parent != undefined) {\r\n                return (this.rprops.dstrect.h / this.rprops.srcrect.h) * this.parent.getheightratio();\r\n            }\r\n            return this.rprops.dstrect.h / this.rprops.srcrect.h;\r\n        }\r\n        retrieveTexture(fileName) {\r\n            if (!this.glContext.textures[fileName]) {\r\n                // Assumes the file always exists\r\n                this.glContext.textures[fileName] = _textures__WEBPACK_IMPORTED_MODULE_1__[\"default\"].createTexture(this.glContext, _assets__WEBPACK_IMPORTED_MODULE_2__.Assets.getTexture(fileName));\r\n            }\r\n            return this.glContext.textures[fileName];\r\n        }\r\n    }\r\n    Composite_1.Renderable = Renderable;\r\n    // export class Text extends Renderable {\r\n    //   constructor(content: string, size: number, font: string, color: string){\r\n    //     super();\r\n    //     // Create a 2D canvas\r\n    //     // const textCanvas = Render.Info.txt;\r\n    //     // Draw text on the 2D canvas\r\n    //     Render.Info.txt.fillStyle = color;//'white';\r\n    //     Render.Info.txt.font = size + 'px' + ' ' + font; //'30px Arial' ;\r\n    //     Render.Info.txt.fillText(content, 0, 0);\r\n    //     let textsize = Render.Info.txt.measureText(content);\r\n    //     this.rprops.srcrect = {\r\n    //       x:0,\r\n    //       y:0,\r\n    //       w: textsize.width,\r\n    //       h: size\r\n    //     }\r\n    //     this.rprops.dstrect = this.rprops.srcrect;\r\n    //     // Use the 2D canvas as a texture in WebGL\r\n    //     // const gl = document.getElementById('webglCanvas').getContext('webgl');\r\n    //     const texture = Render.Info.gl.createTexture();\r\n    //     Render.Info.gl.bindTexture(Render.Info.gl.TEXTURE_2D, texture);\r\n    //     Render.Info.gl.texImage2D(Render.Info.gl.TEXTURE_2D, 0, Render.Info.gl.RGBA, Render.Info.gl.RGBA, Render.Info.gl.UNSIGNED_BYTE, Render.Info.textCanvas);\r\n    //     Render.Info.gl.generateMipmap(Render.Info.gl.TEXTURE_2D);\r\n    //   }\r\n    // }\r\n    class Rectangle extends Renderable {\r\n        // private bounds : T.Bounds;\r\n        constructor(glContext, shadercontext, bounds, color) {\r\n            super(glContext, shadercontext);\r\n            this.rprops.dstrect = bounds;\r\n            this.rprops.colorize = color;\r\n            // this.rprops.shaderID = \"rectangle\"\r\n        }\r\n        compose() {\r\n            if (!this.ready) {\r\n                let gl = this.glContext.gl;\r\n                let spr = _textures__WEBPACK_IMPORTED_MODULE_1__[\"default\"].createTexToBlitOn(this.glContext, 1, 1);\r\n                gl.bindFramebuffer(gl.FRAMEBUFFER, this.glContext.framebuffer);\r\n                gl.bindTexture(gl.TEXTURE_2D, spr);\r\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array([this.rprops.colorize[0], this.rprops.colorize[1], this.rprops.colorize[2], this.rprops.colorize[3]]));\r\n                this.texture = spr;\r\n                this.ready = true;\r\n            }\r\n            return this.rprops.delete;\r\n        }\r\n    }\r\n    Composite_1.Rectangle = Rectangle;\r\n    class Image extends Renderable {\r\n        constructor(glContext, shadercontext, file, srcrect, dstrect, plane = undefined) {\r\n            super(glContext, shadercontext);\r\n            this.file = file;\r\n            this.rprops.srcrect = srcrect;\r\n            this.rprops.dstrect = dstrect;\r\n        }\r\n        compose() {\r\n            // console.log(this.file);\r\n            // if(this.ready){\r\n            //   Image.gl.deleteTexture(this.texture);\r\n            //   this.ready = false;\r\n            // }\r\n            if (!this.ready /*  && Assets.getTexture(this.file) */) {\r\n                let gl = this.glContext.gl;\r\n                let spr = _textures__WEBPACK_IMPORTED_MODULE_1__[\"default\"].createTexToBlitOn(this.glContext, this.rprops.srcrect.w, this.rprops.srcrect.h);\r\n                gl.bindFramebuffer(gl.FRAMEBUFFER, this.glContext.framebuffer);\r\n                gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.retrieveTexture(this.file), 0);\r\n                gl.bindTexture(gl.TEXTURE_2D, spr);\r\n                gl.copyTexSubImage2D(gl.TEXTURE_2D, 0, 0, 0, this.rprops.srcrect.x, this.rprops.srcrect.y, this.rprops.srcrect.w, this.rprops.srcrect.h);\r\n                gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n                this.texture = spr;\r\n                this.ready = true;\r\n            }\r\n            return this.rprops.delete;\r\n        }\r\n    }\r\n    Composite_1.Image = Image;\r\n    class Composite extends Renderable {\r\n        remove;\r\n        dynamic = false;\r\n        bg;\r\n        mask;\r\n        viewport;\r\n        applyBg() { }\r\n        applyMask() { }\r\n        compose() { return this.rprops.delete; }\r\n        constructor(glContext, shadercontext) {\r\n            super(glContext, shadercontext);\r\n            this.viewport = { x: 0, y: 0, w: glContext.gl.canvas.width, h: glContext.gl.canvas.height };\r\n        }\r\n        static createFocus(rd) {\r\n            // console.log(rd);\r\n            return {\r\n                x: rd.reduce((acc, c) => { return Math.min(acc, c.rprops.dstrect.x); }, rd[0].rprops.dstrect.x),\r\n                y: rd.reduce((acc, c) => { return Math.min(acc, c.rprops.dstrect.y); }, rd[0].rprops.dstrect.y),\r\n                w: rd.reduce((acc, c) => { return Math.max(acc, c.rprops.dstrect.w + c.rprops.dstrect.x); }, 0),\r\n                h: rd.reduce((acc, c) => { return Math.max(acc, c.rprops.dstrect.h + c.rprops.dstrect.y); }, 0)\r\n            };\r\n        }\r\n        generateComposite(rd, focusRect) {\r\n            let toDraw = rd.filter((r) => { return !r?.rprops.hidden; });\r\n            if (toDraw.length > 0) {\r\n                toDraw.sort((a, b) => a.rprops.layer - b.rprops.layer);\r\n                for (let i = 0; i < toDraw.length; i++)\r\n                    toDraw[i].compose();\r\n                // let focusRect : T.Bounds = ;\r\n                // console.log(focusRect)\r\n                this.rprops.srcrect = {\r\n                    x: focusRect.x,\r\n                    y: focusRect.y,\r\n                    w: focusRect.w /*  <= this.rprops.dstrect.w ? this.rprops.dstrect.w : focusRect.w */,\r\n                    h: focusRect.h /*  <= this.rprops.dstrect.h ? this.rprops.dstrect.h : focusRect.h */\r\n                };\r\n                this.rprops.dstrect = {\r\n                    x: this.rprops.pos.x /* + (this.rprops.scalex == 1 ? 0 : (this.rprops.srcrect!.w - (this.rprops.srcrect!.w * this.rprops.scalex)) / 2) */,\r\n                    y: this.rprops.pos.y /* + (this.rprops.scaley == 1 ? 0 : (this.rprops.srcrect!.h - (this.rprops.srcrect!.h * this.rprops.scaley)) / 2) */,\r\n                    w: this.rprops.srcrect.w /* +focusRect.x */,\r\n                    h: this.rprops.srcrect.h /* +focusRect.y */\r\n                };\r\n                let gl = this.glContext.gl;\r\n                gl.bindFramebuffer(gl.FRAMEBUFFER, this.glContext.framebuffer);\r\n                this.texture = _textures__WEBPACK_IMPORTED_MODULE_1__[\"default\"].createTexToBlitOn(this.glContext, this.rprops.dstrect.w, this.rprops.dstrect.h);\r\n                gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.texture, 0);\r\n                gl.viewport(-this.viewport.x, -this.viewport.y, this.rprops.dstrect.w, this.rprops.dstrect.h);\r\n                // gl.clearColor(0, 1, 0, .5);\r\n                // gl.clear(gl.COLOR_BUFFER_BIT);\r\n                for (let i = 0; i < toDraw.length; i++) {\r\n                    // toDraw[i].compose();\r\n                    this.glContext.gl.bindTexture(gl.TEXTURE_2D, toDraw[i].texture);\r\n                    this.shadercontext.passShader(toDraw[i], this.rprops.dstrect);\r\n                    gl.drawArrays(gl.TRIANGLES, 0, 6);\r\n                }\r\n                this.ready = true;\r\n            }\r\n            else\r\n                this.ready = false;\r\n        }\r\n        // add \"add\" methods to Snap, animation, frame (or simply composite?) \r\n        //// so parent is updated at addition (instead of pushing directly)\r\n        // need to refresh camera for viewport to have the camera modifications\r\n        getclientleft() {\r\n            // console.log(this.rprops.pos.x - this.viewport.x);\r\n            if (!this.parent) {\r\n                return this.rprops.pos.x - this.viewport.x; // + (this.parent==undefined?0:this.parent.getclientleft());\r\n            }\r\n            return this.rprops.pos.x + this.parent.getclientleft() - this.viewport.x;\r\n        }\r\n        getclienttop() {\r\n            return this.rprops.pos.y + (this.parent == undefined ? 0 : this.parent.getclienttop()) - this.viewport.y;\r\n        }\r\n        addtocomposition(arr) { }\r\n    }\r\n    Composite_1.Composite = Composite;\r\n    class Snap extends Composite {\r\n        parts;\r\n        constructor(glContext, shadercontext, parts) {\r\n            super(glContext, shadercontext);\r\n            for (let p of parts)\r\n                p.parent = this;\r\n            this.parts = parts;\r\n        }\r\n        compose() {\r\n            if (this.rprops.delete) {\r\n                if (this.ready)\r\n                    this.glContext.gl.deleteTexture(this.texture);\r\n                return this.rprops.delete;\r\n            }\r\n            if (this.dynamic) {\r\n                if (this.ready) {\r\n                    this.glContext.gl.deleteTexture(this.texture);\r\n                }\r\n                this.ready = false;\r\n            }\r\n            if (!this.ready) {\r\n                let focusRect = Snap.createFocus(this.parts);\r\n                // focusRect.x = 0;\r\n                // focusRect.y = 0;\r\n                // this.rprops.pos.x = focusRect.x;\r\n                // this.viewport.x   = -focusRect.x;\r\n                this.generateComposite(this.parts, focusRect);\r\n            }\r\n            return this.rprops.delete;\r\n        }\r\n        addtocomposition(arr) {\r\n            for (let a of arr) {\r\n                a.parent = this;\r\n            }\r\n            this.parts.push(...arr);\r\n        }\r\n    }\r\n    Composite_1.Snap = Snap;\r\n    class Animation extends Composite {\r\n        frames;\r\n        currentFrame = 0;\r\n        // private timings     : number[];\r\n        timer;\r\n        constructor(glContext, shadercontext, frames, timings = [200]) {\r\n            super(glContext, shadercontext);\r\n            this.dynamic = true;\r\n            this.timer = new _alacrity_time__WEBPACK_IMPORTED_MODULE_3__.Time.Timeout(timings, \"framechange\");\r\n            this.frames = frames;\r\n            for (let f of frames)\r\n                f.parent = this;\r\n        }\r\n        compose() {\r\n            if (this.rprops.delete) {\r\n                for (let f of this.frames) {\r\n                    f.rprops.delete = true;\r\n                    f.compose();\r\n                }\r\n                return this.rprops.delete;\r\n            }\r\n            this.handleframechange();\r\n            if (this.frames[this.currentFrame].dynamic || !this.frames[this.currentFrame].ready) {\r\n                this.frames[this.currentFrame].compose();\r\n            }\r\n            this.texture = this.frames[this.currentFrame].texture;\r\n            this.rprops = this.frames[this.currentFrame].rprops;\r\n            // this.rprops.srcrect = this.frames[this.currentFrame].rprops.srcrect;\r\n            // this.rprops.dstrect = this.frames[this.currentFrame].rprops.dstrect;\r\n            // this.rprops.pos     = this.frames[this.currentFrame].rprops.pos    ;\r\n            // this.rprops.flip    = this.frames[this.currentFrame].rprops.flip   ;\r\n            // this.rprops.angle   = this.frames[this.currentFrame].rprops.angle  ;\r\n            // this.rprops.scalex  = this.frames[this.currentFrame].rprops.scalex ;\r\n            // this.rprops.scaley  = this.frames[this.currentFrame].rprops.scaley ;\r\n            // this.rprops.layer   = this.frames[this.currentFrame].rprops.layer  ;\r\n            // this.rprops.hidden  = this.frames[this.currentFrame].rprops.hidden ;\r\n            // this.rprops.delete  = this.frames[this.currentFrame].rprops.delete ;\r\n            // console.log(this.rprops.pos.y);\r\n            this.ready = this.frames[this.currentFrame].ready;\r\n            return this.rprops.delete;\r\n        }\r\n        handleframechange() {\r\n            let trig = this.timer.test();\r\n            if (trig.state == 'triggered') {\r\n                this.currentFrame += 1;\r\n                if (this.currentFrame >= this.frames.length)\r\n                    this.currentFrame = 0;\r\n            }\r\n        }\r\n        pause() {\r\n            this.timer.pause();\r\n        }\r\n        resume() {\r\n            this.timer.resume();\r\n        }\r\n        restart() {\r\n            this.timer.restart();\r\n            this.currentFrame = 0;\r\n        }\r\n        // these are present because of a bug linking animation position, \r\n        // currently, i need to link every of its frames to the animation's parent position\r\n        // it works but is incorrect and may lead to future malfunctioning\r\n        //\r\n        getclientleft() {\r\n            return this.parent.getclientleft();\r\n        }\r\n        getclienttop() {\r\n            return this.parent.getclienttop();\r\n        }\r\n        // returns and diminishes once too many?\r\n        getclientwidth() {\r\n            return super.getclientwidth(this.frames[this.currentFrame].rprops.dstrect);\r\n            // return this.frames[this.currentFrame].rprops.dstrect.w * this.getwidthratio();\r\n        }\r\n        getclientheight() {\r\n            return super.getclientheight(this.frames[this.currentFrame].rprops.dstrect);\r\n        }\r\n        addtocomposition(arr) {\r\n            for (let a of arr) {\r\n                a.parent = this;\r\n            }\r\n            this.frames.push(...arr);\r\n        }\r\n    }\r\n    Composite_1.Animation = Animation;\r\n    class Frame extends Composite {\r\n        frame;\r\n        // public worldpos : T.Point = {x:0,y:0};\r\n        camera = undefined;\r\n        picture = { crop: { do: false, w: 0, h: 0 }, x: 0, y: 0, w: 0, h: 0, img: undefined, ready: false };\r\n        // private size : T.Box;\r\n        constructor(glContext, shadercontext, frame, size = { w: 0, h: 0 }) {\r\n            super(glContext, shadercontext);\r\n            this.frame = frame;\r\n            this.dynamic = true;\r\n            // this.size = size;\r\n            this.rprops.dstrect.w = size.w;\r\n            this.rprops.dstrect.h = size.h;\r\n            for (let f of frame)\r\n                f.parent = this;\r\n        }\r\n        compose() {\r\n            // if(this.rprops.delete) return this.rprops.delete;\r\n            // There has to be an underlying bug for this next line to be required:\r\n            if (this.frame[0] === undefined) {\r\n                console.log(\"Skipping empty frame...\");\r\n                return true;\r\n            }\r\n            if (this.dynamic || this.rprops.delete) {\r\n                if ((this.rprops.delete && this.ready) || this.ready) {\r\n                    this.glContext.gl.deleteTexture(this.texture);\r\n                }\r\n                this.ready = false;\r\n            }\r\n            if (!this.ready) {\r\n                this.frame = this.frame.filter((f) => f != undefined && !f.compose());\r\n                let parts = this.frame.filter((f) => { return f.ready; });\r\n                let focusRect = Snap.createFocus(parts);\r\n                this.rprops.dstrect.x = this.rprops.pos.x;\r\n                this.rprops.dstrect.y = this.rprops.pos.y;\r\n                if (this.camera !== undefined) {\r\n                    this.rprops.dstrect.w = this.camera.viewport.w;\r\n                    this.rprops.dstrect.h = this.camera.viewport.h;\r\n                    // console.log(this.camera.viewport.x)\r\n                    this.viewport = { x: this.camera.viewport.x, y: this.camera.viewport.y, w: this.camera.viewport.w, h: this.camera.viewport.h };\r\n                }\r\n                // console.log(\"BOB\")\r\n                if (parts.length > 0)\r\n                    this.generateComposite(parts, focusRect);\r\n                if (this.picture.crop.do)\r\n                    this.crop();\r\n                this.ready = true;\r\n            }\r\n            return this.rprops.delete;\r\n        }\r\n        crop() {\r\n            if (this.picture.ready) {\r\n                // Composite.gl.deleteTexture(this.picture.img.texture);\r\n                this.glContext.gl.deleteTexture(this.glContext.getTexture('croptex'));\r\n                this.picture.ready = false;\r\n            }\r\n            if (!this.picture.ready) {\r\n                this.glContext.addTexture('croptex', this.texture);\r\n                let img = new Image(this.glContext, this.shadercontext, 'croptex', { x: 0, y: 0, w: this.picture.crop.w, h: this.picture.crop.h }, { x: 0, y: 0, w: this.picture.w, h: this.picture.h });\r\n                img.compose();\r\n                this.texture = img.texture;\r\n                this.rprops.pos.x = this.picture.x;\r\n                this.rprops.pos.y = this.picture.y;\r\n                this.rprops.dstrect.w = this.picture.w;\r\n                this.rprops.dstrect.h = this.picture.h;\r\n                this.picture.ready = true;\r\n            }\r\n        }\r\n        setCrop(crop, dest) {\r\n            this.picture =\r\n                { crop: { do: true, ...crop }, ...dest, img: undefined, ready: false };\r\n        }\r\n        addtocomposition(arr) {\r\n            for (let a of arr) {\r\n                a.parent = this;\r\n            }\r\n            this.frame.push(...arr);\r\n        }\r\n    }\r\n    Composite_1.Frame = Frame;\r\n})(Composite || (Composite = {}));\r\n\n\n//# sourceURL=webpack://TEWOU/./source/render/composite.ts?\n}");

/***/ },

/***/ "./source/render/shaderloader.ts"
/*!***************************************!*\
  !*** ./source/render/shaderloader.ts ***!
  \***************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ShaderLoader: () => (/* binding */ ShaderLoader)\n/* harmony export */ });\n/* harmony import */ var _shaders__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_shaders */ \"./source/render/_shaders.ts\");\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./assets */ \"./source/render/assets.ts\");\n/* harmony import */ var _shaders_reverser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shaders/reverser */ \"./source/render/shaders/reverser.ts\");\n/* harmony import */ var _shaders_normal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shaders/normal */ \"./source/render/shaders/normal.ts\");\n/* harmony import */ var _shaders_whitetransparent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./shaders/whitetransparent */ \"./source/render/shaders/whitetransparent.ts\");\n\r\n\r\n\r\n\r\n\r\n// import { glContext } from '../_type';\r\nclass ShaderLoader extends _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    shaderts;\r\n    constructor(gl, shaderts = [new _shaders_normal__WEBPACK_IMPORTED_MODULE_3__.Normal(), new _shaders_reverser__WEBPACK_IMPORTED_MODULE_2__.Reverser(), new _shaders_whitetransparent__WEBPACK_IMPORTED_MODULE_4__.WhiteTransparent()]) {\r\n        super(gl);\r\n        this.shaderts = shaderts;\r\n    }\r\n    async init() {\r\n        await this.compileAllShadersFrom(\"shaders/\");\r\n    }\r\n    async compileAllShadersFrom(folder) {\r\n        let programs = [];\r\n        await Promise.all(await _assets__WEBPACK_IMPORTED_MODULE_1__.Assets.loadAllExtInFolder(folder, [\"frag\", \"vert\"]))\r\n            .then((q) => {\r\n            q.map((val, idx, arr) => {\r\n                let name = val.split('/')[1].split('.')[0];\r\n                for (let i = idx; i < arr.length; i++) {\r\n                    if (name == arr[i].split('/')[1].split('.')[0] && !programs.includes(name)) {\r\n                        programs.push(name);\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        ;\r\n        for (let i = 0; i < programs.length; i++) {\r\n            this.shaders[programs[i]] = (() => {\r\n                let vertexShader = this.compileShader(this.gl.VERTEX_SHADER, _assets__WEBPACK_IMPORTED_MODULE_1__.Assets.getText(\"shaders/\" + programs[i] + \".vert\"));\r\n                let fragmentShader = this.compileShader(this.gl.FRAGMENT_SHADER, _assets__WEBPACK_IMPORTED_MODULE_1__.Assets.getText(\"shaders/\" + programs[i] + \".frag\"));\r\n                let program = this.createProgram(vertexShader, fragmentShader);\r\n                if (!program) {\r\n                    console.log(\"Shader creation unsuccessful:\" + this.shaders[programs[i]]);\r\n                }\r\n                for (let j = 0; j < this.shaderts.length; j++) {\r\n                    if (this.shaderts[j].name == programs[i]) {\r\n                        if (program != null) {\r\n                            this.shaderts[j].program = program;\r\n                            return this.shaderts[j];\r\n                        }\r\n                    }\r\n                }\r\n                // If unsuccessful, revert to first loaded shader\r\n                // Should return default shader, for now it is first in the list\r\n                // of loaded shaders (shaderts:Array<Shader>)\r\n                return this.shaderts[0];\r\n            })();\r\n        }\r\n        return programs;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/render/shaderloader.ts?\n}");

/***/ },

/***/ "./source/render/shaders/matrices.ts"
/*!*******************************************!*\
  !*** ./source/render/shaders/matrices.ts ***!
  \*******************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Matrix)\n/* harmony export */ });\n// Taken from www.webglfundamentals.com or something\r\nclass Matrix {\r\n    static iM = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\r\n    static ortho(x, y, z, w, h, d) {\r\n        return new Float32Array([\r\n            w, 0, 0, 0,\r\n            0, h, 0, 0,\r\n            0, 0, d, 0,\r\n            x, y, z, 1\r\n        ]);\r\n    }\r\n    static multiplyMatrices(matrixA, matrixB) {\r\n        // Slice the second matrix up into rows\r\n        let row0 = [matrixB[0], matrixB[1], matrixB[2], matrixB[3]];\r\n        let row1 = [matrixB[4], matrixB[5], matrixB[6], matrixB[7]];\r\n        let row2 = [matrixB[8], matrixB[9], matrixB[10], matrixB[11]];\r\n        let row3 = [matrixB[12], matrixB[13], matrixB[14], matrixB[15]];\r\n        // Multiply each row by matrixA\r\n        let result0 = this.multiplyMatrixAndPoint(matrixA, row0);\r\n        let result1 = this.multiplyMatrixAndPoint(matrixA, row1);\r\n        let result2 = this.multiplyMatrixAndPoint(matrixA, row2);\r\n        let result3 = this.multiplyMatrixAndPoint(matrixA, row3);\r\n        // Turn the result rows back into a single matrix\r\n        return new Float32Array([\r\n            result0[0],\r\n            result0[1],\r\n            result0[2],\r\n            result0[3],\r\n            result1[0],\r\n            result1[1],\r\n            result1[2],\r\n            result1[3],\r\n            result2[0],\r\n            result2[1],\r\n            result2[2],\r\n            result2[3],\r\n            result3[0],\r\n            result3[1],\r\n            result3[2],\r\n            result3[3]\r\n        ]);\r\n    }\r\n    static multiplyMatrixAndPoint(matrix, point) {\r\n        // Give a simple variable name to each part of the matrix, a column and row number\r\n        let c0r0 = matrix[0], c1r0 = matrix[1], c2r0 = matrix[2], c3r0 = matrix[3];\r\n        let c0r1 = matrix[4], c1r1 = matrix[5], c2r1 = matrix[6], c3r1 = matrix[7];\r\n        let c0r2 = matrix[8], c1r2 = matrix[9], c2r2 = matrix[10], c3r2 = matrix[11];\r\n        let c0r3 = matrix[12], c1r3 = matrix[13], c2r3 = matrix[14], c3r3 = matrix[15];\r\n        // Now set some simple names for the point\r\n        let x = point[0];\r\n        let y = point[1];\r\n        let z = point[2];\r\n        let w = point[3];\r\n        // Multiply the point against each part of the 1st column, then add together\r\n        let resultX = x * c0r0 + y * c0r1 + z * c0r2 + w * c0r3;\r\n        // Multiply the point against each part of the 2nd column, then add together\r\n        let resultY = x * c1r0 + y * c1r1 + z * c1r2 + w * c1r3;\r\n        // Multiply the point against each part of the 3rd column, then add together\r\n        let resultZ = x * c2r0 + y * c2r1 + z * c2r2 + w * c2r3;\r\n        // Multiply the point against each part of the 4th column, then add together\r\n        let resultW = x * c3r0 + y * c3r1 + z * c3r2 + w * c3r3;\r\n        return [resultX, resultY, resultZ, resultW];\r\n    }\r\n    static rotation(dst, radians) {\r\n        return this.multiplyMatrices(dst, [\r\n            Math.cos(radians), -Math.sin(radians), 0, 0,\r\n            Math.sin(radians), Math.cos(radians), 0, 0,\r\n            0, 0, 1, 0,\r\n            0, 0, 0, 1,\r\n        ]);\r\n    }\r\n    static normalize(dst, width, height) {\r\n        dst[0] = dst[0] / width;\r\n        dst[5] = dst[5] / height;\r\n        dst[12] = dst[12] / width;\r\n        dst[13] = dst[13] / height;\r\n        return dst;\r\n    }\r\n    static orthographic(left, right, bottom, top, near, far, dst = new Float32Array(16)) {\r\n        dst[0] = 2 / (right - left);\r\n        dst[1] = 0;\r\n        dst[2] = 0;\r\n        dst[3] = 0;\r\n        dst[4] = 0;\r\n        dst[5] = 2 / (top - bottom);\r\n        dst[6] = 0;\r\n        dst[7] = 0;\r\n        dst[8] = 0;\r\n        dst[9] = 0;\r\n        dst[10] = 2 / (near - far);\r\n        dst[11] = 0;\r\n        dst[12] = (left + right) / (left - right);\r\n        dst[13] = (bottom + top) / (bottom - top);\r\n        dst[14] = (near + far) / (near - far);\r\n        dst[15] = 1;\r\n        return dst;\r\n    }\r\n    static scale(m, sx, sy, sz, dst = new Float32Array(16)) {\r\n        dst[0] = sx * m[0 * 4 + 0];\r\n        dst[1] = sx * m[0 * 4 + 1];\r\n        dst[2] = sx * m[0 * 4 + 2];\r\n        dst[3] = sx * m[0 * 4 + 3];\r\n        dst[4] = sy * m[1 * 4 + 0];\r\n        dst[5] = sy * m[1 * 4 + 1];\r\n        dst[6] = sy * m[1 * 4 + 2];\r\n        dst[7] = sy * m[1 * 4 + 3];\r\n        dst[8] = sz * m[2 * 4 + 0];\r\n        dst[9] = sz * m[2 * 4 + 1];\r\n        dst[10] = sz * m[2 * 4 + 2];\r\n        dst[11] = sz * m[2 * 4 + 3];\r\n        if (m !== dst) {\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n        return dst;\r\n    }\r\n    static translate(m, tx, ty, tz, dst = new Float32Array(16)) {\r\n        var m00 = m[0];\r\n        var m01 = m[1];\r\n        var m02 = m[2];\r\n        var m03 = m[3];\r\n        var m10 = m[1 * 4 + 0];\r\n        var m11 = m[1 * 4 + 1];\r\n        var m12 = m[1 * 4 + 2];\r\n        var m13 = m[1 * 4 + 3];\r\n        var m20 = m[2 * 4 + 0];\r\n        var m21 = m[2 * 4 + 1];\r\n        var m22 = m[2 * 4 + 2];\r\n        var m23 = m[2 * 4 + 3];\r\n        var m30 = m[3 * 4 + 0];\r\n        var m31 = m[3 * 4 + 1];\r\n        var m32 = m[3 * 4 + 2];\r\n        var m33 = m[3 * 4 + 3];\r\n        if (m !== dst) {\r\n            dst[0] = m00;\r\n            dst[1] = m01;\r\n            dst[2] = m02;\r\n            dst[3] = m03;\r\n            dst[4] = m10;\r\n            dst[5] = m11;\r\n            dst[6] = m12;\r\n            dst[7] = m13;\r\n            dst[8] = m20;\r\n            dst[9] = m21;\r\n            dst[10] = m22;\r\n            dst[11] = m23;\r\n        }\r\n        dst[12] = m00 * tx + m10 * ty + m20 * tz + m30;\r\n        dst[13] = m01 * tx + m11 * ty + m21 * tz + m31;\r\n        dst[14] = m02 * tx + m12 * ty + m22 * tz + m32;\r\n        dst[15] = m03 * tx + m13 * ty + m23 * tz + m33;\r\n        return dst;\r\n    }\r\n    static mat4mul(lefthand, righthand) {\r\n        const result = [];\r\n        for (let row = 0; row < 4; row++) {\r\n            for (let col = 0; col < 4; col++) {\r\n                const value = lefthand[row * 4 + 0] * righthand[0 * 4 + col]\r\n                    + lefthand[row * 4 + 1] * righthand[1 * 4 + col]\r\n                    + lefthand[row * 4 + 2] * righthand[2 * 4 + col]\r\n                    + lefthand[row * 4 + 3] * righthand[3 * 4 + col];\r\n                result[row * 4 + col] = value;\r\n            }\r\n        }\r\n        return new Float32Array(result);\r\n    }\r\n    static mat4translation(point) {\r\n        return new Float32Array([\r\n            1.0, 0.0, 0.0, 0.0,\r\n            0.0, 1.0, 0.0, 0.0,\r\n            0.0, 0.0, 1.0, 0.0,\r\n            point.x, point.y, 0.0, 1.0\r\n        ]);\r\n    }\r\n    static mat4rot(radians) {\r\n        return new Float32Array([\r\n            Math.cos(radians), -Math.sin(radians), 0, 0,\r\n            Math.sin(radians), Math.cos(radians), 0, 0,\r\n            0, 0, 1, 0,\r\n            0, 0, 0, 1,\r\n        ]);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/render/shaders/matrices.ts?\n}");

/***/ },

/***/ "./source/render/shaders/normal.ts"
/*!*****************************************!*\
  !*** ./source/render/shaders/normal.ts ***!
  \*****************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Normal: () => (/* binding */ Normal)\n/* harmony export */ });\n/* harmony import */ var _template__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./template */ \"./source/render/shaders/template.ts\");\n/* harmony import */ var _matrices__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./matrices */ \"./source/render/shaders/matrices.ts\");\n\r\n\r\nclass Normal extends _template__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    program;\r\n    name = \"normal\";\r\n    matrixLocation;\r\n    textureMatrixLocation;\r\n    texture;\r\n    second = [\r\n        () => { }\r\n    ];\r\n    first = [\r\n        (ctx) => {\r\n            let gl = ctx;\r\n            // DefaultShader.gl.activeTexture(DefaultShader.gl.TEXTURE0);\r\n            let aVertexPosition = gl.getAttribLocation(this.program, \"aVertexPosition\");\r\n            gl.enableVertexAttribArray(aVertexPosition);\r\n            gl.vertexAttribPointer(aVertexPosition, 2, gl.FLOAT, false, 0, 0);\r\n            let texCoordLocation = gl.getAttribLocation(this.program, \"texcoordLocation\");\r\n            gl.enableVertexAttribArray(texCoordLocation);\r\n            gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);\r\n            this.matrixLocation = gl.getUniformLocation(this.program, \"matrixLocation\");\r\n            this.textureMatrixLocation = gl.getUniformLocation(this.program, \"textureMatrixLocation\");\r\n            // this.texture = gl.getUniformLocation(this.program, \"texture\");\r\n        },\r\n    ];\r\n    passes = [\r\n        (ctx, cmp, plane) => {\r\n            let gl = ctx;\r\n            // gl.activeTexture(gl.TEXTURE0);\r\n            // gl.bindTexture(gl.TEXTURE_2D, cmp.texture);\r\n            // gl.uniform1i(this.texture, 0);\r\n            let normalizedHeight = cmp.rprops.dstrect.h * (-2 / plane.h);\r\n            let normalizedWidth = cmp.rprops.dstrect.w * (2 / plane.w);\r\n            let positionMatrix = new Float32Array([normalizedWidth, 0, 0, 0,\r\n                0, normalizedHeight, 0, 0,\r\n                0, 0, 1, 0,\r\n                0, 0, 0, 1]);\r\n            let scaleoffset = { x: 0, y: 0 };\r\n            if (cmp.rprops.scalecenter != undefined) {\r\n                scaleoffset = { x: cmp.rprops.scalecenter.x * (2 / plane.w),\r\n                    y: cmp.rprops.scalecenter.y * (-2 / plane.h) };\r\n            }\r\n            scaleoffset = { x: (0 - scaleoffset.x) * cmp.rprops.scale.x + scaleoffset.x,\r\n                y: normalizedHeight - (normalizedHeight - scaleoffset.y) * cmp.rprops.scale.y - scaleoffset.y };\r\n            positionMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4mul(positionMatrix, _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4translation({ x: scaleoffset.x, y: scaleoffset.y }));\r\n            positionMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].scale(positionMatrix, cmp.rprops.scale.x, cmp.rprops.scale.y, 1);\r\n            let rotcenter = { x: 0, y: 0 };\r\n            if (cmp.rprops.rotcenter != undefined) {\r\n                rotcenter = { x: cmp.rprops.rotcenter.x * (2 / plane.w), y: ((cmp.rprops.dstrect.h - cmp.rprops.rotcenter.y)) * (-2 / plane.h) };\r\n            }\r\n            positionMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4mul(positionMatrix, _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4translation({ x: -rotcenter.x, y: -rotcenter.y }));\r\n            positionMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4mul(positionMatrix, _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4rot(cmp.rprops.angle));\r\n            positionMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4mul(positionMatrix, _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4translation({ x: rotcenter.x, y: rotcenter.y }));\r\n            positionMatrix[12] += cmp.rprops.dstrect.x * (2 / plane.w) - 1;\r\n            positionMatrix[13] += -((plane.h - cmp.rprops.dstrect.y - cmp.rprops.dstrect.h) * (2 / plane.h)) + 1;\r\n            gl.uniformMatrix4fv(this.matrixLocation, false, positionMatrix);\r\n            if (this.textureMatrixLocation != null) {\r\n                let texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].orthographic(-1, 1, -1, 1, -1, 1);\r\n                texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].translate(texMatrix, 0, 1, 0);\r\n                if (cmp.rprops.flip.flipx && cmp.rprops.flip.flipy) {\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].orthographic(1, -1, 1, -1, -1, 1);\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].translate(texMatrix, -1, 0, 0);\r\n                }\r\n                else if (cmp.rprops.flip.flipx) {\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].orthographic(1, -1, -1, 1, -1, 1);\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].translate(texMatrix, -1, 1, 0);\r\n                }\r\n                else if (cmp.rprops.flip.flipy) {\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].orthographic(-1, 1, 1, -1, -1, 1);\r\n                    // texMatrix = Matrix.translate(texMatrix,0,0,0);\r\n                }\r\n                gl.uniformMatrix4fv(this.textureMatrixLocation, false, texMatrix);\r\n            }\r\n        }\r\n    ];\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/render/shaders/normal.ts?\n}");

/***/ },

/***/ "./source/render/shaders/reverser.ts"
/*!*******************************************!*\
  !*** ./source/render/shaders/reverser.ts ***!
  \*******************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Reverser: () => (/* binding */ Reverser)\n/* harmony export */ });\n/* harmony import */ var _template__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./template */ \"./source/render/shaders/template.ts\");\n/* harmony import */ var _matrices__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./matrices */ \"./source/render/shaders/matrices.ts\");\n\r\n\r\nclass Reverser extends _template__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    program;\r\n    name = \"reverser\";\r\n    matrixLocation;\r\n    textureMatrixLocation;\r\n    texture;\r\n    second = [\r\n        () => { }\r\n    ];\r\n    first = [\r\n        (ctx) => {\r\n            let gl = ctx; // DefaultShader.gl.activeTexture(DefaultShader.gl.TEXTURE0);\r\n            let aVertexPosition = gl.getAttribLocation(this.program, \"aVertexPosition\");\r\n            gl.enableVertexAttribArray(aVertexPosition);\r\n            gl.vertexAttribPointer(aVertexPosition, 2, gl.FLOAT, false, 0, 0);\r\n            let texCoordLocation = gl.getAttribLocation(this.program, \"texcoordLocation\");\r\n            gl.enableVertexAttribArray(texCoordLocation);\r\n            gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);\r\n            this.matrixLocation = gl.getUniformLocation(this.program, \"matrixLocation\");\r\n            this.textureMatrixLocation = gl.getUniformLocation(this.program, \"textureMatrixLocation\");\r\n            this.texture = gl.getUniformLocation(this.program, \"texture\");\r\n        },\r\n    ];\r\n    passes = [\r\n        (ctx, cmp, plane) => {\r\n            let gl = ctx;\r\n            // gl.activeTexture(gl.TEXTURE0);\r\n            // gl.bindTexture(gl.TEXTURE_2D, cmp.texture);\r\n            // gl.uniform1i(this.texture, 0);\r\n            // let matrix = Matrix.orthographic(-1, 1, 1, -1, -1,1);\r\n            // matrix = Matrix.scale(matrix,cmp.rprops.dstrect.w,cmp.rprops.dstrect.h,1);\r\n            // matrix = Matrix.translate(matrix,cmp.rprops.dstrect.x,cmp.rprops.dstrect.y,1);\r\n            let funtimes = new Float32Array([cmp.rprops.dstrect.w, 0, 0, 0,\r\n                0, cmp.rprops.dstrect.h, 0, 0,\r\n                0, 0, 1, 0,\r\n                cmp.rprops.dstrect.x, cmp.rprops.dstrect.y, 0, 1]);\r\n            funtimes[0] *= 2 / plane.w;\r\n            funtimes[5] *= -2 / plane.h;\r\n            funtimes[12] = (funtimes[12] * (2 / plane.w)) - 1;\r\n            funtimes[13] = -(funtimes[13] * (2 / plane.h)) + 1;\r\n            // console.log(\"FDS)\")\r\n            gl.uniformMatrix4fv(this.matrixLocation, false, funtimes);\r\n            if (this.textureMatrixLocation != null) {\r\n                // let texMatrix = new Float32Array(\r\n                //   [cmp.rprops.srcrect.w,0,0,0,\r\n                //     0,cmp.rprops.srcrect.h,0,0,\r\n                //     0,0,1,0,\r\n                //     cmp.rprops.srcrect.x, cmp.rprops.srcrect.y,0,1]\r\n                // )\r\n                // texMatrix[0]  *=  2/cmp.rprops.dstrect.w;\r\n                // texMatrix[5]  *= -2/cmp.rprops.dstrect.h;\r\n                // texMatrix[12]  =  (texMatrix[12]*(2/cmp.rprops.dstrect.w))-1;\r\n                // texMatrix[13]  = -(texMatrix[13]*(2/cmp.rprops.dstrect.h))+1;\r\n                let texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].orthographic(-1, 1, 1, -1, -1, 1);\r\n                gl.uniformMatrix4fv(this.textureMatrixLocation, false, texMatrix);\r\n            }\r\n        }\r\n    ];\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/render/shaders/reverser.ts?\n}");

/***/ },

/***/ "./source/render/shaders/template.ts"
/*!*******************************************!*\
  !*** ./source/render/shaders/template.ts ***!
  \*******************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Template)\n/* harmony export */ });\nclass Template {\r\n    constructor() {\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/render/shaders/template.ts?\n}");

/***/ },

/***/ "./source/render/shaders/whitetransparent.ts"
/*!***************************************************!*\
  !*** ./source/render/shaders/whitetransparent.ts ***!
  \***************************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WhiteTransparent: () => (/* binding */ WhiteTransparent)\n/* harmony export */ });\n/* harmony import */ var _matrices__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./matrices */ \"./source/render/shaders/matrices.ts\");\n/* harmony import */ var _template__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./template */ \"./source/render/shaders/template.ts\");\n\r\n\r\nclass WhiteTransparent extends _template__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\r\n    program;\r\n    name = \"whitetransparent\";\r\n    matrixLocation;\r\n    textureMatrixLocation;\r\n    texture;\r\n    second = [\r\n        () => { }\r\n    ];\r\n    first = [\r\n        (ctx) => {\r\n            let gl = ctx;\r\n            // DefaultShader.gl.activeTexture(DefaultShader.gl.TEXTURE0);\r\n            let aVertexPosition = gl.getAttribLocation(this.program, \"aVertexPosition\");\r\n            gl.enableVertexAttribArray(aVertexPosition);\r\n            gl.vertexAttribPointer(aVertexPosition, 2, gl.FLOAT, false, 0, 0);\r\n            let texCoordLocation = gl.getAttribLocation(this.program, \"texcoordLocation\");\r\n            gl.enableVertexAttribArray(texCoordLocation);\r\n            gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);\r\n            this.matrixLocation = gl.getUniformLocation(this.program, \"matrixLocation\");\r\n            this.textureMatrixLocation = gl.getUniformLocation(this.program, \"textureMatrixLocation\");\r\n            // this.texture = gl.getUniformLocation(this.program, \"texture\");\r\n        },\r\n    ];\r\n    passes = [\r\n        (ctx, cmp, plane) => {\r\n            let gl = ctx;\r\n            // gl.activeTexture(gl.TEXTURE0);\r\n            // gl.bindTexture(gl.TEXTURE_2D, cmp.texture);\r\n            // gl.uniform1i(this.texture, 0);\r\n            // let matrix = Matrix.orthographic(-1, 1, 1, -1, -1,1);\r\n            // matrix = Matrix.scale(matrix,cmp.rprops.dstrect.w,cmp.rprops.dstrect.h,1);\r\n            // matrix = Matrix.translate(matrix,cmp.rprops.dstrect.x,cmp.rprops.dstrect.y,1);\r\n            let funtimes = new Float32Array([cmp.rprops.dstrect.w, 0, 0, 0,\r\n                0, cmp.rprops.dstrect.h, 0, 0,\r\n                0, 0, 1, 0,\r\n                cmp.rprops.dstrect.x, plane.h - cmp.rprops.dstrect.y - cmp.rprops.dstrect.h, 0, 1]);\r\n            // if(cmp.rprops.scalex != 1){\r\n            //   funtimes[0]  *= cmp.rprops.scalex;\r\n            //   funtimes[12] += cmp.rprops.dstrect.w - ((cmp.rprops.dstrect.w * cmp.rprops.scalex) / 2);\r\n            // }\r\n            // if(cmp.rprops.scaley != 1){\r\n            //   funtimes[4]  *= cmp.rprops.scaley;\r\n            //   funtimes[13] += cmp.rprops.scaley;\r\n            // }\r\n            if (cmp.rprops.angle != 0) {\r\n                // TODO: rotate around a point\r\n                let twomat = [];\r\n                twomat[0] = (Math.cos(-cmp.rprops.angle) * funtimes[0]);\r\n                twomat[1] = (-Math.sin(-cmp.rprops.angle) * funtimes[0]);\r\n                twomat[3] = (Math.sin(-cmp.rprops.angle) * funtimes[5]);\r\n                twomat[4] = (Math.cos(-cmp.rprops.angle) * funtimes[5]);\r\n                funtimes[0] = twomat[0];\r\n                funtimes[1] = twomat[1];\r\n                funtimes[4] = twomat[3];\r\n                funtimes[5] = twomat[4];\r\n            }\r\n            // Math.cos(radians),-Math.sin(radians)\r\n            // Math.sin(radians), Math.cos(radians)\r\n            funtimes[0] *= 2 / plane.w;\r\n            funtimes[1] *= 2 / plane.w;\r\n            // funtimes[3]  *=  (funtimes[3] * (2/plane.w));\r\n            funtimes[4] *= -2 / plane.h;\r\n            funtimes[5] *= -2 / plane.h;\r\n            funtimes[12] = (funtimes[12] * (2 / plane.w)) - 1;\r\n            funtimes[13] = -(funtimes[13] * (2 / plane.h)) + 1;\r\n            // funtimes = Matrix.translate()\r\n            // funtimes[12]  -= (2*cmp.rprops.rotcenter.x)/plane.w;\r\n            // funtimes[13]  -= (2*cmp.rprops.rotcenter.y)/plane.h;\r\n            // funtimes = Matrix.rotation(funtimes,cmp.rprops.angle);\r\n            // funtimes[12]  += (2*cmp.rprops.rotcenter.x)/plane.w;\r\n            // funtimes[13]  += (2*cmp.rprops.rotcenter.y)/plane.h;\r\n            gl.uniformMatrix4fv(this.matrixLocation, false, funtimes);\r\n            // console.log(\"FDS)\")\r\n            if (this.textureMatrixLocation != null) {\r\n                // let texMatrix = new Float32Array(\r\n                //   [cmp.rprops.srcrect.w,0,0,0,\r\n                //     0,cmp.rprops.srcrect.h,0,0,\r\n                //     0,0,1,0,\r\n                //     cmp.rprops.srcrect.x, cmp.rprops.srcrect.y,0,1]\r\n                // )\r\n                // texMatrix[0]  *=  2/cmp.rprops.dstrect.w;\r\n                // texMatrix[5]  *= -2/cmp.rprops.dstrect.h;\r\n                // texMatrix[12]  =  (texMatrix[12]*(2/cmp.rprops.dstrect.w))-1;\r\n                // texMatrix[13]  = -(texMatrix[13]*(2/cmp.rprops.dstrect.h))+1;\r\n                let texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_0__[\"default\"].orthographic(-1, 1, -1, 1, -1, 1);\r\n                texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_0__[\"default\"].translate(texMatrix, 0, 1, 0);\r\n                if (cmp.rprops.flip.flipx && cmp.rprops.flip.flipy) {\r\n                }\r\n                else if (cmp.rprops.flip.flipx) {\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_0__[\"default\"].orthographic(1, -1, -1, 1, -1, 1);\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_0__[\"default\"].translate(texMatrix, -1, 1, 0);\r\n                }\r\n                else if (cmp.rprops.flip.flipy) {\r\n                }\r\n                // console.log(\"FDS)\")\r\n                // let texMatrix = Matrix.orthographic(-1, 1, -1,1,  -1,1);\r\n                gl.uniformMatrix4fv(this.textureMatrixLocation, false, texMatrix);\r\n            }\r\n        }\r\n    ];\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/render/shaders/whitetransparent.ts?\n}");

/***/ },

/***/ "./source/render/textures.ts"
/*!***********************************!*\
  !*** ./source/render/textures.ts ***!
  \***********************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Textures)\n/* harmony export */ });\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_render */ \"./source/render/_render.ts\");\n\r\nclass Textures extends _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info {\r\n    static createTexture(glContext, img) {\r\n        // console.log(Render.Info.contextPool[contextID].gl);\r\n        let gl = glContext.gl;\r\n        let tex = Textures.createTexToBlitOn(glContext, img.width, img.height);\r\n        gl.bindTexture(gl.TEXTURE_2D, tex);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\r\n        return tex;\r\n    }\r\n    static createSprite(glContext, file, from, bounds) {\r\n        let gl = glContext.gl;\r\n        const framebuffer = gl.createFramebuffer();\r\n        let spr = Textures.createTexToBlitOn(glContext, bounds.w, bounds.h);\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\r\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, from, 0);\r\n        gl.bindTexture(gl.TEXTURE_2D, spr);\r\n        gl.copyTexSubImage2D(gl.TEXTURE_2D, 0, 0, 0, bounds.x, bounds.y, bounds.w, bounds.h);\r\n        gl.deleteFramebuffer(framebuffer);\r\n        return spr;\r\n    }\r\n    static createTexToBlitOn(glContext, width, height) {\r\n        let gl = glContext.gl;\r\n        const targetTexture = gl.createTexture();\r\n        // let arr = new Uint8Array(width*height*4).fill(0);\r\n        gl.bindTexture(gl.TEXTURE_2D, targetTexture);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, \r\n        // Textures.nextPowerOfTwo(width), Textures.nextPowerOfTwo(height),\r\n        // 1024,1024,\r\n        0, gl.RGBA, gl.UNSIGNED_BYTE, null);\r\n        // arr)\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n        return targetTexture;\r\n    }\r\n    static nextPowerOfTwo(n) {\r\n        if (n == 2 || n == 4 || n == 8 || n == 16 || n == 32 || n == 64 || n == 128 || n == 256 || n == 512 || n == 1024 || n == 2048 /*||n==4096 */)\r\n            return n;\r\n        if (n > 2048)\r\n            return 2048;\r\n        if (n <= 0)\r\n            return 1; // Handle edge case for non-positive numbers\r\n        n--;\r\n        n |= n >> 1;\r\n        n |= n >> 2;\r\n        n |= n >> 4;\r\n        n |= n >> 8;\r\n        n |= n >> 16;\r\n        return n + 1;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/render/textures.ts?\n}");

/***/ },

/***/ "./source/systems/_system.ts"
/*!***********************************!*\
  !*** ./source/systems/_system.ts ***!
  \***********************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   System: () => (/* binding */ System)\n/* harmony export */ });\nclass System {\r\n    // private pool: Array<System> = [];\r\n    constructor(priority = false) {\r\n        // if(priority) System.pool.unshift(this);\r\n        // else System.pool.push(this);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/systems/_system.ts?\n}");

/***/ },

/***/ "./source/systems/camera.ts"
/*!**********************************!*\
  !*** ./source/systems/camera.ts ***!
  \**********************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Camera)\n/* harmony export */ });\n/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_system */ \"./source/systems/_system.ts\");\n/* harmony import */ var _cameraman__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cameraman */ \"./source/systems/cameraman.ts\");\n\r\n\r\nclass Camera extends _system__WEBPACK_IMPORTED_MODULE_0__.System {\r\n    viewport;\r\n    bounds;\r\n    // public actor     : Bodies.Embodiment;\r\n    scale = { x: 1, y: 1 };\r\n    cameraman;\r\n    constructor(/* actor: Bodies.Embodiment,  */ size, bounds) {\r\n        super();\r\n        // this.actor = actor;\r\n        this.viewport = { x: 0, y: 0, w: size.w, h: size.h };\r\n        this.bounds = bounds;\r\n        this.cameraman = new _cameraman__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this);\r\n    }\r\n    refresh() {\r\n        // this.viewport.w  = Math.floor(this.viewport.w / this.scale.x);;\r\n        // Render.Info.gl.canvas.height = Math.floor(this.viewport.h / this.scale.y);\r\n        this.viewport.x =\r\n            this.cameraman.actor.pos.x - this.viewport.w / 2 + this.cameraman.actor.hitbox.w / 2 + this.cameraman.actor.hitbox.x > this.bounds.x\r\n                ? (this.cameraman.actor.pos.x + this.viewport.w / 2 + this.cameraman.actor.hitbox.w / 2 + this.cameraman.actor.hitbox.x > this.bounds.w\r\n                    ? this.bounds.w - this.viewport.w\r\n                    : Math.floor(this.cameraman.actor.pos.x - this.viewport.w / 2 + this.cameraman.actor.hitbox.w / 2 + this.cameraman.actor.hitbox.x))\r\n                : this.bounds.x;\r\n        this.viewport.y =\r\n            this.cameraman.actor.pos.y - this.viewport.h / 2 + this.cameraman.actor.hitbox.h / 2 + this.cameraman.actor.hitbox.y > this.bounds.y\r\n                ? (this.cameraman.actor.pos.y + this.viewport.h / 2 + this.cameraman.actor.hitbox.h / 2 + this.cameraman.actor.hitbox.y > this.bounds.h\r\n                    ? this.bounds.h - this.viewport.h\r\n                    : Math.floor(this.cameraman.actor.pos.y - this.viewport.h / 2 + this.cameraman.actor.hitbox.h / 2 + this.cameraman.actor.hitbox.y))\r\n                : this.bounds.y;\r\n    }\r\n    setbounds(bounds) {\r\n        this.bounds = bounds;\r\n    }\r\n    // old and may not work\r\n    worldtoscreen(actor) {\r\n        return { x: actor.pos.x - this.viewport.x, y: actor.pos.y - this.viewport.y };\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/systems/camera.ts?\n}");

/***/ },

/***/ "./source/systems/cameraman.ts"
/*!*************************************!*\
  !*** ./source/systems/cameraman.ts ***!
  \*************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Cameraman)\n/* harmony export */ });\n/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_system */ \"./source/systems/_system.ts\");\n/* harmony import */ var _alacrity_bodies__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../alacrity/_bodies */ \"./source/alacrity/_bodies.ts\");\n/* harmony import */ var _alacrity_time__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../alacrity/time */ \"./source/alacrity/time.ts\");\n\r\n\r\n\r\nvar Actions;\r\n(function (Actions) {\r\n    Actions[Actions[\"idle\"] = 0] = \"idle\";\r\n    Actions[Actions[\"pan\"] = 1] = \"pan\";\r\n    Actions[Actions[\"zoom\"] = 2] = \"zoom\";\r\n})(Actions || (Actions = {}));\r\nclass Cameraman extends _system__WEBPACK_IMPORTED_MODULE_0__.System {\r\n    action = Actions.idle;\r\n    actor;\r\n    freemovement;\r\n    callback = () => { };\r\n    camera;\r\n    pan = []; //from, distance\r\n    zoom = []; //from, distance\r\n    constructor(camera) {\r\n        super(true);\r\n        this.freemovement = new _alacrity_bodies__WEBPACK_IMPORTED_MODULE_1__.Bodies.Existence( /*\r\n          new Composite.Frame([new Composite.Snap([\r\n          new Composite.Image(\"_assets/blocking.png\", {x:0,y:0,w:1,h:1}, {x:0,y:0,w:1,h:1})])]) */);\r\n        // this.freemovement.myFrame.rprops.hidden = true;\r\n        this.camera = camera;\r\n    }\r\n    refresh() {\r\n        if (this.action == Actions.idle)\r\n            return;\r\n        if (this.action == Actions.pan) {\r\n            while (this.actor.triggers.length > 0) {\r\n                let trig = this.actor.triggers.pop() || { name: '' };\r\n                if (trig.name == 'pan') {\r\n                    if (trig.state == 'active') {\r\n                        this.actor.pos.x = this.pan[0].x + ((this.actor.timeouts[0].getTimeoutTicks() / this.actor.timeouts[0].ms[0]) * this.pan[1].x);\r\n                        this.actor.pos.y = this.pan[0].y + ((this.actor.timeouts[0].getTimeoutTicks() / this.actor.timeouts[0].ms[0]) * this.pan[1].y);\r\n                        console.log(this.actor.pos);\r\n                    }\r\n                    if (trig.state == 'triggered') {\r\n                        this.actor.timeouts = [];\r\n                        this.action = Actions.idle;\r\n                        this.callback();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this.action == Actions.zoom) {\r\n            while (this.actor.triggers.length > 0) {\r\n                let trig = this.actor.triggers.pop() || { name: '' };\r\n                if (trig.name == 'zoom') {\r\n                    if (trig.state == 'active') {\r\n                        this.actor.pos.x = this.pan[0].x + ((this.actor.timeouts[0].getTimeoutTicks() / this.actor.timeouts[0].ms[0]) * this.pan[1].x);\r\n                        this.actor.pos.y = this.pan[0].y + ((this.actor.timeouts[0].getTimeoutTicks() / this.actor.timeouts[0].ms[0]) * this.pan[1].y);\r\n                        this.camera.scale.x = this.zoom[0].x + ((this.actor.timeouts[0].getTimeoutTicks() / this.actor.timeouts[0].ms[0]) * this.zoom[1].x);\r\n                        this.camera.scale.y = this.zoom[0].y + ((this.actor.timeouts[0].getTimeoutTicks() / this.actor.timeouts[0].ms[0]) * this.zoom[1].y);\r\n                    }\r\n                    if (trig.state == 'triggered') {\r\n                        this.actor.timeouts = [];\r\n                        this.action = Actions.idle;\r\n                        this.callback();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    panCamera(from, to, duration, callback = () => { }) {\r\n        this.actor = this.freemovement;\r\n        this.actor.pos.x = from.x;\r\n        this.actor.pos.y = from.y;\r\n        this.actor.timeouts = [new _alacrity_time__WEBPACK_IMPORTED_MODULE_2__.Time.Timeout([duration], 'pan')];\r\n        this.pan[0] = from;\r\n        this.pan[1] = { x: to.x - from.x, y: to.y - from.y };\r\n        this.action = Actions.pan;\r\n        this.callback = callback;\r\n    }\r\n    zoomCamera(from, to, zoom, duration, callback = () => { }) {\r\n        this.actor = this.freemovement;\r\n        this.actor.pos.x = from.x;\r\n        this.actor.pos.y = from.y;\r\n        this.actor.timeouts = [new _alacrity_time__WEBPACK_IMPORTED_MODULE_2__.Time.Timeout([duration], 'zoom')];\r\n        this.pan[0] = from;\r\n        this.pan[1] = { x: to.x - from.x, y: to.y - from.y };\r\n        this.zoom[0] = { x: this.camera.scale.x, y: this.camera.scale.y };\r\n        this.zoom[1] = { x: zoom.x - this.camera.scale.x, y: zoom.y - this.camera.scale.y };\r\n        this.action = Actions.zoom;\r\n        this.callback = callback;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/systems/cameraman.ts?\n}");

/***/ },

/***/ "./source/systems/keyboard.ts"
/*!************************************!*\
  !*** ./source/systems/keyboard.ts ***!
  \************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Keyboard: () => (/* binding */ Keyboard)\n/* harmony export */ });\n// import System from \"./_system\"\r\nclass Keyboard {\r\n    // private static keyboardpool : Array<Keyboard> = [];\r\n    static init = false;\r\n    static keys = {};\r\n    // protected abstract update();\r\n    // protected controlled : NPC;\r\n    constructor() {\r\n        // Keyboard.keyboardpool.push(this)\r\n        // this.mKeyboard = this;\r\n        if (!Keyboard.init) {\r\n            document.addEventListener(\"keydown\", (event) => {\r\n                if (!event.repeat)\r\n                    Keyboard.keys[event.key] = 1;\r\n            });\r\n            document.addEventListener(\"keyup\", (event) => {\r\n                Keyboard.keys[event.key] = -1;\r\n            });\r\n        }\r\n        Keyboard.init = true;\r\n    }\r\n    static refresh() {\r\n        for (let k in Keyboard.keys) {\r\n            Keyboard.keys[k] = Keyboard.keys[k] < 0 ?\r\n                0 : Keyboard.keys[k] > 0 ? 2 : 0;\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/systems/keyboard.ts?\n}");

/***/ },

/***/ "./source/systems/physics.ts"
/*!***********************************!*\
  !*** ./source/systems/physics.ts ***!
  \***********************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Physics: () => (/* binding */ Physics)\n/* harmony export */ });\n/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_system */ \"./source/systems/_system.ts\");\n/* harmony import */ var _physics_states__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../physics/states */ \"./source/physics/states.ts\");\n\r\n\r\nclass Physics extends _system__WEBPACK_IMPORTED_MODULE_0__.System {\r\n    static physicspool = [];\r\n    collisionpool = [];\r\n    // private affectedpool : Array<Bodies.Mobility>  = [];\r\n    constructor() {\r\n        super();\r\n        Physics.physicspool.push(this);\r\n    }\r\n    refresh() {\r\n        for (let phys of Physics.physicspool) {\r\n            phys.collisionpool = phys.collisionpool.filter((a) => (!a.deleteMe));\r\n            let all = phys.collisionpool.filter((a) => (a.self != null) || a.self == null);\r\n            for (let item of all) {\r\n                if (item.self)\r\n                    item.self.activeeffects = [_physics_states__WEBPACK_IMPORTED_MODULE_1__.CollideTypes.none, _physics_states__WEBPACK_IMPORTED_MODULE_1__.CollideTypes.none, _physics_states__WEBPACK_IMPORTED_MODULE_1__.CollideTypes.none, _physics_states__WEBPACK_IMPORTED_MODULE_1__.CollideTypes.none];\r\n            }\r\n            all.forEach((element) => {\r\n                let totest = new Set(all.filter((a) => ((element.cwith) && a.self)).map((a) => a.self));\r\n                if (element.self)\r\n                    totest.delete(element.self);\r\n                // if(element.self?.dbgName === \"scorpion\") {console.log(dupes); console.log(element);}\r\n                element.update(totest);\r\n            });\r\n        }\r\n    }\r\n    addCollisionTo(self, collision) {\r\n        // collision.offX     = bounds.x;\r\n        // collision.offY     = bounds.y;\r\n        // collision.width    = bounds.w;\r\n        // collision.height   = bounds.h;\r\n        // if(self?.dbgName == \"scorpion\"){\r\n        //   console.log(self?.dbgName);\r\n        //   console.log(bounds.y * this.zoom);\r\n        //   console.log({x:collision.offX, y: collision.offY, w:collision.width, h:collision.height})\r\n        // }\r\n        this.collisionpool.push(collision);\r\n        if (self != null) {\r\n            self.collisions.push(collision);\r\n            collision.self = self;\r\n        }\r\n        return collision;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/systems/physics.ts?\n}");

/***/ },

/***/ "./source/systems/window.ts"
/*!**********************************!*\
  !*** ./source/systems/window.ts ***!
  \**********************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Window: () => (/* binding */ Window)\n/* harmony export */ });\nclass Window {\r\n    source;\r\n    target;\r\n    frm;\r\n    static windows = [];\r\n    /**\r\n     * source : Render.GLContext\r\n     * target : HTMLCanvasElement (2D canvas or same as source)\r\n     */\r\n    constructor(source, target = null) {\r\n        this.source = source;\r\n        this.target = target;\r\n        // target.addEventListener('mousedown',()=>{\r\n        //   console.log(\"bob\");\r\n        // })\r\n        // target.onclick((e)=>console.log(\"BOB\"));\r\n        Window.windows.push(this);\r\n    }\r\n    static refresh() {\r\n        Window.windows.forEach((w) => w.update());\r\n    }\r\n    update() {\r\n        this.frm.compose();\r\n        if (this.target != null) {\r\n        }\r\n        else {\r\n            var gl = this.source.gl;\r\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n            // gl.viewport(windwx, windowy, windowwidht, windowheight);\r\n            gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n            // gl.clearColor(0, 0.5, 0, 1);\r\n            gl.clear(gl.COLOR_BUFFER_BIT);\r\n            // console.log(\"C\");\r\n            gl.bindTexture(gl.TEXTURE_2D, this.frm.texture);\r\n            this.frm.shadercontext.passShader(this.frm, { w: gl.canvas.width, h: gl.canvas.height });\r\n            gl.drawArrays(gl.TRIANGLES, 0, 6);\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://TEWOU/./source/systems/window.ts?\n}");

/***/ }

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Check if module exists (development only)
/******/ 		if (__webpack_modules__[moduleId] === undefined) {
/******/ 			var e = new Error("Cannot find module '" + moduleId + "'");
/******/ 			e.code = 'MODULE_NOT_FOUND';
/******/ 			throw e;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./source/api.ts");
/******/ 	window.TEWOU = __webpack_exports__;
/******/ 	
/******/ })()
;