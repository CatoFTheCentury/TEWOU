/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/engine/alacrity/_bodies.ts":
/*!****************************************!*\
  !*** ./src/engine/alacrity/_bodies.ts ***!
  \****************************************/
/***/ (() => {

eval("{throw new Error(\"Module build failed (from ./node_modules/ts-loader/index.js):\\nError: ENOENT: no such file or directory, open 'D:\\\\Dev\\\\__ProjetTEWOU__\\\\src\\\\src\\\\engine\\\\alacrity\\\\_bodies.ts'\");\n\n//# sourceURL=webpack:///./src/engine/alacrity/_bodies.ts?\n}");

/***/ }),

/***/ "./src/engine/alacrity/_incarnations.ts":
/*!**********************************************!*\
  !*** ./src/engine/alacrity/_incarnations.ts ***!
  \**********************************************/
/***/ (() => {

eval("{throw new Error(\"Module build failed (from ./node_modules/ts-loader/index.js):\\nError: ENOENT: no such file or directory, open 'D:\\\\Dev\\\\__ProjetTEWOU__\\\\src\\\\src\\\\engine\\\\alacrity\\\\_incarnations.ts'\");\n\n//# sourceURL=webpack:///./src/engine/alacrity/_incarnations.ts?\n}");

/***/ }),

/***/ "./src/engine/alacrity/time.ts":
/*!*************************************!*\
  !*** ./src/engine/alacrity/time.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Time: () => (/* binding */ Time)\n/* harmony export */ });\nvar Time;\r\n(function (Time) {\r\n    class Watch {\r\n        static lastTick = 0;\r\n        static currTick = 0;\r\n    }\r\n    class Delta {\r\n        static firstTick = 0;\r\n        static delta = 16;\r\n        static refresh() {\r\n            Watch.currTick = Date.now();\r\n            Delta.delta = Math.min(Watch.currTick - Watch.lastTick, 100);\r\n            Watch.lastTick = Watch.currTick;\r\n        }\r\n        static getTick() {\r\n            return Watch.currTick;\r\n        }\r\n    }\r\n    Time.Delta = Delta;\r\n    class Timeout {\r\n        ms;\r\n        step = 0;\r\n        end;\r\n        start;\r\n        cyclic = false;\r\n        deletion = false;\r\n        paused = false;\r\n        pauseTime = 0;\r\n        static allPaused = false;\r\n        static pausedAtPause = new Set();\r\n        static pool = new Set();\r\n        trigName;\r\n        constructor(ms, triggerName, cyclic = false) {\r\n            this.ms = ms;\r\n            this.trigName = triggerName;\r\n            this.cyclic = cyclic;\r\n            this.start = Watch.currTick;\r\n            if (ms[0] === Infinity)\r\n                this.end = Infinity;\r\n            else\r\n                this.end = Watch.currTick + ms[0];\r\n            Timeout.pool.add(this);\r\n            if (Timeout.allPaused)\r\n                this.pause();\r\n        }\r\n        reset() {\r\n            this.start = Watch.currTick;\r\n            if (this.ms[this.step] === Infinity)\r\n                this.end = Infinity;\r\n            else\r\n                this.end = Watch.currTick + this.ms[this.step];\r\n        }\r\n        restart() {\r\n            this.paused = false;\r\n            this.step = 0;\r\n            this.reset();\r\n        }\r\n        static pauseAll() {\r\n            if (Timeout.allPaused)\r\n                return;\r\n            for (let t of Timeout.pool) {\r\n                if (t.paused)\r\n                    Timeout.pausedAtPause.add(t);\r\n                else\r\n                    t.pause();\r\n            }\r\n            Timeout.allPaused = true;\r\n        }\r\n        static resumeAll() {\r\n            if (!Timeout.allPaused)\r\n                return;\r\n            let unpause = new Set(Timeout.pool);\r\n            for (let t of Timeout.pausedAtPause) {\r\n                unpause.delete(t);\r\n            }\r\n            for (let t of unpause) {\r\n                t.resume();\r\n            }\r\n            Timeout.pausedAtPause.clear();\r\n            Timeout.allPaused = false;\r\n        }\r\n        pause() {\r\n            this.pauseTime = Watch.currTick;\r\n            this.paused = true;\r\n        }\r\n        resume() {\r\n            this.start += Watch.currTick - this.pauseTime;\r\n            if (this.end === Infinity) { }\r\n            else\r\n                this.end += Watch.currTick - this.pauseTime;\r\n            this.pauseTime = 0;\r\n            this.paused = false;\r\n        }\r\n        getTimeoutTicks() {\r\n            return (this.paused ? this.pauseTime : Watch.currTick) - this.start;\r\n        }\r\n        test() {\r\n            if (!this.paused) {\r\n                if (this.end <= Watch.currTick) {\r\n                    if (this.cyclic)\r\n                        this.step++;\r\n                    if (this.step >= this.ms.length) {\r\n                        this.step = 0;\r\n                    }\r\n                    this.start = Watch.currTick;\r\n                    if (this.end !== Infinity)\r\n                        this.end = Watch.currTick + this.ms[this.step];\r\n                    return { name: this.trigName, state: \"triggered\" };\r\n                }\r\n                else\r\n                    return { name: this.trigName, state: \"active\" };\r\n            }\r\n            else {\r\n                if (this.end === Infinity) { }\r\n                else\r\n                    this.end += Delta.delta;\r\n                return { name: this.trigName, state: \"paused\" };\r\n            }\r\n        }\r\n    }\r\n    Time.Timeout = Timeout;\r\n})(Time || (Time = {}));\r\n\n\n//# sourceURL=webpack:///./src/engine/alacrity/time.ts?\n}");

/***/ }),

/***/ "./src/engine/api.ts":
/*!***************************!*\
  !*** ./src/engine/api.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BAWDS: () => (/* reexport safe */ _alacrity_bodies__WEBPACK_IMPORTED_MODULE_0__.Bodies),\n/* harmony export */   Time: () => (/* reexport safe */ _alacrity_time__WEBPACK_IMPORTED_MODULE_1__.Time)\n/* harmony export */ });\n/* harmony import */ var _alacrity_bodies__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./alacrity/_bodies */ \"./src/engine/alacrity/_bodies.ts\");\n/* harmony import */ var _alacrity_time__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./alacrity/time */ \"./src/engine/alacrity/time.ts\");\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./src/engine/api.ts?\n}");

/***/ }),

/***/ "./src/engine/parsers/ganiParser.ts":
/*!******************************************!*\
  !*** ./src/engine/parsers/ganiParser.ts ***!
  \******************************************/
/***/ (() => {

eval("{throw new Error(\"Module build failed (from ./node_modules/ts-loader/index.js):\\nError: ENOENT: no such file or directory, open 'D:\\\\Dev\\\\__ProjetTEWOU__\\\\src\\\\src\\\\engine\\\\parsers\\\\ganiParser.ts'\");\n\n//# sourceURL=webpack:///./src/engine/parsers/ganiParser.ts?\n}");

/***/ }),

/***/ "./src/engine/parsers/iniparser.ts":
/*!*****************************************!*\
  !*** ./src/engine/parsers/iniparser.ts ***!
  \*****************************************/
/***/ (() => {

eval("{throw new Error(\"Module build failed (from ./node_modules/ts-loader/index.js):\\nError: ENOENT: no such file or directory, open 'D:\\\\Dev\\\\__ProjetTEWOU__\\\\src\\\\src\\\\engine\\\\parsers\\\\iniparser.ts'\");\n\n//# sourceURL=webpack:///./src/engine/parsers/iniparser.ts?\n}");

/***/ }),

/***/ "./src/engine/parsers/tiledParser.ts":
/*!*******************************************!*\
  !*** ./src/engine/parsers/tiledParser.ts ***!
  \*******************************************/
/***/ (() => {

eval("{throw new Error(\"Module build failed (from ./node_modules/ts-loader/index.js):\\nError: ENOENT: no such file or directory, open 'D:\\\\Dev\\\\__ProjetTEWOU__\\\\src\\\\src\\\\engine\\\\parsers\\\\tiledParser.ts'\");\n\n//# sourceURL=webpack:///./src/engine/parsers/tiledParser.ts?\n}");

/***/ }),

/***/ "./src/engine/physics/capture.ts":
/*!***************************************!*\
  !*** ./src/engine/physics/capture.ts ***!
  \***************************************/
/***/ (() => {

eval("{throw new Error(\"Module build failed (from ./node_modules/ts-loader/index.js):\\nError: ENOENT: no such file or directory, open 'D:\\\\Dev\\\\__ProjetTEWOU__\\\\src\\\\src\\\\engine\\\\physics\\\\capture.ts'\");\n\n//# sourceURL=webpack:///./src/engine/physics/capture.ts?\n}");

/***/ }),

/***/ "./src/engine/physics/gridCollision.ts":
/*!*********************************************!*\
  !*** ./src/engine/physics/gridCollision.ts ***!
  \*********************************************/
/***/ (() => {

eval("{throw new Error(\"Module build failed (from ./node_modules/ts-loader/index.js):\\nError: ENOENT: no such file or directory, open 'D:\\\\Dev\\\\__ProjetTEWOU__\\\\src\\\\src\\\\engine\\\\physics\\\\gridCollision.ts'\");\n\n//# sourceURL=webpack:///./src/engine/physics/gridCollision.ts?\n}");

/***/ }),

/***/ "./src/engine/physics/npcCollision.ts":
/*!********************************************!*\
  !*** ./src/engine/physics/npcCollision.ts ***!
  \********************************************/
/***/ (() => {

eval("{throw new Error(\"Module build failed (from ./node_modules/ts-loader/index.js):\\nError: ENOENT: no such file or directory, open 'D:\\\\Dev\\\\__ProjetTEWOU__\\\\src\\\\src\\\\engine\\\\physics\\\\npcCollision.ts'\");\n\n//# sourceURL=webpack:///./src/engine/physics/npcCollision.ts?\n}");

/***/ }),

/***/ "./src/engine/physics/states.ts":
/*!**************************************!*\
  !*** ./src/engine/physics/states.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CollideLayers: () => (/* binding */ CollideLayers),\n/* harmony export */   CollideTypes: () => (/* binding */ CollideTypes)\n/* harmony export */ });\nvar CollideTypes;\r\n(function (CollideTypes) {\r\n    CollideTypes[CollideTypes[\"none\"] = 1] = \"none\";\r\n    CollideTypes[CollideTypes[\"block\"] = 2] = \"block\";\r\n    CollideTypes[CollideTypes[\"hurt\"] = 4] = \"hurt\";\r\n    CollideTypes[CollideTypes[\"interact\"] = 8] = \"interact\";\r\n    CollideTypes[CollideTypes[\"climbable\"] = 16] = \"climbable\";\r\n    CollideTypes[CollideTypes[\"water\"] = 32] = \"water\";\r\n    CollideTypes[CollideTypes[\"instakill\"] = 64] = \"instakill\";\r\n    CollideTypes[CollideTypes[\"get\"] = 128] = \"get\";\r\n    CollideTypes[CollideTypes[\"custom0\"] = 256] = \"custom0\";\r\n    CollideTypes[CollideTypes[\"custom1\"] = 512] = \"custom1\";\r\n    CollideTypes[CollideTypes[\"custom2\"] = 1024] = \"custom2\";\r\n    CollideTypes[CollideTypes[\"custom3\"] = 2048] = \"custom3\";\r\n    CollideTypes[CollideTypes[\"custom4\"] = 4096] = \"custom4\";\r\n    CollideTypes[CollideTypes[\"custom5\"] = 8192] = \"custom5\";\r\n    CollideTypes[CollideTypes[\"custom6\"] = 16384] = \"custom6\";\r\n    CollideTypes[CollideTypes[\"custom7\"] = 32768] = \"custom7\";\r\n    CollideTypes[CollideTypes[\"custom8\"] = 65536] = \"custom8\";\r\n    CollideTypes[CollideTypes[\"custom9\"] = 131072] = \"custom9\";\r\n    CollideTypes[CollideTypes[\"all\"] = 262143] = \"all\";\r\n})(CollideTypes || (CollideTypes = {}));\r\nvar CollideLayers;\r\n(function (CollideLayers) {\r\n    CollideLayers[CollideLayers[\"none\"] = 1] = \"none\";\r\n    CollideLayers[CollideLayers[\"player\"] = 2] = \"player\";\r\n    CollideLayers[CollideLayers[\"npc\"] = 4] = \"npc\";\r\n    CollideLayers[CollideLayers[\"grid\"] = 8] = \"grid\";\r\n    CollideLayers[CollideLayers[\"interactable\"] = 16] = \"interactable\";\r\n    CollideLayers[CollideLayers[\"all\"] = 31] = \"all\";\r\n})(CollideLayers || (CollideLayers = {}));\r\n\n\n//# sourceURL=webpack:///./src/engine/physics/states.ts?\n}");

/***/ }),

/***/ "./src/engine/render/_render.ts":
/*!**************************************!*\
  !*** ./src/engine/render/_render.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Render: () => (/* binding */ Render)\n/* harmony export */ });\n// import S\r\nvar Render;\r\n(function (Render) {\r\n    class Info {\r\n        static MAXLAYERS = 256;\r\n        static vbuffer;\r\n        static Rframebuffer;\r\n        static framebuffer;\r\n        static renderbuffer;\r\n        static gl;\r\n        static txt;\r\n        static textCanvas;\r\n    }\r\n    Render.Info = Info;\r\n    class GL extends Info {\r\n        constructor(width, height) {\r\n            super();\r\n            if (!Info.txt && document.getElementById('text') != undefined) {\r\n                Info.txt = (() => {\r\n                    // document.getElementsByTagName('body')[0].clientWidth\r\n                    document.getElementById('text').setAttribute('width', document.getElementsByTagName('body')[0].clientWidth + '');\r\n                    document.getElementById('text').setAttribute('height', document.getElementsByTagName('body')[0].clientHeight + '');\r\n                    return document.querySelector('#text').\r\n                        getContext('2d');\r\n                })();\r\n                Info.textCanvas = document.querySelector('#text');\r\n            }\r\n            if (!Info.gl) {\r\n                Info.gl = (() => {\r\n                    document.getElementById(\"canvas\").setAttribute(\"width\", width);\r\n                    document.getElementById(\"canvas\").setAttribute(\"height\", height);\r\n                    let ctx = document.querySelector(\"#canvas\").\r\n                        getContext(\"webgl2\", { premultipliedAlpha: false });\r\n                    ctx.enable(ctx.BLEND);\r\n                    ctx.blendFunc(ctx.SRC_ALPHA, ctx.ONE_MINUS_SRC_ALPHA);\r\n                    return ctx;\r\n                })();\r\n                Info.framebuffer = Info.gl.createFramebuffer();\r\n                Info.Rframebuffer = Info.gl.createFramebuffer();\r\n                Info.renderbuffer = Info.gl.createRenderbuffer();\r\n                Info.vbuffer = Info.gl.createBuffer();\r\n                Info.gl.bindBuffer(Info.gl.ARRAY_BUFFER, Info.vbuffer);\r\n                Info.gl.bufferData(Info.gl.ARRAY_BUFFER, new Float32Array([\r\n                    1, 0, 0, 0, 0, 1,\r\n                    1, 0, 0, 1, 1, 1 // Triangle 2\r\n                ]), Info.gl.STATIC_DRAW);\r\n                Info.gl.clearColor(0, 0.5, 0, 0);\r\n                Info.gl.bindFramebuffer(Info.gl.READ_FRAMEBUFFER, Info.Rframebuffer);\r\n                Info.gl.bindFramebuffer(Info.gl.DRAW_FRAMEBUFFER, Info.framebuffer);\r\n                Info.gl.bindRenderbuffer(Info.gl.RENDERBUFFER, Info.renderbuffer);\r\n                Info.gl.renderbufferStorage(Info.gl.RENDERBUFFER, Info.gl.RGBA8, 2000, 2000);\r\n                Info.gl.framebufferRenderbuffer(Info.gl.DRAW_FRAMEBUFFER, Info.gl.COLOR_ATTACHMENT0, Info.gl.RENDERBUFFER, Info.renderbuffer);\r\n                Info.gl.readBuffer(Info.gl.COLOR_ATTACHMENT0);\r\n                Info.gl.drawBuffers([Info.gl.COLOR_ATTACHMENT0]);\r\n                // Info.gl.drawingBufferColorSpace = \"display-p3\";\r\n                // Info.gl.unpackColorSpace = \"display-p3\";\r\n            }\r\n        }\r\n        static resizeCanvasToDisplaySize(canvas, multiplier) {\r\n            multiplier = multiplier || 1;\r\n            const width = canvas.clientWidth * multiplier | 0;\r\n            const height = canvas.clientHeight * multiplier | 0;\r\n            if (canvas.width !== width || canvas.height !== height) {\r\n                canvas.width = width;\r\n                canvas.height = height;\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n    Render.GL = GL;\r\n})(Render || (Render = {}));\r\n\n\n//# sourceURL=webpack:///./src/engine/render/_render.ts?\n}");

/***/ }),

/***/ "./src/engine/render/_shaders.ts":
/*!***************************************!*\
  !*** ./src/engine/render/_shaders.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Shader)\n/* harmony export */ });\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_render */ \"./src/engine/render/_render.ts\");\n\r\nclass Shader extends _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info {\r\n    static shaders = {};\r\n    static fallbackShader = 'normal';\r\n    static previousShader = \"\";\r\n    static currShader;\r\n    static getShader(id = '') {\r\n        let shader = Shader.shaders[id] || Shader.shaders[Shader.fallbackShader] || undefined;\r\n        if (shader === undefined) {\r\n            console.log(\"Shader \" + id + \" doesn't exist and couldn't find fallback shader \" + Shader.fallbackShader);\r\n        }\r\n        return shader;\r\n    }\r\n    static compileShader(type, source) {\r\n        let shader = Shader.gl.createShader(type);\r\n        Shader.gl.shaderSource(shader, source);\r\n        Shader.gl.compileShader(shader);\r\n        let success = Shader.gl.getShaderParameter(shader, Shader.gl.COMPILE_STATUS);\r\n        if (success)\r\n            return shader;\r\n        console.debug(Shader.gl.getShaderInfoLog(shader));\r\n        Shader.gl.deleteShader(shader);\r\n        return null;\r\n    }\r\n    static createProgram(vertexShader, fragmentShader) {\r\n        let program = Shader.gl.createProgram();\r\n        Shader.gl.attachShader(program, vertexShader);\r\n        Shader.gl.attachShader(program, fragmentShader);\r\n        Shader.gl.linkProgram(program);\r\n        let success = Shader.gl.getProgramParameter(program, Shader.gl.LINK_STATUS);\r\n        if (success)\r\n            return program;\r\n        console.debug(Shader.gl.getProgramInfoLog(program));\r\n        Shader.gl.deleteProgram(program);\r\n        return null;\r\n    }\r\n    static passShader(cmp, plane) {\r\n        if (cmp.rprops.shaderID != undefined)\r\n            Shader.validateShader(cmp.rprops.shaderID);\r\n        else\r\n            Shader.validateShader(this.fallbackShader);\r\n        // console.log(Shader.currShader.name)\r\n        if (Shader.currShader != undefined) {\r\n            // for(const a in Shader.currShader.first){\r\n            //   // console.log(\"A\");\r\n            //   Shader.currShader.first[a]();\r\n            // }\r\n            for (const a of Shader.currShader.second) {\r\n                a();\r\n            }\r\n            for (const a of Shader.currShader.passes) {\r\n                a(cmp, plane);\r\n            }\r\n        }\r\n    }\r\n    static validateShader(shaderID) {\r\n        if (Shader.previousShader !== shaderID) {\r\n            Shader.currShader = Shader.shaders[shaderID];\r\n            if (Shader.currShader != undefined) {\r\n                Shader.initShader(Shader.currShader);\r\n                Shader.previousShader = shaderID;\r\n            }\r\n            else {\r\n                console.log('Using Fallback shader');\r\n                Shader.currShader = Shader.shaders[this.fallbackShader] || undefined;\r\n                if (Shader.currShader != undefined)\r\n                    Shader.initShader(Shader.currShader);\r\n                else\r\n                    console.log(\"Fallback shader undefined\");\r\n                Shader.previousShader = this.fallbackShader;\r\n            }\r\n        }\r\n    }\r\n    static initShader(sh) {\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.useProgram(sh.program);\r\n        for (const a of Shader.currShader.first) {\r\n            a();\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/render/_shaders.ts?\n}");

/***/ }),

/***/ "./src/engine/render/assets.ts":
/*!*************************************!*\
  !*** ./src/engine/render/assets.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Assets)\n/* harmony export */ });\n/* harmony import */ var _textures__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./textures */ \"./src/engine/render/textures.ts\");\n\r\nclass Assets {\r\n    static pathprefix = '';\r\n    static parser = new DOMParser();\r\n    static textures = {};\r\n    static texts = {};\r\n    static sounds = {};\r\n    static imgExts = ['png', 'jpg', 'gif', 'jpeg'];\r\n    static txtExts = ['nw', 'txt', 'vert', 'frag', 'gani', 'csv'];\r\n    static sndExts = ['wav', 'mp3'];\r\n    static audioContext;\r\n    static placeholder = \"_assets/blocking.png\";\r\n    static setprefix(prefix) {\r\n        this.pathprefix = prefix;\r\n    }\r\n    static getTexture(fileName) {\r\n        if (!Assets.textures[this.pathprefix + fileName]) {\r\n            console.log(\"Texture file not found or not loaded : \" + this.pathprefix + fileName);\r\n            return Assets.textures[this.placeholder];\r\n        }\r\n        return Assets.textures[this.pathprefix + fileName].t;\r\n    }\r\n    static getTextureWidth(fileName) {\r\n        if (!Assets.textures[this.pathprefix + fileName]) {\r\n            console.log(\"Texture file not found or not loaded : \" + this.pathprefix + fileName);\r\n            return -1;\r\n        }\r\n        return Assets.textures[this.pathprefix + fileName].w;\r\n    }\r\n    static getTextureHeight(fileName) {\r\n        if (!Assets.textures[this.pathprefix + fileName]) {\r\n            console.log(\"Texture file not found or not loaded : \" + this.pathprefix + fileName);\r\n            return -1;\r\n        }\r\n        return Assets.textures[this.pathprefix + fileName].h;\r\n    }\r\n    static getText(fileName) {\r\n        if (!Assets.texts[this.pathprefix + fileName]) {\r\n            console.log(\"Text file not found or not loaded : \" + this.pathprefix + fileName);\r\n            return \"\";\r\n        }\r\n        return Assets.texts[this.pathprefix + fileName];\r\n    }\r\n    static initAudio() {\r\n        // window.addEventListener('load', function() {\r\n        Assets.audioContext = new window.AudioContext();\r\n        // });\r\n    }\r\n    static addTexture(name, tex, size) {\r\n        Assets.textures[name] = { t: tex, ...size };\r\n    }\r\n    static async addImage(fileName) {\r\n        if (!Assets.textures[this.pathprefix + fileName]) {\r\n            let img = new Image();\r\n            img.src = this.pathprefix + fileName;\r\n            try {\r\n                await img.decode().then(() => {\r\n                    Assets.textures[this.pathprefix + fileName] = { t: _textures__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createTexture(img), w: img.width, h: img.height };\r\n                });\r\n            }\r\n            catch {\r\n                console.log(\"Error\");\r\n            }\r\n        }\r\n        return this.pathprefix + fileName;\r\n    }\r\n    static async addText(fileName) {\r\n        if (!Assets.texts[this.pathprefix + fileName]) {\r\n            Assets.texts[this.pathprefix + fileName] = await fetch(this.pathprefix + fileName).then((x) => x.text());\r\n        }\r\n        return this.pathprefix + fileName;\r\n    }\r\n    static async addSound(fileName) {\r\n        if (!Assets.sounds[this.pathprefix + fileName]) {\r\n            await fetch(this.pathprefix + fileName)\r\n                .then(response => response.arrayBuffer())\r\n                .then(arrayBuffer => Assets.audioContext.decodeAudioData(arrayBuffer))\r\n                .then(decodedAudio => {\r\n                Assets.sounds[this.pathprefix + fileName] = decodedAudio;\r\n            })\r\n                .catch(error => console.error('Error loading audio file:', error));\r\n        }\r\n        return this.pathprefix + fileName;\r\n    }\r\n    static playSound(fileName) {\r\n        if (!Assets.sounds[this.pathprefix + fileName]) {\r\n            Assets.addSound(this.pathprefix + fileName).then((file) => Assets.play(Assets.sounds[this.pathprefix + fileName]));\r\n        }\r\n        else {\r\n            Assets.play(Assets.sounds[this.pathprefix + fileName]);\r\n        }\r\n    }\r\n    static play(decodedAudio) {\r\n        let source = Assets.audioContext.createBufferSource();\r\n        source.buffer = decodedAudio;\r\n        source.connect(Assets.audioContext.destination);\r\n        source.start();\r\n    }\r\n    /**\r\n     *\r\n     * @param folderPath Folder to load files from\r\n     * @param ext File extension(s) to load\r\n     * @returns Relative path of files found\r\n     */\r\n    static async loadAllExtInFolder(folderPath, ext) {\r\n        let xhr = new XMLHttpRequest();\r\n        let jobs = [];\r\n        xhr.open('GET', folderPath, false);\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState === 4 && xhr.status === 200) {\r\n                let filesa = Assets.parser.parseFromString(xhr.responseText, \"text/html\").getElementsByTagName('a');\r\n                let files = [];\r\n                for (let i = 0; i < filesa.length; i++)\r\n                    files.push(filesa[i].getAttribute(\"href\"));\r\n                for (let file of files) {\r\n                    if (file.trim().length <= 0)\r\n                        continue;\r\n                    let fspl = file.split('.');\r\n                    let fileType = fspl[fspl.length - 1];\r\n                    if (fileType.endsWith('/'))\r\n                        continue;\r\n                    if (fileType.startsWith('?'))\r\n                        continue;\r\n                    if (ext.includes(fileType)) {\r\n                        if (Assets.imgExts.includes(fileType))\r\n                            jobs.push(Assets.addImage(folderPath + file));\r\n                        else if (Assets.txtExts.includes(fileType))\r\n                            jobs.push(Assets.addText(folderPath + file));\r\n                        else if (Assets.sndExts.includes(fileType))\r\n                            jobs.push(Assets.addSound(folderPath + file));\r\n                        else\r\n                            console.log('Incompatible file : ' + file);\r\n                    }\r\n                    else\r\n                        console.log('File is neither ' + ext.join(' or ') + ' : ' + file);\r\n                }\r\n            }\r\n        };\r\n        xhr.send();\r\n        await Promise.all(jobs);\r\n        return jobs;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/render/assets.ts?\n}");

/***/ }),

/***/ "./src/engine/render/composite.ts":
/*!****************************************!*\
  !*** ./src/engine/render/composite.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Composite: () => (/* binding */ Composite)\n/* harmony export */ });\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_render */ \"./src/engine/render/_render.ts\");\n/* harmony import */ var _shaders__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_shaders */ \"./src/engine/render/_shaders.ts\");\n/* harmony import */ var _textures__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./textures */ \"./src/engine/render/textures.ts\");\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./assets */ \"./src/engine/render/assets.ts\");\n/* harmony import */ var _alacrity_time__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../alacrity/time */ \"./src/engine/alacrity/time.ts\");\n\r\n\r\n\r\n\r\n\r\nvar Composite;\r\n(function (Composite_1) {\r\n    class Renderable extends _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info {\r\n        rprops;\r\n        texture;\r\n        file;\r\n        ready;\r\n        parent = undefined;\r\n        constructor() {\r\n            super();\r\n            this.rprops = {\r\n                srcrect: undefined,\r\n                dstrect: { x: 0, y: 0, w: 0, h: 0 },\r\n                pos: { x: 0, y: 0 },\r\n                flip: { flipx: false, flipy: false },\r\n                angle: 0,\r\n                scale: { x: 1, y: 1 },\r\n                layer: 0,\r\n                hidden: false,\r\n                delete: false\r\n            };\r\n        }\r\n        getclientbounds() {\r\n            return {\r\n                x: this.getclientleft(),\r\n                y: this.getclienttop(),\r\n                w: this.getclientwidth(),\r\n                h: this.getclientheight()\r\n            };\r\n        }\r\n        // add \"add\" methods to Snap, animation, frame (or simply composite?) \r\n        //// so parent is updated at addition (instead of pushing directly)\r\n        getclientleft() {\r\n            // console.log(this.rprops.pos.x)\r\n            if (!this.parent) {\r\n                return this.rprops.pos.x * this.getwidthratio(); // + (this.parent==undefined?0:this.parent.getclientleft());\r\n            }\r\n            return (this.rprops.pos.x + this.parent.getclientleft()) * this.getwidthratio();\r\n        }\r\n        getclienttop() {\r\n            return (this.rprops.pos.y + (this.parent == undefined ? 0 : this.parent.getclienttop())) * this.getwidthratio();\r\n        }\r\n        getclientwidth(dstrect = this.rprops.dstrect) {\r\n            return dstrect.w * this.getwidthratio();\r\n        }\r\n        getclientheight(dstrect = this.rprops.dstrect) {\r\n            return dstrect.h * this.getheightratio();\r\n            // removed by dead control flow\n{}\r\n        }\r\n        getwidthratio() {\r\n            if (this.parent != undefined) {\r\n                return (this.rprops.dstrect.w / this.rprops.srcrect.w) * this.parent.getwidthratio();\r\n            }\r\n            return this.rprops.dstrect.w / this.rprops.srcrect.w;\r\n        }\r\n        getheightratio() {\r\n            if (this.parent != undefined) {\r\n                return (this.rprops.dstrect.h / this.rprops.srcrect.h) * this.parent.getheightratio();\r\n            }\r\n            return this.rprops.dstrect.h / this.rprops.srcrect.h;\r\n        }\r\n    }\r\n    Composite_1.Renderable = Renderable;\r\n    // export class Text extends Renderable {\r\n    //   constructor(content: string, size: number, font: string, color: string){\r\n    //     super();\r\n    //     // Create a 2D canvas\r\n    //     // const textCanvas = Render.Info.txt;\r\n    //     // Draw text on the 2D canvas\r\n    //     Render.Info.txt.fillStyle = color;//'white';\r\n    //     Render.Info.txt.font = size + 'px' + ' ' + font; //'30px Arial' ;\r\n    //     Render.Info.txt.fillText(content, 0, 0);\r\n    //     let textsize = Render.Info.txt.measureText(content);\r\n    //     this.rprops.srcrect = {\r\n    //       x:0,\r\n    //       y:0,\r\n    //       w: textsize.width,\r\n    //       h: size\r\n    //     }\r\n    //     this.rprops.dstrect = this.rprops.srcrect;\r\n    //     // Use the 2D canvas as a texture in WebGL\r\n    //     // const gl = document.getElementById('webglCanvas').getContext('webgl');\r\n    //     const texture = Render.Info.gl.createTexture();\r\n    //     Render.Info.gl.bindTexture(Render.Info.gl.TEXTURE_2D, texture);\r\n    //     Render.Info.gl.texImage2D(Render.Info.gl.TEXTURE_2D, 0, Render.Info.gl.RGBA, Render.Info.gl.RGBA, Render.Info.gl.UNSIGNED_BYTE, Render.Info.textCanvas);\r\n    //     Render.Info.gl.generateMipmap(Render.Info.gl.TEXTURE_2D);\r\n    //   }\r\n    // }\r\n    class Image extends Renderable {\r\n        constructor(file, srcrect, dstrect, plane = undefined) {\r\n            super();\r\n            this.file = file;\r\n            this.rprops.srcrect = srcrect;\r\n            this.rprops.dstrect = dstrect;\r\n        }\r\n        compose() {\r\n            // console.log(this.file);\r\n            // if(this.ready){\r\n            //   Image.gl.deleteTexture(this.texture);\r\n            //   this.ready = false;\r\n            // }\r\n            if (!this.ready /*  && Assets.getTexture(this.file) */) {\r\n                let spr = _textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].createTexToBlitOn(this.rprops.srcrect.w, this.rprops.srcrect.h);\r\n                _textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.bindFramebuffer(_textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.FRAMEBUFFER, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.framebuffer);\r\n                _textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.framebufferTexture2D(_textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.FRAMEBUFFER, _textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.COLOR_ATTACHMENT0, _textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.TEXTURE_2D, _assets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getTexture(this.file), 0);\r\n                _textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.bindTexture(_textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.TEXTURE_2D, spr);\r\n                _textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.copyTexSubImage2D(_textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.TEXTURE_2D, 0, 0, 0, this.rprops.srcrect.x, this.rprops.srcrect.y, this.rprops.srcrect.w, this.rprops.srcrect.h);\r\n                _textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.bindFramebuffer(_textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.FRAMEBUFFER, null);\r\n                this.texture = spr;\r\n            }\r\n        }\r\n    }\r\n    Composite_1.Image = Image;\r\n    class Composite extends Renderable {\r\n        remove;\r\n        dynamic = false;\r\n        bg;\r\n        mask;\r\n        viewport;\r\n        applyBg() { }\r\n        applyMask() { }\r\n        compose() { return this.rprops.delete; }\r\n        constructor() {\r\n            super();\r\n            this.viewport = { x: 0, y: 0, w: Composite.gl.canvas.width, h: Composite.gl.canvas.height };\r\n        }\r\n        static createFocus(rd) {\r\n            // console.log(rd);\r\n            return {\r\n                x: rd.reduce((acc, c) => { return Math.min(acc, c.rprops.dstrect.x); }, rd[0].rprops.dstrect.x),\r\n                y: rd.reduce((acc, c) => { return Math.min(acc, c.rprops.dstrect.y); }, rd[0].rprops.dstrect.y),\r\n                w: rd.reduce((acc, c) => { return Math.max(acc, c.rprops.dstrect.w + c.rprops.dstrect.x); }, 0),\r\n                h: rd.reduce((acc, c) => { return Math.max(acc, c.rprops.dstrect.h + c.rprops.dstrect.y); }, 0)\r\n            };\r\n        }\r\n        generateComposite(rd, focusRect) {\r\n            let toDraw = rd.filter((r) => { return !r?.rprops.hidden; });\r\n            if (toDraw.length > 0) {\r\n                toDraw.sort((a, b) => a.rprops.layer - b.rprops.layer);\r\n                for (let i = 0; i < toDraw.length; i++)\r\n                    toDraw[i].compose();\r\n                // let focusRect : T.Bounds = ;\r\n                // console.log(focusRect)\r\n                this.rprops.srcrect = {\r\n                    x: focusRect.x,\r\n                    y: focusRect.y,\r\n                    w: focusRect.w /*  <= this.rprops.dstrect.w ? this.rprops.dstrect.w : focusRect.w */,\r\n                    h: focusRect.h /*  <= this.rprops.dstrect.h ? this.rprops.dstrect.h : focusRect.h */\r\n                };\r\n                this.rprops.dstrect = {\r\n                    x: this.rprops.pos.x /* + (this.rprops.scalex == 1 ? 0 : (this.rprops.srcrect!.w - (this.rprops.srcrect!.w * this.rprops.scalex)) / 2) */,\r\n                    y: this.rprops.pos.y /* + (this.rprops.scaley == 1 ? 0 : (this.rprops.srcrect!.h - (this.rprops.srcrect!.h * this.rprops.scaley)) / 2) */,\r\n                    w: this.rprops.srcrect.w /* +focusRect.x */,\r\n                    h: this.rprops.srcrect.h /* +focusRect.y */\r\n                };\r\n                let gl = Snap.gl;\r\n                gl.bindFramebuffer(gl.FRAMEBUFFER, Composite.framebuffer);\r\n                this.texture = _textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].createTexToBlitOn(this.rprops.dstrect.w, this.rprops.dstrect.h);\r\n                gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.texture, 0);\r\n                gl.viewport(-this.viewport.x, -this.viewport.y, this.rprops.dstrect.w, this.rprops.dstrect.h);\r\n                // gl.clearColor(0, 1, 0, .5);\r\n                // gl.clear(gl.COLOR_BUFFER_BIT);\r\n                for (let i = 0; i < toDraw.length; i++) {\r\n                    // toDraw[i].compose();\r\n                    _shaders__WEBPACK_IMPORTED_MODULE_1__[\"default\"].gl.bindTexture(gl.TEXTURE_2D, toDraw[i].texture);\r\n                    _shaders__WEBPACK_IMPORTED_MODULE_1__[\"default\"].passShader(toDraw[i], this.rprops.dstrect);\r\n                    gl.drawArrays(gl.TRIANGLES, 0, 6);\r\n                }\r\n                this.ready = true;\r\n            }\r\n            else\r\n                this.ready = false;\r\n        }\r\n        // add \"add\" methods to Snap, animation, frame (or simply composite?) \r\n        //// so parent is updated at addition (instead of pushing directly)\r\n        // need to refresh camera for viewport to have the camera modifications\r\n        getclientleft() {\r\n            // console.log(this.rprops.pos.x - this.viewport.x);\r\n            if (!this.parent) {\r\n                return this.rprops.pos.x - this.viewport.x; // + (this.parent==undefined?0:this.parent.getclientleft());\r\n            }\r\n            return this.rprops.pos.x + this.parent.getclientleft() - this.viewport.x;\r\n        }\r\n        getclienttop() {\r\n            return this.rprops.pos.y + (this.parent == undefined ? 0 : this.parent.getclienttop()) - this.viewport.y;\r\n        }\r\n        addtocomposition(arr) { }\r\n    }\r\n    class Snap extends Composite {\r\n        parts;\r\n        constructor(parts) {\r\n            super();\r\n            for (let p of parts)\r\n                p.parent = this;\r\n            this.parts = parts;\r\n        }\r\n        compose() {\r\n            if (this.rprops.delete) {\r\n                if (this.ready)\r\n                    Composite.gl.deleteTexture(this.texture);\r\n                return this.rprops.delete;\r\n            }\r\n            if (this.dynamic) {\r\n                if (this.ready) {\r\n                    Composite.gl.deleteTexture(this.texture);\r\n                }\r\n                this.ready = false;\r\n            }\r\n            if (!this.ready) {\r\n                let focusRect = Snap.createFocus(this.parts);\r\n                // focusRect.x = 0;\r\n                // focusRect.y = 0;\r\n                // this.rprops.pos.x = focusRect.x;\r\n                // this.viewport.x   = -focusRect.x;\r\n                this.generateComposite(this.parts, focusRect);\r\n            }\r\n            return this.rprops.delete;\r\n        }\r\n        addtocomposition(arr) {\r\n            for (let a of arr) {\r\n                a.parent = this;\r\n            }\r\n            this.parts.push(...arr);\r\n        }\r\n    }\r\n    Composite_1.Snap = Snap;\r\n    class Animation extends Composite {\r\n        frames;\r\n        currentFrame = 0;\r\n        // private timings     : number[];\r\n        timer;\r\n        constructor(frames, timings = [200]) {\r\n            super();\r\n            this.dynamic = true;\r\n            this.timer = new _alacrity_time__WEBPACK_IMPORTED_MODULE_4__.Time.Timeout(timings, \"framechange\");\r\n            this.frames = frames;\r\n            for (let f of frames)\r\n                f.parent = this;\r\n        }\r\n        compose() {\r\n            if (this.rprops.delete) {\r\n                for (let f of this.frames) {\r\n                    f.rprops.delete = true;\r\n                    f.compose();\r\n                }\r\n                return this.rprops.delete;\r\n            }\r\n            this.handleframechange();\r\n            if (this.frames[this.currentFrame].dynamic || !this.frames[this.currentFrame].ready) {\r\n                this.frames[this.currentFrame].compose();\r\n            }\r\n            this.texture = this.frames[this.currentFrame].texture;\r\n            this.rprops = this.frames[this.currentFrame].rprops;\r\n            // this.rprops.srcrect = this.frames[this.currentFrame].rprops.srcrect;\r\n            // this.rprops.dstrect = this.frames[this.currentFrame].rprops.dstrect;\r\n            // this.rprops.pos     = this.frames[this.currentFrame].rprops.pos    ;\r\n            // this.rprops.flip    = this.frames[this.currentFrame].rprops.flip   ;\r\n            // this.rprops.angle   = this.frames[this.currentFrame].rprops.angle  ;\r\n            // this.rprops.scalex  = this.frames[this.currentFrame].rprops.scalex ;\r\n            // this.rprops.scaley  = this.frames[this.currentFrame].rprops.scaley ;\r\n            // this.rprops.layer   = this.frames[this.currentFrame].rprops.layer  ;\r\n            // this.rprops.hidden  = this.frames[this.currentFrame].rprops.hidden ;\r\n            // this.rprops.delete  = this.frames[this.currentFrame].rprops.delete ;\r\n            // console.log(this.rprops.pos.y);\r\n            this.ready = this.frames[this.currentFrame].ready;\r\n            return this.rprops.delete;\r\n        }\r\n        handleframechange() {\r\n            let trig = this.timer.test();\r\n            if (trig.state == 'triggered') {\r\n                this.currentFrame += 1;\r\n                if (this.currentFrame >= this.frames.length)\r\n                    this.currentFrame = 0;\r\n            }\r\n        }\r\n        pause() {\r\n            this.timer.pause();\r\n        }\r\n        resume() {\r\n            this.timer.resume();\r\n        }\r\n        restart() {\r\n            this.timer.restart();\r\n            this.currentFrame = 0;\r\n        }\r\n        // these are present because of a bug linking animation position, \r\n        // currently, i need to link every of its frames to the animation's parent position\r\n        // it works but is incorrect and may lead to future malfunctioning\r\n        //\r\n        getclientleft() {\r\n            return this.parent.getclientleft();\r\n        }\r\n        getclienttop() {\r\n            return this.parent.getclienttop();\r\n        }\r\n        // returns and diminishes once too many?\r\n        getclientwidth() {\r\n            return super.getclientwidth(this.frames[this.currentFrame].rprops.dstrect);\r\n            // return this.frames[this.currentFrame].rprops.dstrect.w * this.getwidthratio();\r\n        }\r\n        getclientheight() {\r\n            return super.getclientheight(this.frames[this.currentFrame].rprops.dstrect);\r\n        }\r\n        addtocomposition(arr) {\r\n            for (let a of arr) {\r\n                a.parent = this;\r\n            }\r\n            this.frames.push(...arr);\r\n        }\r\n    }\r\n    Composite_1.Animation = Animation;\r\n    class Frame extends Composite {\r\n        frame;\r\n        // public worldpos : T.Point = {x:0,y:0};\r\n        camera = undefined;\r\n        picture = { crop: { do: false, w: 0, h: 0 }, x: 0, y: 0, w: 0, h: 0, img: undefined, ready: false };\r\n        // private size : T.Box;\r\n        constructor(frame, size = { w: 0, h: 0 }) {\r\n            super();\r\n            this.frame = frame;\r\n            this.dynamic = true;\r\n            // this.size = size;\r\n            this.rprops.dstrect.w = size.w;\r\n            this.rprops.dstrect.h = size.h;\r\n            for (let f of frame)\r\n                f.parent = this;\r\n        }\r\n        compose() {\r\n            // if(this.rprops.delete) return this.rprops.delete;\r\n            // There has to be an underlying bug for this next line to be required:\r\n            if (this.frame[0] === undefined) {\r\n                console.log(\"Skipping empty frame...\");\r\n                return true;\r\n            }\r\n            if (this.dynamic || this.rprops.delete) {\r\n                if ((this.rprops.delete && this.ready) || this.ready) {\r\n                    Composite.gl.deleteTexture(this.texture);\r\n                }\r\n                this.ready = false;\r\n            }\r\n            if (!this.ready) {\r\n                this.frame = this.frame.filter((f) => f != undefined && !f.compose());\r\n                let parts = this.frame.filter((f) => { return f.ready; });\r\n                let focusRect = Snap.createFocus(parts);\r\n                this.rprops.dstrect.x = this.rprops.pos.x;\r\n                this.rprops.dstrect.y = this.rprops.pos.y;\r\n                if (this.camera !== undefined) {\r\n                    this.rprops.dstrect.w = this.camera.viewport.w;\r\n                    this.rprops.dstrect.h = this.camera.viewport.h;\r\n                    // console.log(this.camera.viewport.x)\r\n                    this.viewport = { x: this.camera.viewport.x, y: this.camera.viewport.y, w: this.camera.viewport.w, h: this.camera.viewport.h };\r\n                }\r\n                // console.log(\"BOB\")\r\n                if (parts.length > 0)\r\n                    this.generateComposite(parts, focusRect);\r\n                if (this.picture.crop.do)\r\n                    this.crop();\r\n                this.ready = true;\r\n            }\r\n            return this.rprops.delete;\r\n        }\r\n        crop() {\r\n            if (this.picture.ready) {\r\n                // Composite.gl.deleteTexture(this.picture.img.texture);\r\n                Composite.gl.deleteTexture(_assets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getTexture('croptex'));\r\n                this.picture.ready = false;\r\n            }\r\n            if (!this.picture.ready) {\r\n                _assets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].addTexture('croptex', this.texture, { w: 100, h: 100 });\r\n                let img = new Image('croptex', { x: 0, y: 0, w: this.picture.crop.w, h: this.picture.crop.h }, { x: 0, y: 0, w: this.picture.w, h: this.picture.h });\r\n                img.compose();\r\n                this.texture = img.texture;\r\n                this.rprops.pos.x = this.picture.x;\r\n                this.rprops.pos.y = this.picture.y;\r\n                this.rprops.dstrect.w = this.picture.w;\r\n                this.rprops.dstrect.h = this.picture.h;\r\n                this.picture.ready = true;\r\n            }\r\n        }\r\n        setCrop(crop, dest) {\r\n            this.picture =\r\n                { crop: { do: true, ...crop }, ...dest, img: undefined, ready: false };\r\n        }\r\n        addtocomposition(arr) {\r\n            for (let a of arr) {\r\n                a.parent = this;\r\n            }\r\n            this.frame.push(...arr);\r\n        }\r\n    }\r\n    Composite_1.Frame = Frame;\r\n})(Composite || (Composite = {}));\r\n\n\n//# sourceURL=webpack:///./src/engine/render/composite.ts?\n}");

/***/ }),

/***/ "./src/engine/render/shaderloader.ts":
/*!*******************************************!*\
  !*** ./src/engine/render/shaderloader.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ShaderLoader)\n/* harmony export */ });\n/* harmony import */ var _shaders__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_shaders */ \"./src/engine/render/_shaders.ts\");\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./assets */ \"./src/engine/render/assets.ts\");\n/* harmony import */ var _shaders_reverser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shaders/reverser */ \"./src/engine/render/shaders/reverser.ts\");\n/* harmony import */ var _shaders_normal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shaders/normal */ \"./src/engine/render/shaders/normal.ts\");\n/* harmony import */ var _shaders_whitetransparent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./shaders/whitetransparent */ \"./src/engine/render/shaders/whitetransparent.ts\");\n\r\n\r\n\r\n\r\n\r\nclass ShaderLoader extends _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    static shaderts = [new _shaders_normal__WEBPACK_IMPORTED_MODULE_3__[\"default\"](), new _shaders_reverser__WEBPACK_IMPORTED_MODULE_2__[\"default\"](), new _shaders_whitetransparent__WEBPACK_IMPORTED_MODULE_4__[\"default\"]()];\r\n    static async init() {\r\n        await this.compileAllShadersFrom(\"shaders/\");\r\n    }\r\n    static async compileAllShadersFrom(folder) {\r\n        let programs = [];\r\n        await Promise.all(await _assets__WEBPACK_IMPORTED_MODULE_1__[\"default\"].loadAllExtInFolder(folder, [\"frag\", \"vert\"]))\r\n            .then((q) => {\r\n            q.map((val, idx, arr) => {\r\n                let name = val.split('/')[1].split('.')[0];\r\n                for (let i = idx; i < arr.length; i++) {\r\n                    if (name == arr[i].split('/')[1].split('.')[0] && !programs.includes(name)) {\r\n                        programs.push(name);\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        ;\r\n        for (let i = 0; i < programs.length; i++) {\r\n            _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].shaders[programs[i]] = (() => {\r\n                let vertexShader = _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].compileShader(_shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gl.VERTEX_SHADER, _assets__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getText(\"shaders/\" + programs[i] + \".vert\"));\r\n                let fragmentShader = _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].compileShader(_shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gl.FRAGMENT_SHADER, _assets__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getText(\"shaders/\" + programs[i] + \".frag\"));\r\n                let program = _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createProgram(vertexShader, fragmentShader);\r\n                if (!program) {\r\n                    console.log(\"Shader creation unsuccessful:\" + _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].shaders[programs[i]]);\r\n                }\r\n                for (let j = 0; j < this.shaderts.length; j++) {\r\n                    if (this.shaderts[j].name == programs[i]) {\r\n                        if (program != null) {\r\n                            this.shaderts[j].program = program;\r\n                            return this.shaderts[j];\r\n                        }\r\n                    }\r\n                }\r\n                // If unsuccessful, revert to first loaded shader\r\n                // Should return default shader, for now it is first in the list\r\n                // of loaded shaders (shaderts:Array<Shader>)\r\n                return this.shaderts[0];\r\n            })();\r\n        }\r\n        return programs;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/render/shaderloader.ts?\n}");

/***/ }),

/***/ "./src/engine/render/shaders/matrices.ts":
/*!***********************************************!*\
  !*** ./src/engine/render/shaders/matrices.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Matrix)\n/* harmony export */ });\n// Taken from www.webglfundamentals.com or something\r\nclass Matrix {\r\n    static iM = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\r\n    static ortho(x, y, z, w, h, d) {\r\n        return new Float32Array([\r\n            w, 0, 0, 0,\r\n            0, h, 0, 0,\r\n            0, 0, d, 0,\r\n            x, y, z, 1\r\n        ]);\r\n    }\r\n    static multiplyMatrices(matrixA, matrixB) {\r\n        // Slice the second matrix up into rows\r\n        let row0 = [matrixB[0], matrixB[1], matrixB[2], matrixB[3]];\r\n        let row1 = [matrixB[4], matrixB[5], matrixB[6], matrixB[7]];\r\n        let row2 = [matrixB[8], matrixB[9], matrixB[10], matrixB[11]];\r\n        let row3 = [matrixB[12], matrixB[13], matrixB[14], matrixB[15]];\r\n        // Multiply each row by matrixA\r\n        let result0 = this.multiplyMatrixAndPoint(matrixA, row0);\r\n        let result1 = this.multiplyMatrixAndPoint(matrixA, row1);\r\n        let result2 = this.multiplyMatrixAndPoint(matrixA, row2);\r\n        let result3 = this.multiplyMatrixAndPoint(matrixA, row3);\r\n        // Turn the result rows back into a single matrix\r\n        return new Float32Array([\r\n            result0[0],\r\n            result0[1],\r\n            result0[2],\r\n            result0[3],\r\n            result1[0],\r\n            result1[1],\r\n            result1[2],\r\n            result1[3],\r\n            result2[0],\r\n            result2[1],\r\n            result2[2],\r\n            result2[3],\r\n            result3[0],\r\n            result3[1],\r\n            result3[2],\r\n            result3[3]\r\n        ]);\r\n    }\r\n    static multiplyMatrixAndPoint(matrix, point) {\r\n        // Give a simple variable name to each part of the matrix, a column and row number\r\n        let c0r0 = matrix[0], c1r0 = matrix[1], c2r0 = matrix[2], c3r0 = matrix[3];\r\n        let c0r1 = matrix[4], c1r1 = matrix[5], c2r1 = matrix[6], c3r1 = matrix[7];\r\n        let c0r2 = matrix[8], c1r2 = matrix[9], c2r2 = matrix[10], c3r2 = matrix[11];\r\n        let c0r3 = matrix[12], c1r3 = matrix[13], c2r3 = matrix[14], c3r3 = matrix[15];\r\n        // Now set some simple names for the point\r\n        let x = point[0];\r\n        let y = point[1];\r\n        let z = point[2];\r\n        let w = point[3];\r\n        // Multiply the point against each part of the 1st column, then add together\r\n        let resultX = x * c0r0 + y * c0r1 + z * c0r2 + w * c0r3;\r\n        // Multiply the point against each part of the 2nd column, then add together\r\n        let resultY = x * c1r0 + y * c1r1 + z * c1r2 + w * c1r3;\r\n        // Multiply the point against each part of the 3rd column, then add together\r\n        let resultZ = x * c2r0 + y * c2r1 + z * c2r2 + w * c2r3;\r\n        // Multiply the point against each part of the 4th column, then add together\r\n        let resultW = x * c3r0 + y * c3r1 + z * c3r2 + w * c3r3;\r\n        return [resultX, resultY, resultZ, resultW];\r\n    }\r\n    static rotation(dst, radians) {\r\n        return this.multiplyMatrices(dst, [\r\n            Math.cos(radians), -Math.sin(radians), 0, 0,\r\n            Math.sin(radians), Math.cos(radians), 0, 0,\r\n            0, 0, 1, 0,\r\n            0, 0, 0, 1,\r\n        ]);\r\n    }\r\n    static normalize(dst, width, height) {\r\n        dst[0] = dst[0] / width;\r\n        dst[5] = dst[5] / height;\r\n        dst[12] = dst[12] / width;\r\n        dst[13] = dst[13] / height;\r\n        return dst;\r\n    }\r\n    static orthographic(left, right, bottom, top, near, far, dst = new Float32Array(16)) {\r\n        dst[0] = 2 / (right - left);\r\n        dst[1] = 0;\r\n        dst[2] = 0;\r\n        dst[3] = 0;\r\n        dst[4] = 0;\r\n        dst[5] = 2 / (top - bottom);\r\n        dst[6] = 0;\r\n        dst[7] = 0;\r\n        dst[8] = 0;\r\n        dst[9] = 0;\r\n        dst[10] = 2 / (near - far);\r\n        dst[11] = 0;\r\n        dst[12] = (left + right) / (left - right);\r\n        dst[13] = (bottom + top) / (bottom - top);\r\n        dst[14] = (near + far) / (near - far);\r\n        dst[15] = 1;\r\n        return dst;\r\n    }\r\n    static scale(m, sx, sy, sz, dst = new Float32Array(16)) {\r\n        dst[0] = sx * m[0 * 4 + 0];\r\n        dst[1] = sx * m[0 * 4 + 1];\r\n        dst[2] = sx * m[0 * 4 + 2];\r\n        dst[3] = sx * m[0 * 4 + 3];\r\n        dst[4] = sy * m[1 * 4 + 0];\r\n        dst[5] = sy * m[1 * 4 + 1];\r\n        dst[6] = sy * m[1 * 4 + 2];\r\n        dst[7] = sy * m[1 * 4 + 3];\r\n        dst[8] = sz * m[2 * 4 + 0];\r\n        dst[9] = sz * m[2 * 4 + 1];\r\n        dst[10] = sz * m[2 * 4 + 2];\r\n        dst[11] = sz * m[2 * 4 + 3];\r\n        if (m !== dst) {\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n        return dst;\r\n    }\r\n    static translate(m, tx, ty, tz, dst = new Float32Array(16)) {\r\n        var m00 = m[0];\r\n        var m01 = m[1];\r\n        var m02 = m[2];\r\n        var m03 = m[3];\r\n        var m10 = m[1 * 4 + 0];\r\n        var m11 = m[1 * 4 + 1];\r\n        var m12 = m[1 * 4 + 2];\r\n        var m13 = m[1 * 4 + 3];\r\n        var m20 = m[2 * 4 + 0];\r\n        var m21 = m[2 * 4 + 1];\r\n        var m22 = m[2 * 4 + 2];\r\n        var m23 = m[2 * 4 + 3];\r\n        var m30 = m[3 * 4 + 0];\r\n        var m31 = m[3 * 4 + 1];\r\n        var m32 = m[3 * 4 + 2];\r\n        var m33 = m[3 * 4 + 3];\r\n        if (m !== dst) {\r\n            dst[0] = m00;\r\n            dst[1] = m01;\r\n            dst[2] = m02;\r\n            dst[3] = m03;\r\n            dst[4] = m10;\r\n            dst[5] = m11;\r\n            dst[6] = m12;\r\n            dst[7] = m13;\r\n            dst[8] = m20;\r\n            dst[9] = m21;\r\n            dst[10] = m22;\r\n            dst[11] = m23;\r\n        }\r\n        dst[12] = m00 * tx + m10 * ty + m20 * tz + m30;\r\n        dst[13] = m01 * tx + m11 * ty + m21 * tz + m31;\r\n        dst[14] = m02 * tx + m12 * ty + m22 * tz + m32;\r\n        dst[15] = m03 * tx + m13 * ty + m23 * tz + m33;\r\n        return dst;\r\n    }\r\n    static mat4mul(lefthand, righthand) {\r\n        const result = [];\r\n        for (let row = 0; row < 4; row++) {\r\n            for (let col = 0; col < 4; col++) {\r\n                const value = lefthand[row * 4 + 0] * righthand[0 * 4 + col]\r\n                    + lefthand[row * 4 + 1] * righthand[1 * 4 + col]\r\n                    + lefthand[row * 4 + 2] * righthand[2 * 4 + col]\r\n                    + lefthand[row * 4 + 3] * righthand[3 * 4 + col];\r\n                result[row * 4 + col] = value;\r\n            }\r\n        }\r\n        return new Float32Array(result);\r\n    }\r\n    static mat4translation(point) {\r\n        return new Float32Array([\r\n            1.0, 0.0, 0.0, 0.0,\r\n            0.0, 1.0, 0.0, 0.0,\r\n            0.0, 0.0, 1.0, 0.0,\r\n            point.x, point.y, 0.0, 1.0\r\n        ]);\r\n    }\r\n    static mat4rot(radians) {\r\n        return new Float32Array([\r\n            Math.cos(radians), -Math.sin(radians), 0, 0,\r\n            Math.sin(radians), Math.cos(radians), 0, 0,\r\n            0, 0, 1, 0,\r\n            0, 0, 0, 1,\r\n        ]);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/render/shaders/matrices.ts?\n}");

/***/ }),

/***/ "./src/engine/render/shaders/normal.ts":
/*!*********************************************!*\
  !*** ./src/engine/render/shaders/normal.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Normal)\n/* harmony export */ });\n/* harmony import */ var _shaders__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_shaders */ \"./src/engine/render/_shaders.ts\");\n/* harmony import */ var _matrices__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./matrices */ \"./src/engine/render/shaders/matrices.ts\");\n\r\n\r\nclass Normal extends _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    program;\r\n    name = \"normal\";\r\n    matrixLocation;\r\n    textureMatrixLocation;\r\n    texture;\r\n    second = [\r\n        () => { }\r\n    ];\r\n    first = [\r\n        () => {\r\n            let gl = _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gl;\r\n            // DefaultShader.gl.activeTexture(DefaultShader.gl.TEXTURE0);\r\n            let aVertexPosition = gl.getAttribLocation(this.program, \"aVertexPosition\");\r\n            gl.enableVertexAttribArray(aVertexPosition);\r\n            gl.vertexAttribPointer(aVertexPosition, 2, gl.FLOAT, false, 0, 0);\r\n            let texCoordLocation = gl.getAttribLocation(this.program, \"texcoordLocation\");\r\n            gl.enableVertexAttribArray(texCoordLocation);\r\n            gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);\r\n            this.matrixLocation = gl.getUniformLocation(this.program, \"matrixLocation\");\r\n            this.textureMatrixLocation = gl.getUniformLocation(this.program, \"textureMatrixLocation\");\r\n            // this.texture = gl.getUniformLocation(this.program, \"texture\");\r\n        },\r\n    ];\r\n    passes = [\r\n        (cmp, plane) => {\r\n            let gl = _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gl;\r\n            // gl.activeTexture(gl.TEXTURE0);\r\n            // gl.bindTexture(gl.TEXTURE_2D, cmp.texture);\r\n            // gl.uniform1i(this.texture, 0);\r\n            let normalizedHeight = cmp.rprops.dstrect.h * (-2 / plane.h);\r\n            let normalizedWidth = cmp.rprops.dstrect.w * (2 / plane.w);\r\n            let positionMatrix = new Float32Array([normalizedWidth, 0, 0, 0,\r\n                0, normalizedHeight, 0, 0,\r\n                0, 0, 1, 0,\r\n                0, 0, 0, 1]);\r\n            let scaleoffset = { x: 0, y: 0 };\r\n            if (cmp.rprops.scalecenter != undefined) {\r\n                scaleoffset = { x: cmp.rprops.scalecenter.x * (2 / plane.w),\r\n                    y: cmp.rprops.scalecenter.y * (-2 / plane.h) };\r\n            }\r\n            scaleoffset = { x: (0 - scaleoffset.x) * cmp.rprops.scale.x + scaleoffset.x,\r\n                y: normalizedHeight - (normalizedHeight - scaleoffset.y) * cmp.rprops.scale.y - scaleoffset.y };\r\n            positionMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4mul(positionMatrix, _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4translation({ x: scaleoffset.x, y: scaleoffset.y }));\r\n            positionMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].scale(positionMatrix, cmp.rprops.scale.x, cmp.rprops.scale.y, 1);\r\n            let rotcenter = { x: 0, y: 0 };\r\n            if (cmp.rprops.rotcenter != undefined) {\r\n                rotcenter = { x: cmp.rprops.rotcenter.x * (2 / plane.w), y: ((cmp.rprops.dstrect.h - cmp.rprops.rotcenter.y)) * (-2 / plane.h) };\r\n            }\r\n            positionMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4mul(positionMatrix, _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4translation({ x: -rotcenter.x, y: -rotcenter.y }));\r\n            positionMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4mul(positionMatrix, _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4rot(cmp.rprops.angle));\r\n            positionMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4mul(positionMatrix, _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4translation({ x: rotcenter.x, y: rotcenter.y }));\r\n            positionMatrix[12] += cmp.rprops.dstrect.x * (2 / plane.w) - 1;\r\n            positionMatrix[13] += -((plane.h - cmp.rprops.dstrect.y - cmp.rprops.dstrect.h) * (2 / plane.h)) + 1;\r\n            gl.uniformMatrix4fv(this.matrixLocation, false, positionMatrix);\r\n            if (this.textureMatrixLocation != null) {\r\n                let texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].orthographic(-1, 1, -1, 1, -1, 1);\r\n                texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].translate(texMatrix, 0, 1, 0);\r\n                if (cmp.rprops.flip.flipx && cmp.rprops.flip.flipy) {\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].orthographic(1, -1, 1, -1, -1, 1);\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].translate(texMatrix, -1, 0, 0);\r\n                }\r\n                else if (cmp.rprops.flip.flipx) {\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].orthographic(1, -1, -1, 1, -1, 1);\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].translate(texMatrix, -1, 1, 0);\r\n                }\r\n                else if (cmp.rprops.flip.flipy) {\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].orthographic(-1, 1, 1, -1, -1, 1);\r\n                    // texMatrix = Matrix.translate(texMatrix,0,0,0);\r\n                }\r\n                gl.uniformMatrix4fv(this.textureMatrixLocation, false, texMatrix);\r\n            }\r\n        }\r\n    ];\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/render/shaders/normal.ts?\n}");

/***/ }),

/***/ "./src/engine/render/shaders/reverser.ts":
/*!***********************************************!*\
  !*** ./src/engine/render/shaders/reverser.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Main2)\n/* harmony export */ });\n/* harmony import */ var _shaders__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_shaders */ \"./src/engine/render/_shaders.ts\");\n/* harmony import */ var _matrices__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./matrices */ \"./src/engine/render/shaders/matrices.ts\");\n\r\n\r\nclass Main2 extends _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    program;\r\n    name = \"reverser\";\r\n    matrixLocation;\r\n    textureMatrixLocation;\r\n    texture;\r\n    second = [\r\n        () => { }\r\n    ];\r\n    first = [\r\n        () => {\r\n            let gl = _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gl;\r\n            // DefaultShader.gl.activeTexture(DefaultShader.gl.TEXTURE0);\r\n            let aVertexPosition = gl.getAttribLocation(this.program, \"aVertexPosition\");\r\n            gl.enableVertexAttribArray(aVertexPosition);\r\n            gl.vertexAttribPointer(aVertexPosition, 2, gl.FLOAT, false, 0, 0);\r\n            let texCoordLocation = gl.getAttribLocation(this.program, \"texcoordLocation\");\r\n            gl.enableVertexAttribArray(texCoordLocation);\r\n            gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);\r\n            this.matrixLocation = gl.getUniformLocation(this.program, \"matrixLocation\");\r\n            this.textureMatrixLocation = gl.getUniformLocation(this.program, \"textureMatrixLocation\");\r\n            this.texture = gl.getUniformLocation(this.program, \"texture\");\r\n        },\r\n    ];\r\n    passes = [\r\n        (cmp, plane) => {\r\n            let gl = _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gl;\r\n            // gl.activeTexture(gl.TEXTURE0);\r\n            // gl.bindTexture(gl.TEXTURE_2D, cmp.texture);\r\n            // gl.uniform1i(this.texture, 0);\r\n            // let matrix = Matrix.orthographic(-1, 1, 1, -1, -1,1);\r\n            // matrix = Matrix.scale(matrix,cmp.rprops.dstrect.w,cmp.rprops.dstrect.h,1);\r\n            // matrix = Matrix.translate(matrix,cmp.rprops.dstrect.x,cmp.rprops.dstrect.y,1);\r\n            let funtimes = new Float32Array([cmp.rprops.dstrect.w, 0, 0, 0,\r\n                0, cmp.rprops.dstrect.h, 0, 0,\r\n                0, 0, 1, 0,\r\n                cmp.rprops.dstrect.x, cmp.rprops.dstrect.y, 0, 1]);\r\n            funtimes[0] *= 2 / plane.w;\r\n            funtimes[5] *= -2 / plane.h;\r\n            funtimes[12] = (funtimes[12] * (2 / plane.w)) - 1;\r\n            funtimes[13] = -(funtimes[13] * (2 / plane.h)) + 1;\r\n            // console.log(\"FDS)\")\r\n            gl.uniformMatrix4fv(this.matrixLocation, false, funtimes);\r\n            if (this.textureMatrixLocation != null) {\r\n                // let texMatrix = new Float32Array(\r\n                //   [cmp.rprops.srcrect.w,0,0,0,\r\n                //     0,cmp.rprops.srcrect.h,0,0,\r\n                //     0,0,1,0,\r\n                //     cmp.rprops.srcrect.x, cmp.rprops.srcrect.y,0,1]\r\n                // )\r\n                // texMatrix[0]  *=  2/cmp.rprops.dstrect.w;\r\n                // texMatrix[5]  *= -2/cmp.rprops.dstrect.h;\r\n                // texMatrix[12]  =  (texMatrix[12]*(2/cmp.rprops.dstrect.w))-1;\r\n                // texMatrix[13]  = -(texMatrix[13]*(2/cmp.rprops.dstrect.h))+1;\r\n                let texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].orthographic(-1, 1, 1, -1, -1, 1);\r\n                gl.uniformMatrix4fv(this.textureMatrixLocation, false, texMatrix);\r\n            }\r\n        }\r\n    ];\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/render/shaders/reverser.ts?\n}");

/***/ }),

/***/ "./src/engine/render/shaders/whitetransparent.ts":
/*!*******************************************************!*\
  !*** ./src/engine/render/shaders/whitetransparent.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ WhiteTransparent)\n/* harmony export */ });\n/* harmony import */ var _shaders__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_shaders */ \"./src/engine/render/_shaders.ts\");\n/* harmony import */ var _matrices__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./matrices */ \"./src/engine/render/shaders/matrices.ts\");\n\r\n\r\nclass WhiteTransparent extends _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    program;\r\n    name = \"whitetransparent\";\r\n    matrixLocation;\r\n    textureMatrixLocation;\r\n    texture;\r\n    second = [\r\n        () => { }\r\n    ];\r\n    first = [\r\n        () => {\r\n            let gl = _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gl;\r\n            // DefaultShader.gl.activeTexture(DefaultShader.gl.TEXTURE0);\r\n            let aVertexPosition = gl.getAttribLocation(this.program, \"aVertexPosition\");\r\n            gl.enableVertexAttribArray(aVertexPosition);\r\n            gl.vertexAttribPointer(aVertexPosition, 2, gl.FLOAT, false, 0, 0);\r\n            let texCoordLocation = gl.getAttribLocation(this.program, \"texcoordLocation\");\r\n            gl.enableVertexAttribArray(texCoordLocation);\r\n            gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);\r\n            this.matrixLocation = gl.getUniformLocation(this.program, \"matrixLocation\");\r\n            this.textureMatrixLocation = gl.getUniformLocation(this.program, \"textureMatrixLocation\");\r\n            // this.texture = gl.getUniformLocation(this.program, \"texture\");\r\n        },\r\n    ];\r\n    passes = [\r\n        (cmp, plane) => {\r\n            let gl = _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gl;\r\n            // gl.activeTexture(gl.TEXTURE0);\r\n            // gl.bindTexture(gl.TEXTURE_2D, cmp.texture);\r\n            // gl.uniform1i(this.texture, 0);\r\n            // let matrix = Matrix.orthographic(-1, 1, 1, -1, -1,1);\r\n            // matrix = Matrix.scale(matrix,cmp.rprops.dstrect.w,cmp.rprops.dstrect.h,1);\r\n            // matrix = Matrix.translate(matrix,cmp.rprops.dstrect.x,cmp.rprops.dstrect.y,1);\r\n            let funtimes = new Float32Array([cmp.rprops.dstrect.w, 0, 0, 0,\r\n                0, cmp.rprops.dstrect.h, 0, 0,\r\n                0, 0, 1, 0,\r\n                cmp.rprops.dstrect.x, plane.h - cmp.rprops.dstrect.y - cmp.rprops.dstrect.h, 0, 1]);\r\n            // if(cmp.rprops.scalex != 1){\r\n            //   funtimes[0]  *= cmp.rprops.scalex;\r\n            //   funtimes[12] += cmp.rprops.dstrect.w - ((cmp.rprops.dstrect.w * cmp.rprops.scalex) / 2);\r\n            // }\r\n            // if(cmp.rprops.scaley != 1){\r\n            //   funtimes[4]  *= cmp.rprops.scaley;\r\n            //   funtimes[13] += cmp.rprops.scaley;\r\n            // }\r\n            if (cmp.rprops.angle != 0) {\r\n                // TODO: rotate around a point\r\n                let twomat = [];\r\n                twomat[0] = (Math.cos(-cmp.rprops.angle) * funtimes[0]);\r\n                twomat[1] = (-Math.sin(-cmp.rprops.angle) * funtimes[0]);\r\n                twomat[3] = (Math.sin(-cmp.rprops.angle) * funtimes[5]);\r\n                twomat[4] = (Math.cos(-cmp.rprops.angle) * funtimes[5]);\r\n                funtimes[0] = twomat[0];\r\n                funtimes[1] = twomat[1];\r\n                funtimes[4] = twomat[3];\r\n                funtimes[5] = twomat[4];\r\n            }\r\n            // Math.cos(radians),-Math.sin(radians)\r\n            // Math.sin(radians), Math.cos(radians)\r\n            funtimes[0] *= 2 / plane.w;\r\n            funtimes[1] *= 2 / plane.w;\r\n            // funtimes[3]  *=  (funtimes[3] * (2/plane.w));\r\n            funtimes[4] *= -2 / plane.h;\r\n            funtimes[5] *= -2 / plane.h;\r\n            funtimes[12] = (funtimes[12] * (2 / plane.w)) - 1;\r\n            funtimes[13] = -(funtimes[13] * (2 / plane.h)) + 1;\r\n            // funtimes = Matrix.translate()\r\n            // funtimes[12]  -= (2*cmp.rprops.rotcenter.x)/plane.w;\r\n            // funtimes[13]  -= (2*cmp.rprops.rotcenter.y)/plane.h;\r\n            // funtimes = Matrix.rotation(funtimes,cmp.rprops.angle);\r\n            // funtimes[12]  += (2*cmp.rprops.rotcenter.x)/plane.w;\r\n            // funtimes[13]  += (2*cmp.rprops.rotcenter.y)/plane.h;\r\n            gl.uniformMatrix4fv(this.matrixLocation, false, funtimes);\r\n            // console.log(\"FDS)\")\r\n            if (this.textureMatrixLocation != null) {\r\n                // let texMatrix = new Float32Array(\r\n                //   [cmp.rprops.srcrect.w,0,0,0,\r\n                //     0,cmp.rprops.srcrect.h,0,0,\r\n                //     0,0,1,0,\r\n                //     cmp.rprops.srcrect.x, cmp.rprops.srcrect.y,0,1]\r\n                // )\r\n                // texMatrix[0]  *=  2/cmp.rprops.dstrect.w;\r\n                // texMatrix[5]  *= -2/cmp.rprops.dstrect.h;\r\n                // texMatrix[12]  =  (texMatrix[12]*(2/cmp.rprops.dstrect.w))-1;\r\n                // texMatrix[13]  = -(texMatrix[13]*(2/cmp.rprops.dstrect.h))+1;\r\n                let texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].orthographic(-1, 1, -1, 1, -1, 1);\r\n                texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].translate(texMatrix, 0, 1, 0);\r\n                if (cmp.rprops.flip.flipx && cmp.rprops.flip.flipy) {\r\n                }\r\n                else if (cmp.rprops.flip.flipx) {\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].orthographic(1, -1, -1, 1, -1, 1);\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].translate(texMatrix, -1, 1, 0);\r\n                }\r\n                else if (cmp.rprops.flip.flipy) {\r\n                }\r\n                // console.log(\"FDS)\")\r\n                // let texMatrix = Matrix.orthographic(-1, 1, -1,1,  -1,1);\r\n                gl.uniformMatrix4fv(this.textureMatrixLocation, false, texMatrix);\r\n            }\r\n        }\r\n    ];\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/render/shaders/whitetransparent.ts?\n}");

/***/ }),

/***/ "./src/engine/render/textures.ts":
/*!***************************************!*\
  !*** ./src/engine/render/textures.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Textures)\n/* harmony export */ });\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_render */ \"./src/engine/render/_render.ts\");\n\r\nclass Textures extends _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info {\r\n    static createTexture(img) {\r\n        // console.log(Render.Info.gl);\r\n        let tex = this.createTexToBlitOn(img.width, img.height);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.bindTexture(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, tex);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.texImage2D(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, 0, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.RGBA, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.RGBA, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.UNSIGNED_BYTE, img);\r\n        return tex;\r\n    }\r\n    static createSprite(file, from, bounds) {\r\n        const framebuffer = _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.createFramebuffer();\r\n        let spr = Textures.createTexToBlitOn(bounds.w, bounds.h);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.bindFramebuffer(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.FRAMEBUFFER, framebuffer);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.framebufferTexture2D(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.FRAMEBUFFER, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.COLOR_ATTACHMENT0, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, from, 0);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.bindTexture(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, spr);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.copyTexSubImage2D(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, 0, 0, 0, bounds.x, bounds.y, bounds.w, bounds.h);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.deleteFramebuffer(framebuffer);\r\n        return spr;\r\n    }\r\n    static createTexToBlitOn(width, height) {\r\n        const targetTexture = _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.createTexture();\r\n        // let arr = new Uint8Array(width*height*4).fill(0);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.bindTexture(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, targetTexture);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.texImage2D(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, 0, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.RGBA, width, height, \r\n        // Textures.nextPowerOfTwo(width), Textures.nextPowerOfTwo(height),\r\n        // 1024,1024,\r\n        0, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.RGBA, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.UNSIGNED_BYTE, null);\r\n        // arr)\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.texParameteri(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_MIN_FILTER, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.NEAREST);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.texParameteri(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_MAG_FILTER, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.NEAREST);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.texParameteri(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_WRAP_S, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.CLAMP_TO_EDGE);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.texParameteri(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_WRAP_T, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.CLAMP_TO_EDGE);\r\n        return targetTexture;\r\n    }\r\n    static nextPowerOfTwo(n) {\r\n        if (n == 2 || n == 4 || n == 8 || n == 16 || n == 32 || n == 64 || n == 128 || n == 256 || n == 512 || n == 1024 || n == 2048 /*||n==4096 */)\r\n            return n;\r\n        if (n > 2048)\r\n            return 2048;\r\n        if (n <= 0)\r\n            return 1; // Handle edge case for non-positive numbers\r\n        n--;\r\n        n |= n >> 1;\r\n        n |= n >> 2;\r\n        n |= n >> 4;\r\n        n |= n >> 8;\r\n        n |= n >> 16;\r\n        return n + 1;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/render/textures.ts?\n}");

/***/ }),

/***/ "./src/engine/systems/_system.ts":
/*!***************************************!*\
  !*** ./src/engine/systems/_system.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ System)\n/* harmony export */ });\nclass System {\r\n    static pool = [];\r\n    constructor(priority = false) {\r\n        if (priority)\r\n            System.pool.unshift(this);\r\n        else\r\n            System.pool.push(this);\r\n    }\r\n    static refresh() {\r\n        for (let i = 0; i < this.pool.length; i++) {\r\n            System.pool[i].refresh();\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/systems/_system.ts?\n}");

/***/ }),

/***/ "./src/engine/systems/keyboard.ts":
/*!****************************************!*\
  !*** ./src/engine/systems/keyboard.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Keyboard)\n/* harmony export */ });\nclass Keyboard {\r\n    // private static keyboardpool : Array<Keyboard> = [];\r\n    static init = false;\r\n    static keys = {};\r\n    // protected abstract update();\r\n    // protected controlled : NPC;\r\n    constructor() {\r\n        // Keyboard.keyboardpool.push(this)\r\n        // this.mKeyboard = this;\r\n        if (!Keyboard.init) {\r\n            document.addEventListener(\"keydown\", (event) => {\r\n                if (!event.repeat)\r\n                    Keyboard.keys[event.key] = 1;\r\n            });\r\n            document.addEventListener(\"keyup\", (event) => {\r\n                Keyboard.keys[event.key] = -1;\r\n            });\r\n        }\r\n        Keyboard.init = true;\r\n    }\r\n    static refresh() {\r\n        for (let k in Keyboard.keys) {\r\n            Keyboard.keys[k] = Keyboard.keys[k] < 0 ?\r\n                0 : Keyboard.keys[k] > 0 ? 2 : 0;\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/systems/keyboard.ts?\n}");

/***/ }),

/***/ "./src/engine/systems/touch.ts":
/*!*************************************!*\
  !*** ./src/engine/systems/touch.ts ***!
  \*************************************/
/***/ (() => {

eval("{throw new Error(\"Module build failed (from ./node_modules/ts-loader/index.js):\\nError: ENOENT: no such file or directory, open 'D:\\\\Dev\\\\__ProjetTEWOU__\\\\src\\\\src\\\\engine\\\\systems\\\\touch.ts'\");\n\n//# sourceURL=webpack:///./src/engine/systems/touch.ts?\n}");

/***/ }),

/***/ "./src/engine/systems/window.ts":
/*!**************************************!*\
  !*** ./src/engine/systems/window.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Window)\n/* harmony export */ });\n/* harmony import */ var _render_render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../render/_render */ \"./src/engine/render/_render.ts\");\n/* harmony import */ var _render_shaders__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../render/_shaders */ \"./src/engine/render/_shaders.ts\");\n\r\n\r\nclass Window extends _render_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info {\r\n    static frm;\r\n    static refresh() {\r\n        var gl = _render_shaders__WEBPACK_IMPORTED_MODULE_1__[\"default\"].gl;\r\n        Window.frm.compose();\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n        // gl.viewport(windwx, windowy, windowwidht, windowheight);\r\n        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n        // gl.clearColor(0, 0.5, 0, 1);\r\n        gl.clear(gl.COLOR_BUFFER_BIT);\r\n        // console.log(\"C\");\r\n        gl.bindTexture(gl.TEXTURE_2D, Window.frm.texture);\r\n        _render_shaders__WEBPACK_IMPORTED_MODULE_1__[\"default\"].passShader(Window.frm, { w: gl.canvas.width, h: gl.canvas.height });\r\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/systems/window.ts?\n}");

/***/ }),

/***/ "./src/games/arbre/animations/ganiyan.ts":
/*!***********************************************!*\
  !*** ./src/games/arbre/animations/ganiyan.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ GaniYan)\n/* harmony export */ });\n/* harmony import */ var _engine_render_assets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/render/assets */ \"./src/engine/render/assets.ts\");\n/* harmony import */ var _engine_parsers_ganiParser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/parsers/ganiParser */ \"./src/engine/parsers/ganiParser.ts\");\n\r\n\r\n// export namespace Anims {\r\nclass GaniYan {\r\n    idle;\r\n    sword;\r\n    walk;\r\n    constructor() {\r\n        this.idle = _engine_parsers_ganiParser__WEBPACK_IMPORTED_MODULE_1__[\"default\"].parse(_engine_render_assets__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getText(\"_assets/arbre/idle.gani\")).animations;\r\n        this.walk = _engine_parsers_ganiParser__WEBPACK_IMPORTED_MODULE_1__[\"default\"].parse(_engine_render_assets__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getText(\"_assets/arbre/walk.gani\")).animations;\r\n        this.sword = _engine_parsers_ganiParser__WEBPACK_IMPORTED_MODULE_1__[\"default\"].parse(_engine_render_assets__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getText(\"_assets/arbre/sword.gani\")).animations;\r\n        // console.log(this.idle)\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/games/arbre/animations/ganiyan.ts?\n}");

/***/ }),

/***/ "./src/games/arbre/character.ts":
/*!**************************************!*\
  !*** ./src/games/arbre/character.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Character)\n/* harmony export */ });\n/* harmony import */ var _engine_systems_keyboard__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/systems/keyboard */ \"./src/engine/systems/keyboard.ts\");\n/* harmony import */ var _engine_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/api */ \"./src/engine/api.ts\");\n/* harmony import */ var _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/render/composite */ \"./src/engine/render/composite.ts\");\n/* harmony import */ var _animations_ganiyan__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./animations/ganiyan */ \"./src/games/arbre/animations/ganiyan.ts\");\n/* harmony import */ var _engine_physics_npcCollision__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../engine/physics/npcCollision */ \"./src/engine/physics/npcCollision.ts\");\n/* harmony import */ var _engine_physics_states__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../engine/physics/states */ \"./src/engine/physics/states.ts\");\n/* harmony import */ var _engine_physics_capture__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../engine/physics/capture */ \"./src/engine/physics/capture.ts\");\n/* harmony import */ var _engine_render_assets__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../engine/render/assets */ \"./src/engine/render/assets.ts\");\n/* harmony import */ var _engine_alacrity_incarnations__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../engine/alacrity/_incarnations */ \"./src/engine/alacrity/_incarnations.ts\");\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./game */ \"./src/games/arbre/game.ts\");\n\r\n// import {Time} from \"../../engine/alacrity/time\"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Character extends _engine_alacrity_incarnations__WEBPACK_IMPORTED_MODULE_8__.Incarnations.Player {\r\n    action;\r\n    actions;\r\n    // private changeframe : Time.Timeout;\r\n    character;\r\n    // public walk : Array<Composite.Animation>;\r\n    dir = 2;\r\n    // private currentAnim: Composite.Animation;\r\n    backtoidle;\r\n    // public myCamera   : Camera;\r\n    hp = { max: 3, current: 3 };\r\n    constructor() {\r\n        let ganiYan = new _animations_ganiyan__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\r\n        super(new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Frame([ganiYan.idle[2]]));\r\n        this.timeouts.push(new _engine_api__WEBPACK_IMPORTED_MODULE_1__.Time.Timeout([300], \"move\", false));\r\n        // this.changeframe = new Time.Timeout([100,100],\"changeframe\",false)\r\n        // this.changeframe.paused = true;\r\n        // this.timeouts.push(this.changeframe);\r\n        this.character = ganiYan;\r\n        this.hitbox = { x: 0, y: 14, w: 48, h: 34 };\r\n        // this.myCamera = camera;\r\n        this.backtoidle = new _engine_api__WEBPACK_IMPORTED_MODULE_1__.Time.Timeout([\r\n            ( /* this.changeframe.ms[0] */200 * (this.character.sword[0].frames.length - 1)),\r\n            ( /* this.changeframe.ms[0] */200 * (this.character.sword[1].frames.length - 1)),\r\n            ( /* this.changeframe.ms[0] */200 * (this.character.sword[2].frames.length - 1)),\r\n            ( /* this.changeframe.ms[0] */200 * (this.character.sword[3].frames.length - 1))\r\n        ], \"backtoidle\", false);\r\n        this.backtoidle.paused = true;\r\n        this.timeouts.push(this.backtoidle);\r\n        _game__WEBPACK_IMPORTED_MODULE_9__[\"default\"].self.gamephysics.collisionpool.push(new _engine_physics_npcCollision__WEBPACK_IMPORTED_MODULE_4__[\"default\"](this, _engine_physics_states__WEBPACK_IMPORTED_MODULE_5__.CollideLayers.player, _engine_physics_states__WEBPACK_IMPORTED_MODULE_5__.CollideLayers.grid | _engine_physics_states__WEBPACK_IMPORTED_MODULE_5__.CollideLayers.npc, _engine_physics_states__WEBPACK_IMPORTED_MODULE_5__.CollideTypes.block));\r\n        // this.myFrame = new Composite.Frame([this.character.idle[this.dir]], {w:200,h:800});\r\n        // this.myFrame.rprops.pos = this.pos;\r\n        // this.myFrame.worldpos = {x:0,y:0};\r\n    }\r\n    update() {\r\n        super.update();\r\n        // this.handleTouch();\r\n        this.handleKeys();\r\n        this.handleTriggers();\r\n    }\r\n    // private handleTouch(){\r\n    //   if(Touch.clicked.length == 0 && this.backtoidle.paused){\r\n    //   switch(Touch.touchstate){\r\n    //     case -1:\r\n    //     break;\r\n    //     case 0:\r\n    //       if(Touch.time.getTimeoutTicks() < 300){\r\n    //         let playerpos = this.myCamera.worldtoscreen(this);\r\n    //         this.movementvector = {x:2/(Touch.view.w/Touch.touchPos.x) - 4/((Touch.view.w)/(playerpos.x)), y:2/(Touch.view.h/Touch.touchPos.y) - 4/((Touch.view.h)/(playerpos.y))};\r\n    //       // this.dir = Math.abs(this.movementvector.x) > Math.abs(this.movementvector.y)\r\n    //                 // ? (this.movementvector.x < 0 ? 1 : 3)\r\n    //                 // : (this.movementvector.y < 0 ? 0 : 2);\r\n    //       // this.changeframe.ms = [Math.min(100 / Math.abs(this.movementvector.x + this.movementvector.y),400)]\r\n    //       } else {\r\n    //         this.myFrame.frame = [this.character.idle[this.dir]];\r\n    //         this.changeframe.paused = true;\r\n    //       }\r\n    //     break;\r\n    //     case 1:\r\n    //         document.getElementById('sword')!.style.backgroundImage = 'conic-gradient( #ffffff 0% 0%, #2196f3 0% 100%)';\r\n    //         this.changeframe.step = 1;\r\n    //         this.changeframe.paused = false;\r\n    //       case 2:\r\n    //         let playerpos = this.myCamera.worldtoscreen(this);\r\n    //         console.log(playerpos.x);\r\n    //         let posx = 2*(playerpos.x/Touch.touchPos.x) + 1;\r\n    //         let posy = 2*(playerpos.y/Touch.touchPos.y) + 1;\r\n    //         this.movementvector = {x:2/(Touch.view.w/Touch.touchPos.x) - 4/((Touch.view.w)/(playerpos.x)), y:2/(Touch.view.h/Touch.touchPos.y) - 4/((Touch.view.h)/(playerpos.y))};\r\n    //         this.dir = Math.abs(this.movementvector.x) > Math.abs(this.movementvector.y)\r\n    //           ? (this.movementvector.x < 0 ? 1 : 3)\r\n    //           : (this.movementvector.y < 0 ? 0 : 2);\r\n    //         this.myFrame.frame = [this.character.walk[this.dir]];\r\n    //         this.currentAnim = this.character.walk[this.dir];\r\n    //         this.changeframe.ms[1] = Math.min(100 / Math.abs(this.movementvector.x + this.movementvector.y),400);\r\n    //       // console.log(Math.abs(this.movementvector.x + this.movementvector.y))\r\n    //     break;\r\n    //   }} else {\r\n    //     while(Touch.clicked.length > 0){\r\n    //       let clicked = Touch.clicked.pop();\r\n    //       if(clicked == \"sword\"){\r\n    //         this.slash();\r\n    //       }\r\n    //     }\r\n    //   }\r\n    // }\r\n    slash() {\r\n        // let backtoidle = new Time.Timeout([this.changeframe.ms[0]*this.character.sword[0].frames.length],\"backtoidle\",false);\r\n        // this.timeouts.push(backtoidle);\r\n        // console.log(backtoidle)\r\n        _engine_render_assets__WEBPACK_IMPORTED_MODULE_7__[\"default\"].playSound('_assets/arbre/swoosh_1.wav');\r\n        this.backtoidle.paused = false;\r\n        this.backtoidle.step = this.dir;\r\n        console.log(this.backtoidle.ms[this.backtoidle.step]);\r\n        this.backtoidle.reset();\r\n        this.myFrame.frame = [this.character.sword[this.dir]];\r\n        // this.currentAnim = this.character.sword[this.dir];\r\n        // this.changeframe.step   = 0;\r\n        // this.changeframe.paused = false;\r\n        let box = { w: 32, h: 32 };\r\n        let hurtpos = [\r\n            //up\r\n            { x: 0, y: 0 - 32, w: 32, h: 32 },\r\n            //left\r\n            { x: 0 - 32, y: 0, w: 32, h: 32 },\r\n            //down\r\n            { x: 0, y: 0 + 32, w: 32, h: 32 },\r\n            //right\r\n            { x: 0 + 32, y: 0, w: 32, h: 32 }\r\n        ];\r\n        _game__WEBPACK_IMPORTED_MODULE_9__[\"default\"].self.gamephysics.collisionpool.push(new _engine_physics_capture__WEBPACK_IMPORTED_MODULE_6__[\"default\"](_engine_physics_states__WEBPACK_IMPORTED_MODULE_5__.CollideLayers.player, _engine_physics_states__WEBPACK_IMPORTED_MODULE_5__.CollideLayers.npc, _engine_physics_states__WEBPACK_IMPORTED_MODULE_5__.CollideTypes.hurt, this, hurtpos[this.dir], (owner, target) => {\r\n            target.triggers.push({ name: \"attacked\" });\r\n            return true;\r\n        }));\r\n    }\r\n    handleKeys() {\r\n        for (let k in _engine_systems_keyboard__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys) {\r\n            switch (k) {\r\n                case \"ArrowUp\":\r\n                    switch (_engine_systems_keyboard__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys['ArrowUp']) {\r\n                        case -1:\r\n                            this.character.walk[this.dir].currentFrame = 0;\r\n                            this.myFrame.frame = [this.character.idle[this.dir]];\r\n                        // this.changeframe.paused = true;\r\n                        case 0:\r\n                            break;\r\n                        case 2:\r\n                        // break;\r\n                        case 1:\r\n                            this.dir = 0;\r\n                            this.myFrame.frame = [this.character.walk[this.dir]];\r\n                            // this.currentAnim = this.character.walk[this.dir];\r\n                            // this.changeframe.paused = false;\r\n                            this.movementvector.y = -1;\r\n                            // do something\r\n                            break;\r\n                    }\r\n                    break;\r\n                case \"ArrowLeft\":\r\n                    switch (_engine_systems_keyboard__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys['ArrowLeft']) {\r\n                        case -1:\r\n                            this.character.walk[this.dir].currentFrame = 0;\r\n                            this.myFrame.frame = [this.character.idle[this.dir]];\r\n                        // this.changeframe.paused = true;\r\n                        case 0:\r\n                            break;\r\n                        case 2:\r\n                        // break;\r\n                        case 1:\r\n                            this.dir = 1;\r\n                            this.myFrame.frame = [this.character.walk[this.dir]];\r\n                            // this.currentAnim = this.character.walk[this.dir];\r\n                            // this.changeframe.paused = false;\r\n                            this.movementvector.x = -1;\r\n                            // do something\r\n                            break;\r\n                    }\r\n                    break;\r\n                case \"ArrowDown\":\r\n                    switch (_engine_systems_keyboard__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys['ArrowDown']) {\r\n                        case -1:\r\n                            this.character.walk[this.dir].currentFrame = 0;\r\n                            this.myFrame.frame = [this.character.idle[this.dir]];\r\n                        // this.changeframe.paused = true;\r\n                        case 0:\r\n                            break;\r\n                        case 2:\r\n                        // break;\r\n                        case 1:\r\n                            this.dir = 2;\r\n                            this.myFrame.frame = [this.character.walk[this.dir]];\r\n                            // this.currentAnim = this.character.walk[this.dir];\r\n                            // this.changeframe.paused = false;\r\n                            this.movementvector.y = 1;\r\n                            // do something\r\n                            break;\r\n                    }\r\n                    break;\r\n                case \"ArrowRight\":\r\n                    switch (_engine_systems_keyboard__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys['ArrowRight']) {\r\n                        case -1:\r\n                            this.character.walk[this.dir].currentFrame = 0;\r\n                            this.myFrame.frame = [this.character.idle[this.dir]];\r\n                        // this.changeframe.paused = true;\r\n                        case 0:\r\n                            break;\r\n                        case 2:\r\n                        // break;\r\n                        case 1:\r\n                            this.dir = 3;\r\n                            this.myFrame.frame = [this.character.walk[this.dir]];\r\n                            // this.currentAnim = this.character.walk[this.dir];\r\n                            // this.changeframe.paused = false;\r\n                            this.movementvector.x = 1;\r\n                            // do something\r\n                            break;\r\n                    }\r\n                    break;\r\n                case \"s\":\r\n                    switch (_engine_systems_keyboard__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys['s']) {\r\n                        case -1:\r\n                        case 0:\r\n                            break;\r\n                        case 2:\r\n                            break;\r\n                        case 1:\r\n                            this.slash();\r\n                            break;\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    handleTriggers() {\r\n        while (this.triggers.length > 0) {\r\n            let t = this.triggers.pop() || { name: \"notrigger\" };\r\n            switch (t.name) {\r\n                // case \"changeframe\":\r\n                //   switch(t.state){\r\n                //     case \"triggered\":\r\n                //       this.currentAnim.currentFrame = \r\n                //       (this.currentAnim.currentFrame + 1) % this.currentAnim.frames.length;\r\n                //     break;\r\n                //     case \"active\":\r\n                //     break;\r\n                //     case \"paused\":\r\n                //     break;\r\n                //   }\r\n                // break;\r\n                case \"backtoidle\":\r\n                    switch (t.state) {\r\n                        case \"triggered\":\r\n                            this.character.sword[this.dir].currentFrame = 0;\r\n                            this.myFrame.frame = [this.character.idle[this.dir]];\r\n                            // this.changeframe.paused = true;\r\n                            this.backtoidle.paused = true;\r\n                            document.getElementById('sword').style.backgroundImage = 'conic-gradient( #ffffff 0% 100%, #2196f3 100% 100%)';\r\n                            break;\r\n                        case \"active\":\r\n                            let percentdone = Math.round((this.backtoidle.getTimeoutTicks() / this.backtoidle.ms[0]) * 100);\r\n                            document.getElementById('sword').style.backgroundImage = 'conic-gradient( #ffffff 0% ' + percentdone + '%, #2196f3 ' + percentdone + '% 100%)';\r\n                            break;\r\n                        case \"paused\":\r\n                            break;\r\n                    }\r\n                    break;\r\n                case \"move\":\r\n                    switch (t.state) {\r\n                        case \"triggered\":\r\n                            // this.myFrame.rprops.movementvector.x = 200-32;\r\n                            break;\r\n                        case \"active\":\r\n                            break;\r\n                        case \"paused\":\r\n                            break;\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/games/arbre/character.ts?\n}");

/***/ }),

/***/ "./src/games/arbre/divui.ts":
/*!**********************************!*\
  !*** ./src/games/arbre/divui.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ divUI)\n/* harmony export */ });\n/* harmony import */ var _engine_systems_system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/systems/_system */ \"./src/engine/systems/_system.ts\");\n\r\nclass divUI extends _engine_systems_system__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    static container;\r\n    static view;\r\n    static actor;\r\n    static heartimgsize = { w: 40, h: 48 };\r\n    // private static\r\n    constructor(actor) {\r\n        super();\r\n        divUI.actor = actor;\r\n        let html = document.getElementsByTagName('html')[0];\r\n        divUI.view = { x: 0, y: 0, w: html.clientWidth, h: html.clientWidth };\r\n        let div = document.createElement('div');\r\n        div.style.height = \"24%\";\r\n        div.style.width = \"100%\";\r\n        div.style.top = \"-12%\";\r\n        div.style.position = \"relative\";\r\n        // div.style.background = \"white\";\r\n        document.getElementById('ui').appendChild(div);\r\n        divUI.container = div;\r\n        // console.log(divUI.container)\r\n        let hearts = document.createElement('div');\r\n        hearts.style.width = divUI.heartimgsize.w * divUI.actor.hp.max + \"px\";\r\n        hearts.style.height = divUI.heartimgsize.h + \"px\";\r\n        hearts.style.position = \"relative\";\r\n        hearts.style.right = \"0\";\r\n        divUI.container.appendChild(hearts);\r\n        for (let i = 0; i < divUI.actor.hp.max; i++) {\r\n            let heartContainer = document.createElement('div');\r\n            heartContainer.style.position = \"absolute\";\r\n            heartContainer.style.left = i * (divUI.heartimgsize.w + 5) + \"px\";\r\n            heartContainer.style.width = \"40px\";\r\n            heartContainer.style.height = \"48px\";\r\n            // heartContainer.style.margin = \"10px\";\r\n            heartContainer.style.overflow = \"hidden\";\r\n            let img = document.createElement('img');\r\n            img.style.position = \"relative\";\r\n            // img.style.left = \"-40px\";\r\n            img.src = \"_assets/arbre/state.png\";\r\n            hearts.appendChild(heartContainer);\r\n            heartContainer.appendChild(img);\r\n        }\r\n    }\r\n    // public static update(): void {\r\n    // }\r\n    refresh() { }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/games/arbre/divui.ts?\n}");

/***/ }),

/***/ "./src/games/arbre/game.ts":
/*!*********************************!*\
  !*** ./src/games/arbre/game.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Game)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module '../../engine/dist/index.js'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _level00__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./level00 */ \"./src/games/arbre/level00.ts\");\n\r\n// import {Games} from \"../../engine/_games\"\r\n// import Window from \"../../engine/systems/window\"\r\n// import {Composite} from \"../../engine/render/composite\"\r\n// import {Render} from \"../../engine/render/_render\"\r\n// import * as T from '../../engine/_type'\r\n// import { Incarnations } from \"../../engine/alacrity/_incarnations\"\r\n\r\n// import Physics from \"../../engine/systems/physics\"\r\nclass Game extends Object(function webpackMissingModule() { var e = new Error(\"Cannot find module '../../engine/dist/index.js'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()).Action {\r\n    static self;\r\n    levels = [new _level00__WEBPACK_IMPORTED_MODULE_1__[\"default\"]()];\r\n    gamename = \"arbre\";\r\n    srcview = { w: 500, h: 500 };\r\n    async load() {\r\n        // let game = ;\r\n        this.gamephysics = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module '../../engine/dist/index.js'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()).default();\r\n        Game.self = this;\r\n        await this.initialize();\r\n        // console.log(Render.Info.gl)\r\n        this.currentLevel = await this.newTiledLevel(0);\r\n        let per = .75;\r\n        let gameframewidth = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module '../../engine/dist/index.js'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()).Info.gl.canvas.width > Object(function webpackMissingModule() { var e = new Error(\"Cannot find module '../../engine/dist/index.js'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()).Info.gl.canvas.height ? Object(function webpackMissingModule() { var e = new Error(\"Cannot find module '../../engine/dist/index.js'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()).Info.gl.canvas.height * per : Object(function webpackMissingModule() { var e = new Error(\"Cannot find module '../../engine/dist/index.js'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()).Info.gl.canvas.width * per;\r\n        this.gameframe.setCrop(this.srcview, {\r\n            x: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module '../../engine/dist/index.js'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()).Info.gl.canvas.width / 2 - (Object(function webpackMissingModule() { var e = new Error(\"Cannot find module '../../engine/dist/index.js'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()).Info.gl.canvas.height * per) / 2,\r\n            y: 0,\r\n            w: gameframewidth,\r\n            h: gameframewidth\r\n        });\r\n        Object(function webpackMissingModule() { var e = new Error(\"Cannot find module '../../engine/dist/index.js'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()).default.frm = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module '../../engine/dist/index.js'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()).Frame([this.gameframe]);\r\n        Object(function webpackMissingModule() { var e = new Error(\"Cannot find module '../../engine/dist/index.js'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()).default.frm.rprops.srcrect = { x: 0, y: 0, w: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module '../../engine/dist/index.js'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()).Info.gl.canvas.width, h: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module '../../engine/dist/index.js'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()).Info.gl.canvas.height };\r\n        Object(function webpackMissingModule() { var e = new Error(\"Cannot find module '../../engine/dist/index.js'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()).default.frm.rprops.shaderID = \"reverser\";\r\n        return new Game();\r\n    }\r\n    start() { }\r\n    run() {\r\n        super.run();\r\n        this.gameframe.camera.refresh();\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/games/arbre/game.ts?\n}");

/***/ }),

/***/ "./src/games/arbre/level00.ts":
/*!************************************!*\
  !*** ./src/games/arbre/level00.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ GameLevel)\n/* harmony export */ });\n/* harmony import */ var _engine_parsers_iniparser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/parsers/iniparser */ \"./src/engine/parsers/iniparser.ts\");\n/* harmony import */ var _engine_alacrity_incarnations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/alacrity/_incarnations */ \"./src/engine/alacrity/_incarnations.ts\");\n/* harmony import */ var _engine_render_assets__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/render/assets */ \"./src/engine/render/assets.ts\");\n/* harmony import */ var _engine_physics_gridCollision__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../engine/physics/gridCollision */ \"./src/engine/physics/gridCollision.ts\");\n/* harmony import */ var _engine_physics_states__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../engine/physics/states */ \"./src/engine/physics/states.ts\");\n/* harmony import */ var _character__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./character */ \"./src/games/arbre/character.ts\");\n/* harmony import */ var _tree__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./tree */ \"./src/games/arbre/tree.ts\");\n/* harmony import */ var _engine_parsers_tiledParser__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../engine/parsers/tiledParser */ \"./src/engine/parsers/tiledParser.ts\");\n/* harmony import */ var _divui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./divui */ \"./src/games/arbre/divui.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass GameLevel extends _engine_alacrity_incarnations__WEBPACK_IMPORTED_MODULE_1__.Incarnations.Level {\r\n    ininame = \"arbre00c.ini\";\r\n    // public levelsize  : T.Box;\r\n    // public representation : Composite.Snap[];\r\n    constructor() {\r\n        super();\r\n    }\r\n    async build(game) {\r\n        // console.log(Render.Info.gl)\r\n        game.cellbuild = await _engine_parsers_iniparser__WEBPACK_IMPORTED_MODULE_0__[\"default\"].loadIni(game.rootFolder + this.ininame);\r\n        this.levelsize = { w: game.cellbuild.tiles[0].tileYX[0].length * game.cellbuild.square.w, h: game.cellbuild.tiles[0].tileYX.length * game.cellbuild.square.h };\r\n        await _engine_render_assets__WEBPACK_IMPORTED_MODULE_2__[\"default\"].addText(game.rootFolder + game.gamename + \"/00/tree.csv\");\r\n        game.gamephysics.collisionpool.push(new _engine_physics_gridCollision__WEBPACK_IMPORTED_MODULE_3__[\"default\"](game.cellbuild.collisions[0], 16, _engine_physics_states__WEBPACK_IMPORTED_MODULE_4__.CollideLayers.player, _engine_physics_states__WEBPACK_IMPORTED_MODULE_4__.CollideTypes.block));\r\n        game.player = new _character__WEBPACK_IMPORTED_MODULE_5__[\"default\"]();\r\n        new _divui__WEBPACK_IMPORTED_MODULE_8__[\"default\"](game.player);\r\n        this.bodies.push(game.player);\r\n        this.representation = _engine_parsers_tiledParser__WEBPACK_IMPORTED_MODULE_7__[\"default\"].blit(game.cellbuild, \"level-layer\");\r\n        this.bodies.push(new _tree__WEBPACK_IMPORTED_MODULE_6__[\"default\"](game));\r\n        // return new GameLevel(this);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/games/arbre/level00.ts?\n}");

/***/ }),

/***/ "./src/games/arbre/tree.ts":
/*!*********************************!*\
  !*** ./src/games/arbre/tree.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Tree)\n/* harmony export */ });\n/* harmony import */ var _engine_alacrity_bodies__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/alacrity/_bodies */ \"./src/engine/alacrity/_bodies.ts\");\n/* harmony import */ var _engine_parsers_tiledParser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/parsers/tiledParser */ \"./src/engine/parsers/tiledParser.ts\");\n/* harmony import */ var _engine_parsers_iniparser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/parsers/iniparser */ \"./src/engine/parsers/iniparser.ts\");\n/* harmony import */ var _engine_render_assets__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../engine/render/assets */ \"./src/engine/render/assets.ts\");\n/* harmony import */ var _engine_render_composite__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../engine/render/composite */ \"./src/engine/render/composite.ts\");\n/* harmony import */ var _engine_physics_npcCollision__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../engine/physics/npcCollision */ \"./src/engine/physics/npcCollision.ts\");\n/* harmony import */ var _engine_physics_states__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../engine/physics/states */ \"./src/engine/physics/states.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Tree extends _engine_alacrity_bodies__WEBPACK_IMPORTED_MODULE_0__.Bodies.Embodiment {\r\n    health = 4;\r\n    constructor(game) {\r\n        game.cellbuild.tiles = [_engine_parsers_iniparser__WEBPACK_IMPORTED_MODULE_2__[\"default\"].loadCSV(_engine_render_assets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getText(\"_assets/arbre/00/tree.csv\"))];\r\n        let image = _engine_parsers_tiledParser__WEBPACK_IMPORTED_MODULE_1__[\"default\"].blit(game.cellbuild, \"Tree\");\r\n        super(new _engine_render_composite__WEBPACK_IMPORTED_MODULE_4__.Composite.Frame(image, { w: 8 * 16, h: 6 * 16 }));\r\n        this.pos.x = 16 * 27;\r\n        this.pos.y = 16 * 31;\r\n        this.hitbox = { x: 0, y: 7 * 16, w: 8 * 16, h: 2 * 16 };\r\n        // this.myFrame.frame[0].rprops.angle =  1.57;\r\n        game.gamephysics.collisionpool.push(new _engine_physics_npcCollision__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this, _engine_physics_states__WEBPACK_IMPORTED_MODULE_6__.CollideLayers.npc, _engine_physics_states__WEBPACK_IMPORTED_MODULE_6__.CollideLayers.player, _engine_physics_states__WEBPACK_IMPORTED_MODULE_6__.CollideTypes.block));\r\n        // this.myFrame.rprops.flip.flipy = true;\r\n        // this.myFrame.compose();\r\n        this.myFrame.rprops.rotcenter = { x: 4 * 16, y: 3 * 16 };\r\n        // this.myFrame.rprops.angle = -1;\r\n        this.myFrame.rprops.scale = { x: .5, y: .5 };\r\n        this.myFrame.rprops.scalecenter = { x: 4 * 16, y: 3 * 16 };\r\n        // console.log(this.myFrame.rprops.rotcenter)\r\n    }\r\n    update() {\r\n        super.update();\r\n        this.myFrame.rprops.scale.x = Math.max(.5, (this.myFrame.rprops.scale.x + .01) % 1.5);\r\n        this.myFrame.rprops.scale.y = Math.max(.5, (this.myFrame.rprops.scale.y + .01) % 1.5);\r\n        this.myFrame.rprops.angle -= 0.01;\r\n        this.handleTriggers();\r\n    }\r\n    handleTriggers() {\r\n        while (this.triggers.length > 0) {\r\n            let t = this.triggers.pop() || { name: \"notrigger\" };\r\n            switch (t.name) {\r\n                case \"attacked\":\r\n                    this.health--;\r\n                    if (this.health <= 0)\r\n                        this.myFrame.rprops.hidden = true;\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/games/arbre/tree.ts?\n}");

/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _engine_render_render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./engine/render/_render */ \"./src/engine/render/_render.ts\");\n/* harmony import */ var _engine_render_shaderloader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./engine/render/shaderloader */ \"./src/engine/render/shaderloader.ts\");\n/* harmony import */ var _engine_render_assets__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./engine/render/assets */ \"./src/engine/render/assets.ts\");\n/* harmony import */ var _engine_systems_touch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./engine/systems/touch */ \"./src/engine/systems/touch.ts\");\n/* harmony import */ var _engine_systems_window__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./engine/systems/window */ \"./src/engine/systems/window.ts\");\n/* harmony import */ var _engine_systems_keyboard__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./engine/systems/keyboard */ \"./src/engine/systems/keyboard.ts\");\n/* harmony import */ var _engine_alacrity_time__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./engine/alacrity/time */ \"./src/engine/alacrity/time.ts\");\n/* harmony import */ var _games_arbre_game__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./games/arbre/game */ \"./src/games/arbre/game.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet paused = true;\r\nconst mainLoop = () => {\r\n    game.run();\r\n    _engine_systems_keyboard__WEBPACK_IMPORTED_MODULE_5__[\"default\"].refresh();\r\n    _engine_systems_touch__WEBPACK_IMPORTED_MODULE_3__[\"default\"].refresh();\r\n    _engine_systems_window__WEBPACK_IMPORTED_MODULE_4__[\"default\"].refresh();\r\n    if (!paused)\r\n        requestAnimationFrame(mainLoop);\r\n    else\r\n        requestAnimationFrame(pauseLoop);\r\n};\r\nfunction pauseLoop() {\r\n    for (let k in _engine_systems_keyboard__WEBPACK_IMPORTED_MODULE_5__[\"default\"].keys) {\r\n        switch (k) {\r\n            default:\r\n                switch (_engine_systems_keyboard__WEBPACK_IMPORTED_MODULE_5__[\"default\"].keys[k]) {\r\n                    case 1:\r\n                        _engine_alacrity_time__WEBPACK_IMPORTED_MODULE_6__.Time.Timeout.resumeAll();\r\n                        _engine_render_assets__WEBPACK_IMPORTED_MODULE_2__[\"default\"].audioContext.resume();\r\n                        document.getElementById('gobutton').style.display = 'none';\r\n                        game.start();\r\n                        paused = false;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n    _engine_systems_keyboard__WEBPACK_IMPORTED_MODULE_5__[\"default\"].refresh();\r\n    _engine_systems_touch__WEBPACK_IMPORTED_MODULE_3__[\"default\"].refresh();\r\n    _engine_systems_window__WEBPACK_IMPORTED_MODULE_4__[\"default\"].refresh();\r\n    if (!paused)\r\n        requestAnimationFrame(mainLoop);\r\n    else\r\n        requestAnimationFrame(pauseLoop);\r\n}\r\nconst start = async () => {\r\n    await _engine_render_shaderloader__WEBPACK_IMPORTED_MODULE_1__[\"default\"].init();\r\n    _engine_render_assets__WEBPACK_IMPORTED_MODULE_2__[\"default\"].initAudio();\r\n    await game.load();\r\n    _engine_alacrity_time__WEBPACK_IMPORTED_MODULE_6__.Time.Timeout.pauseAll();\r\n};\r\nlet game;\r\nnew _engine_render_render__WEBPACK_IMPORTED_MODULE_0__.Render.GL(document.body.clientWidth + '', document.body.clientHeight + '');\r\nconsole.log(document.body.clientWidth);\r\n// console.log(Render.Info.gl)\r\n// game = new sfx();\r\ngame = new _games_arbre_game__WEBPACK_IMPORTED_MODULE_7__[\"default\"]();\r\n// game = new RaceGame();\r\n// game = new GameDemon();\r\nstart().then(() => {\r\n    document.getElementById('gobutton').style.visibility = 'visible';\r\n    mainLoop();\r\n});\r\nlet gobutton = document.getElementById('gobutton').getBoundingClientRect();\r\n_engine_systems_touch__WEBPACK_IMPORTED_MODULE_3__[\"default\"].addButton('gobutton', { x: gobutton.x, y: gobutton.y, w: gobutton.width, h: 500 }, () => {\r\n    // Time.Delta.firstTick = Date.now();\r\n    _engine_alacrity_time__WEBPACK_IMPORTED_MODULE_6__.Time.Timeout.resumeAll();\r\n    _engine_render_assets__WEBPACK_IMPORTED_MODULE_2__[\"default\"].audioContext.resume();\r\n    document.getElementById('gobutton').style.display = 'none';\r\n    game.start();\r\n    paused = false;\r\n});\r\n\n\n//# sourceURL=webpack:///./src/main.ts?\n}");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/main.ts");
/******/ 	
/******/ })()
;