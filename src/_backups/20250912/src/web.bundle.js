/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/engine/alacrity/_bodies.ts":
/*!****************************************!*\
  !*** ./src/engine/alacrity/_bodies.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Bodies: () => (/* binding */ Bodies)\n/* harmony export */ });\n/* harmony import */ var _time__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./time */ \"./src/engine/alacrity/time.ts\");\n/* harmony import */ var _physics_states__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../physics/states */ \"./src/engine/physics/states.ts\");\n\r\n\r\n// import Gravity from \"../systems/gravity\";\r\nvar Bodies;\r\n(function (Bodies) {\r\n    class Alacrity {\r\n        lifetime = new _time__WEBPACK_IMPORTED_MODULE_0__.Time.Timeout([Infinity], 'lifetime');\r\n        static pool = [];\r\n        triggers = [];\r\n        timeouts = [];\r\n        // public abstract update();\r\n        constructor() {\r\n            Alacrity.pool.push(this);\r\n        }\r\n        finalize() { }\r\n        resetmovementvector() { }\r\n        static refresh() {\r\n            for (let i = 0; i < this.pool.length; i++) {\r\n                Alacrity.pool[i].update();\r\n            }\r\n            for (let i = 0; i < this.pool.length; i++) {\r\n                Alacrity.pool[i].finalize();\r\n            }\r\n        }\r\n        static refreshsome(some) {\r\n            for (let i = 0; i < some.length; i++) {\r\n                some[i].update();\r\n            }\r\n            for (let i = 0; i < some.length; i++) {\r\n                some[i].finalize();\r\n            }\r\n        }\r\n        static resetallmovements() {\r\n            for (let a of Alacrity.pool) {\r\n                a.resetmovementvector();\r\n            }\r\n        }\r\n        update() {\r\n            this.timeouts = this.timeouts.filter((t) => {\r\n                if (t.deletion)\r\n                    return false;\r\n                this.triggers.push(t.test());\r\n                return true;\r\n            });\r\n        }\r\n        destroy() {\r\n            Alacrity.pool.filter((i) => i != this);\r\n        }\r\n        react(name, params) { return false; }\r\n    }\r\n    Bodies.Alacrity = Alacrity;\r\n    class UIElement extends Alacrity {\r\n        myAnim;\r\n        hitbox = { x: 0, y: 0, w: 0, h: 0 };\r\n        pos = { x: 0, y: 0 };\r\n        hidden = false;\r\n        constructor(animation) {\r\n            super();\r\n            this.myAnim = animation;\r\n            for (let m of this.myAnim.frames) {\r\n                m.rprops.pos = this.pos;\r\n            }\r\n            // this.myAnim.rprops.pos = this.pos;\r\n            this.myAnim.rprops.hidden = this.hidden;\r\n        }\r\n    }\r\n    Bodies.UIElement = UIElement;\r\n    class Embodiment extends Alacrity {\r\n        myFrame;\r\n        collisions = [];\r\n        hitbox = { x: 0, y: 0, w: 0, h: 0 };\r\n        activeeffects = [0, 0, 0, 0];\r\n        pos = { x: 0, y: 0 };\r\n        flip = { flipx: false, flipy: false };\r\n        constructor(frame) {\r\n            super();\r\n            this.myFrame = frame;\r\n            this.myFrame.rprops.pos = this.pos;\r\n            this.myFrame.rprops.layer = .5;\r\n            this.myFrame.rprops.flip = this.flip;\r\n        }\r\n        destroy() {\r\n            super.destroy();\r\n            this.myFrame.rprops.delete = true;\r\n        }\r\n    }\r\n    Bodies.Embodiment = Embodiment;\r\n    class Mobility extends Embodiment {\r\n        // public abstract pos   : T.Point;\r\n        movementvector = { x: 0, y: 0 };\r\n        // public gravityvector  : T.Point = {x:0,y:0};\r\n        speed = .2;\r\n        velocity = new Set();\r\n        normalgravity = { strength: .075, x: 0, y: 1 };\r\n        destination = null;\r\n        movetimer = new _time__WEBPACK_IMPORTED_MODULE_0__.Time.Timeout([Infinity], \"move\");\r\n        movecallback = () => { };\r\n        finalize() {\r\n            if (this.destination != null) {\r\n                // console.log(this.movetimer.test().state)\r\n                // console.log(this.movetimer.end)\r\n                if ((Math.abs(this.pos.x - this.destination.x) < 1 &&\r\n                    Math.abs(this.pos.y - this.destination.y) < 1) ||\r\n                    this.movetimer.test().state == \"triggered\") {\r\n                    this.destination = null;\r\n                    this.movecallback();\r\n                }\r\n                else {\r\n                    let distance = {\r\n                        x: this.destination.x - this.pos.x,\r\n                        y: this.destination.y - this.pos.y\r\n                    };\r\n                    if (distance.x != 0 || distance.y != 0) {\r\n                        let length = Math.sqrt(distance.x * distance.x +\r\n                            distance.y * distance.y);\r\n                        if (length > 0) {\r\n                            this.movementvector.x += distance.x / length;\r\n                            this.movementvector.y += distance.y / length;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            let movement = {\r\n                x: this.movementvector.x * this.speed * _time__WEBPACK_IMPORTED_MODULE_0__.Time.Delta.delta,\r\n                y: this.movementvector.y * this.speed * _time__WEBPACK_IMPORTED_MODULE_0__.Time.Delta.delta,\r\n            };\r\n            for (let g of this.velocity) {\r\n                movement.x += g.x * g.strength * _time__WEBPACK_IMPORTED_MODULE_0__.Time.Delta.delta;\r\n                movement.y += g.y * g.strength * _time__WEBPACK_IMPORTED_MODULE_0__.Time.Delta.delta;\r\n            }\r\n            if ((movement.x < 0 && !(this.activeeffects[1] & _physics_states__WEBPACK_IMPORTED_MODULE_1__.CollideTypes.block)) ||\r\n                (movement.x > 0 && !(this.activeeffects[3] & _physics_states__WEBPACK_IMPORTED_MODULE_1__.CollideTypes.block))) {\r\n                this.pos.x += movement.x;\r\n            }\r\n            if ((movement.y < 0 && !(this.activeeffects[0] & _physics_states__WEBPACK_IMPORTED_MODULE_1__.CollideTypes.block)) ||\r\n                (movement.y > 0 && !(this.activeeffects[2] & _physics_states__WEBPACK_IMPORTED_MODULE_1__.CollideTypes.block))) {\r\n                this.pos.y += movement.y;\r\n            }\r\n            // console.log(movement)\r\n            // this.movementvector = {x:0,y:0};\r\n        }\r\n        resetmovementvector() {\r\n            this.movementvector = { x: 0, y: 0 };\r\n        }\r\n        movetowards(destination, during = Infinity, callback = () => { }) {\r\n            this.destination = destination;\r\n            this.movetimer.ms = [during];\r\n            // console.log(during);\r\n            this.movetimer.restart();\r\n            this.movecallback = callback;\r\n        }\r\n    }\r\n    Bodies.Mobility = Mobility;\r\n    // export abstract class Animated extends Mobility {\r\n    //   public    paused      : boolean = false;\r\n    //   protected anims       : Array<Composite.Animation>;\r\n    //   protected timers      : Time.Timeout[] = [];\r\n    //   protected currentanim : number = 0;\r\n    //   protected timings     : number[][] = [];\r\n    //   // private   currentFrame : number = 0;\r\n    //   constructor(frame: Composite.Frame){\r\n    //     super(frame);\r\n    //     this.anims = anims;\r\n    //     // this.currentAnim = this.anims[0];\r\n    //     for(let i = 0; i < this.anims.length; i++){\r\n    //       this.timers.push(new Time.Timeout([Infinity], \"\" + i));\r\n    //     }\r\n    //     // this.changeframe.paused = true;\r\n    //     // this.timeouts.push(this.changeframe);\r\n    //   }\r\n    //   public update(){\r\n    //     super.update();\r\n    //     // this.handleanimations();\r\n    //   }\r\n    //   public switchanim(animnumber: number){\r\n    //     if(animnumber < 0 || animnumber >= this.anims.length) return;\r\n    //     this.currentanim = animnumber;\r\n    //     this.timers[animnumber].restart();\r\n    //     this.anims[this.currentanim].currentFrame = 0;\r\n    //     this.myFrame.frame = [this.anims[this.currentanim]];\r\n    //     // this.changeframe.restart();\r\n    //   }\r\n    //   public settimings(timings: number[][]){\r\n    //     this.timings = timings;\r\n    //   }\r\n    // }\r\n})(Bodies || (Bodies = {}));\r\n\n\n//# sourceURL=webpack:///./src/engine/alacrity/_bodies.ts?\n}");

/***/ }),

/***/ "./src/engine/alacrity/_incarnations.ts":
/*!**********************************************!*\
  !*** ./src/engine/alacrity/_incarnations.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Incarnations: () => (/* binding */ Incarnations)\n/* harmony export */ });\n/* harmony import */ var _bodies__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_bodies */ \"./src/engine/alacrity/_bodies.ts\");\n\r\nvar Incarnations;\r\n(function (Incarnations) {\r\n    let Dir;\r\n    (function (Dir) {\r\n        Dir[Dir[\"up\"] = 0] = \"up\";\r\n        Dir[Dir[\"left\"] = 1] = \"left\";\r\n        Dir[Dir[\"down\"] = 2] = \"down\";\r\n        Dir[Dir[\"right\"] = 3] = \"right\";\r\n    })(Dir = Incarnations.Dir || (Incarnations.Dir = {}));\r\n    class Level {\r\n        // public cellbuild: T.CellBuild;\r\n        bodies = [];\r\n        representation;\r\n    }\r\n    Incarnations.Level = Level;\r\n    class Incarnated extends _bodies__WEBPACK_IMPORTED_MODULE_0__.Bodies.Mobility {\r\n        state = 0;\r\n        anims = [];\r\n        switchanimation(state) {\r\n            if (this.state == state)\r\n                return;\r\n            this.state = state;\r\n            this.myFrame.frame = [this.anims[this.state]];\r\n            this.anims[this.state].restart();\r\n        }\r\n    }\r\n    Incarnations.Incarnated = Incarnated;\r\n    class Fauna extends Incarnated {\r\n    }\r\n    Incarnations.Fauna = Fauna;\r\n    class Player extends Fauna {\r\n        // protected allstates = (1<<AniSt.count) - 1;\r\n        hp = { max: 3, current: 3 };\r\n        myCamera;\r\n    }\r\n    Incarnations.Player = Player;\r\n})(Incarnations || (Incarnations = {}));\r\n\n\n//# sourceURL=webpack:///./src/engine/alacrity/_incarnations.ts?\n}");

/***/ }),

/***/ "./src/engine/alacrity/time.ts":
/*!*************************************!*\
  !*** ./src/engine/alacrity/time.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Time: () => (/* binding */ Time)\n/* harmony export */ });\nvar Time;\r\n(function (Time) {\r\n    class Watch {\r\n        static lastTick = 0;\r\n        static currTick = 0;\r\n    }\r\n    class Delta {\r\n        static firstTick = 0;\r\n        static delta = 16;\r\n        static refresh() {\r\n            Watch.currTick = Date.now();\r\n            Delta.delta = Math.min(Watch.currTick - Watch.lastTick, 100);\r\n            Watch.lastTick = Watch.currTick;\r\n        }\r\n        static getTick() {\r\n            return Watch.currTick;\r\n        }\r\n    }\r\n    Time.Delta = Delta;\r\n    class Timeout {\r\n        ms;\r\n        step = 0;\r\n        end;\r\n        start;\r\n        cyclic = false;\r\n        deletion = false;\r\n        paused = false;\r\n        pauseTime = 0;\r\n        static allPaused = false;\r\n        static pausedAtPause = new Set();\r\n        static pool = new Set();\r\n        trigName;\r\n        constructor(ms, triggerName, cyclic = false) {\r\n            this.ms = ms;\r\n            this.trigName = triggerName;\r\n            this.cyclic = cyclic;\r\n            this.start = Watch.currTick;\r\n            if (ms[0] === Infinity)\r\n                this.end = Infinity;\r\n            else\r\n                this.end = Watch.currTick + ms[0];\r\n            Timeout.pool.add(this);\r\n            if (Timeout.allPaused)\r\n                this.pause();\r\n        }\r\n        reset() {\r\n            this.start = Watch.currTick;\r\n            if (this.ms[this.step] === Infinity)\r\n                this.end = Infinity;\r\n            else\r\n                this.end = Watch.currTick + this.ms[this.step];\r\n        }\r\n        restart() {\r\n            this.paused = false;\r\n            this.step = 0;\r\n            this.reset();\r\n        }\r\n        static pauseAll() {\r\n            if (Timeout.allPaused)\r\n                return;\r\n            for (let t of Timeout.pool) {\r\n                if (t.paused)\r\n                    Timeout.pausedAtPause.add(t);\r\n                else\r\n                    t.pause();\r\n            }\r\n            Timeout.allPaused = true;\r\n        }\r\n        static resumeAll() {\r\n            if (!Timeout.allPaused)\r\n                return;\r\n            let unpause = new Set(Timeout.pool);\r\n            for (let t of Timeout.pausedAtPause) {\r\n                unpause.delete(t);\r\n            }\r\n            for (let t of unpause) {\r\n                t.resume();\r\n            }\r\n            Timeout.pausedAtPause.clear();\r\n            Timeout.allPaused = false;\r\n        }\r\n        pause() {\r\n            this.pauseTime = Watch.currTick;\r\n            this.paused = true;\r\n        }\r\n        resume() {\r\n            this.start += Watch.currTick - this.pauseTime;\r\n            if (this.end === Infinity) { }\r\n            else\r\n                this.end += Watch.currTick - this.pauseTime;\r\n            this.pauseTime = 0;\r\n            this.paused = false;\r\n        }\r\n        getTimeoutTicks() {\r\n            return Watch.currTick - this.start;\r\n        }\r\n        test() {\r\n            if (!this.paused) {\r\n                if (this.end <= Watch.currTick) {\r\n                    if (this.cyclic)\r\n                        this.step++;\r\n                    if (this.step >= this.ms.length) {\r\n                        this.step = 0;\r\n                    }\r\n                    this.start = Watch.currTick;\r\n                    if (this.end !== Infinity)\r\n                        this.end = Watch.currTick + this.ms[this.step];\r\n                    return { name: this.trigName, state: \"triggered\" };\r\n                }\r\n                else\r\n                    return { name: this.trigName, state: \"active\" };\r\n            }\r\n            else {\r\n                if (this.end === Infinity) { }\r\n                else\r\n                    this.end += Delta.delta;\r\n                return { name: this.trigName, state: \"paused\" };\r\n            }\r\n        }\r\n    }\r\n    Time.Timeout = Timeout;\r\n})(Time || (Time = {}));\r\n\n\n//# sourceURL=webpack:///./src/engine/alacrity/time.ts?\n}");

/***/ }),

/***/ "./src/engine/games.ts":
/*!*****************************!*\
  !*** ./src/engine/games.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Games)\n/* harmony export */ });\n/* harmony import */ var _alacrity_time__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./alacrity/time */ \"./src/engine/alacrity/time.ts\");\n/* harmony import */ var _systems_system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./systems/_system */ \"./src/engine/systems/_system.ts\");\n/* harmony import */ var _alacrity_bodies__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./alacrity/_bodies */ \"./src/engine/alacrity/_bodies.ts\");\n/* harmony import */ var _systems_keyboard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./systems/keyboard */ \"./src/engine/systems/keyboard.ts\");\n/* harmony import */ var _systems_touch__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./systems/touch */ \"./src/engine/systems/touch.ts\");\n/* harmony import */ var _systems_physics__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./systems/physics */ \"./src/engine/systems/physics.ts\");\n/* harmony import */ var _render_assets__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./render/assets */ \"./src/engine/render/assets.ts\");\n/* harmony import */ var _render_composite__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./render/composite */ \"./src/engine/render/composite.ts\");\n/* harmony import */ var _systems_camera__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./systems/camera */ \"./src/engine/systems/camera.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Games {\r\n    static pool = [];\r\n    static gamephysics;\r\n    static uiphysics;\r\n    async load() { return; }\r\n    // public abstract run() : void;\r\n    player;\r\n    paused = false;\r\n    rootFolder = \"_assets/\";\r\n    cellbuild;\r\n    fileextensions = [\"png\", \"gani\", \"wav\", \"csv\"];\r\n    gameframe;\r\n    currentLevel = undefined;\r\n    constructor() {\r\n        Games.pool.push(this);\r\n    }\r\n    async initialize(keyboard = true, touch = true) {\r\n        _alacrity_time__WEBPACK_IMPORTED_MODULE_0__.Time.Delta.refresh();\r\n        if (keyboard)\r\n            new _systems_keyboard__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\r\n        if (touch)\r\n            new _systems_touch__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\r\n        Games.gamephysics = new _systems_physics__WEBPACK_IMPORTED_MODULE_5__[\"default\"]();\r\n        await Promise.all(await _render_assets__WEBPACK_IMPORTED_MODULE_6__[\"default\"].loadAllExtInFolder(this.rootFolder + this.gamename + '/', this.fileextensions));\r\n    }\r\n    run() {\r\n        _alacrity_time__WEBPACK_IMPORTED_MODULE_0__.Time.Delta.refresh();\r\n        _systems_system__WEBPACK_IMPORTED_MODULE_1__[\"default\"].refresh();\r\n        if (!this.paused)\r\n            _alacrity_bodies__WEBPACK_IMPORTED_MODULE_2__.Bodies.Alacrity.refresh();\r\n        // else Bodies.Alacrity.refreshsome(this.ui);\r\n        // this.gameframe.camera.refresh();\r\n        _alacrity_bodies__WEBPACK_IMPORTED_MODULE_2__.Bodies.Alacrity.resetallmovements();\r\n    }\r\n    async newLevel(leveln) {\r\n        if (this.currentLevel !== undefined) {\r\n            for (let r of this.currentLevel.representation) {\r\n                r.rprops.delete = true;\r\n            }\r\n            for (let b of this.currentLevel.bodies) {\r\n                b.myFrame.rprops.delete = true;\r\n            }\r\n            Games.gamephysics.collisionpool = [];\r\n        }\r\n        let level = this.levels[leveln];\r\n        await level.build(this);\r\n        if (this.currentLevel === undefined) {\r\n            this.gameframe = new _render_composite__WEBPACK_IMPORTED_MODULE_7__.Composite.Frame([\r\n                ...level.representation,\r\n                ...level.bodies.map((a) => a.myFrame),\r\n                // Debug.Grid.see(collisiongrid, {x:0,y:0,w:40*16,h:40*16})\r\n            ]);\r\n            this.gameframe.camera = new _systems_camera__WEBPACK_IMPORTED_MODULE_8__[\"default\"](this.srcview, { x: 0, y: 0, ...level.levelsize });\r\n        }\r\n        else {\r\n            this.gameframe.camera.setbounds({ x: 0, y: 0, ...level.levelsize });\r\n            this.gameframe.addtocomposition([\r\n                ...level.representation,\r\n                ...level.bodies.map((a) => a.myFrame),\r\n            ]);\r\n        }\r\n        this.gameframe.camera.cameraman.actor = this.player;\r\n        this.player.myCamera = this.gameframe.camera;\r\n        return level;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/games.ts?\n}");

/***/ }),

/***/ "./src/engine/parsers/iniparser.ts":
/*!*****************************************!*\
  !*** ./src/engine/parsers/iniparser.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ IniParser)\n/* harmony export */ });\n/* harmony import */ var _render_assets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../render/assets */ \"./src/engine/render/assets.ts\");\n\r\nclass IniParser {\r\n    static loadCSV(file) {\r\n        return { tileYX: file.split('\\n').filter((a) => a != '').map(x => x.split(',').map(y => Number(y))) };\r\n    }\r\n    static async loadIni(iniFileName) {\r\n        let tiles = [];\r\n        let npcs = \"\";\r\n        let collisions = [];\r\n        let tileset;\r\n        let tilesetwidth;\r\n        let square;\r\n        let playLayer;\r\n        let file = \"\";\r\n        // const lvlPath = iniFileName.split('.')[0];\r\n        const inifile = _render_assets__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getText(await _render_assets__WEBPACK_IMPORTED_MODULE_0__[\"default\"].addText(iniFileName));\r\n        // const iniFile = await Assets.getText(iniFileName);\r\n        const iniLines = inifile.split('\\n');\r\n        for (let i = 0; i < iniLines.length; i++) {\r\n            const currLine = iniLines[i].split(' ');\r\n            switch (currLine[0]) {\r\n                case \"TILESET\":\r\n                    const currParams = currLine[1].split(':');\r\n                    switch (currParams[0]) {\r\n                        case \"SQUARE\":\r\n                            square = { w: Number(currParams[1]), h: Number(currParams[1]) };\r\n                            break;\r\n                        case \"FILE\":\r\n                            tileset = _render_assets__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getTexture(await _render_assets__WEBPACK_IMPORTED_MODULE_0__[\"default\"].addImage(currParams[1]));\r\n                            file = currParams[1];\r\n                            // tilesetwidth = Assets.getTextureWidth(currParams[1]);\r\n                            // console.log(tilesetwidth)\r\n                            break;\r\n                    }\r\n                    ;\r\n                    break;\r\n                case \"PLAYGROUND\":\r\n                    playLayer = Number(currLine[1]);\r\n                    break;\r\n                case \"CSV\":\r\n                    let props = currLine[1].split(':');\r\n                    const tileLayer = _render_assets__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getText(await _render_assets__WEBPACK_IMPORTED_MODULE_0__[\"default\"].addText(props[1]));\r\n                    tiles[Number(props[0])] = { tileYX: tileLayer.split('\\n').filter((a) => a != '').map(x => x.split(',').map(y => Number(y))) };\r\n                    break;\r\n                case \"NPCS\":\r\n                    let npcsInfo = _render_assets__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getText(await _render_assets__WEBPACK_IMPORTED_MODULE_0__[\"default\"].addText(currLine[1]));\r\n                    npcs = npcsInfo /* .replace(/\\n(?!\\Z)/g,',').split(',') */;\r\n                    break;\r\n                case \"COLLISION\":\r\n                    const collisionLn = _render_assets__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getText(await _render_assets__WEBPACK_IMPORTED_MODULE_0__[\"default\"].addText(currLine[1]));\r\n                    const ln = collisionLn.trim().split('\\n');\r\n                    let coll = [];\r\n                    for (let l of ln) {\r\n                        coll.push(l.split(',').map((y) => Number(y) < 0 ? false : true));\r\n                    }\r\n                    collisions.push(coll);\r\n                    console.log(collisions);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            ;\r\n        }\r\n        tilesetwidth = _render_assets__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getTextureWidth(file) - (_render_assets__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getTextureWidth(file) % square.w);\r\n        return {\r\n            tiles: tiles,\r\n            npcs: npcs,\r\n            collisions: collisions,\r\n            tileset: tileset,\r\n            tilesetwidth: tilesetwidth,\r\n            square: square,\r\n            playLayer: playLayer,\r\n            grid: { w: tiles[0].tileYX[0].length, h: tiles[0].tileYX.length }\r\n        };\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/parsers/iniparser.ts?\n}");

/***/ }),

/***/ "./src/engine/parsers/tiledParser.ts":
/*!*******************************************!*\
  !*** ./src/engine/parsers/tiledParser.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Tiled)\n/* harmony export */ });\n/* harmony import */ var _render_render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../render/_render */ \"./src/engine/render/_render.ts\");\n/* harmony import */ var _render_composite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../render/composite */ \"./src/engine/render/composite.ts\");\n/* harmony import */ var _render_textures__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../render/textures */ \"./src/engine/render/textures.ts\");\n/* harmony import */ var _render_assets__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../render/assets */ \"./src/engine/render/assets.ts\");\n/**\r\n *\r\n * Send a 2char string and returns tile position in pics1_dyl.png array\r\n *\r\n * TODO: Links, Signs, NPCs, Chests and Baddies\r\n *\r\n *  */\r\n\r\n\r\n\r\n\r\nclass Tiled extends _render_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info {\r\n    static blit(cellbuild, prefix) {\r\n        let i = -1;\r\n        return cellbuild.tiles.map(layer => {\r\n            i++;\r\n            const framebuffer = Tiled.gl.createFramebuffer();\r\n            Tiled.gl.bindFramebuffer(Tiled.gl.FRAMEBUFFER, Tiled.framebuffer);\r\n            const cellWidth = cellbuild.square.w * layer.tileYX[0].length;\r\n            const cellHeight = cellbuild.square.h * layer.tileYX.length;\r\n            const tilesetTW = (cellbuild.tilesetwidth / cellbuild.square.w);\r\n            // const tilesetTH  =  game.assetList.tileset.h  / game.assetList.square    ;\r\n            let cellTex = _render_textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].createTexToBlitOn(cellWidth, cellHeight);\r\n            Tiled.gl.framebufferTexture2D(Tiled.gl.FRAMEBUFFER, Tiled.gl.COLOR_ATTACHMENT0, Tiled.gl.TEXTURE_2D, cellbuild.tileset, 0);\r\n            Tiled.gl.bindTexture(Tiled.gl.TEXTURE_2D, cellTex);\r\n            for (let i = 0; i < layer.tileYX.length; i++) {\r\n                for (let x = 0; x < layer.tileYX[i].length; x++) {\r\n                    Tiled.gl.copyTexSubImage2D(Tiled.gl.TEXTURE_2D, 0, x * cellbuild.square.w, i * cellbuild.square.h, \r\n                    // 0,\r\n                    layer.tileYX[i][x] % tilesetTW * cellbuild.square.w, Math.floor(layer.tileYX[i][x] / tilesetTW) * cellbuild.square.h, cellbuild.square.w, cellbuild.square.h);\r\n                }\r\n            }\r\n            // console.log(cellTex);\r\n            // Tiled.gl.deleteFramebuffer(framebuffer)\r\n            _render_assets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].addTexture(prefix + i, cellTex, { w: cellWidth, h: cellHeight });\r\n            let a = new _render_composite__WEBPACK_IMPORTED_MODULE_1__.Composite.Image(prefix + i, { x: 0, y: 0, w: cellWidth, h: cellHeight }, { x: 0, y: 0, w: cellWidth, h: cellHeight });\r\n            let b = new _render_composite__WEBPACK_IMPORTED_MODULE_1__.Composite.Snap([a]);\r\n            b.rprops.layer = i - cellbuild.playLayer;\r\n            return b;\r\n        });\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/parsers/tiledParser.ts?\n}");

/***/ }),

/***/ "./src/engine/physics/_collision.ts":
/*!******************************************!*\
  !*** ./src/engine/physics/_collision.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Collision)\n/* harmony export */ });\nclass Collision {\r\n    deleteMe = false;\r\n    // public cpool : Array<Collision> = [];\r\n    // public dbgName : string = \"not defined collision\";\r\n    from;\r\n    to;\r\n    type;\r\n    self;\r\n    offY;\r\n    offX;\r\n    width;\r\n    height;\r\n    ogBounds = { x: 0, y: 0, w: 0, h: 0 };\r\n    padding = { x: 1, y: 1 };\r\n    constructor(from, to, type) {\r\n        this.from = from;\r\n        this.to = to;\r\n        this.type = type;\r\n        // this.padding = padding * Globals.zoom;\r\n        // this.npc = null;\r\n        // this.cpool.push(this);\r\n    }\r\n    update(to) {\r\n        for (let e of to) {\r\n            this.intersect(e);\r\n        }\r\n    }\r\n    static inBounds(x, y, bounds) {\r\n        return x > bounds.x &&\r\n            x < bounds.x + bounds.w &&\r\n            y > bounds.y &&\r\n            y < bounds.y + bounds.h;\r\n    }\r\n    computeCollidePoints(bd, padding = { x: 1, y: 1 }, res = { w: 1, h: 1 }, sizeBit = 0) {\r\n        let mercy = [[\r\n                /* [0][0] */ Math.max(0, Math.floor((bd.x + padding.x * 2) / res.w)) >>> sizeBit,\r\n                /* [0][1] */ Math.max(0, Math.floor((bd.x) / res.w)) >>> sizeBit,\r\n                /* [0][2] */ Math.max(0, Math.floor((bd.x + bd.w - padding.x * 2) / res.w)) >>> sizeBit,\r\n                /* [0][3] */ Math.max(0, Math.floor((bd.x + bd.w) / res.w)) >>> sizeBit\r\n            ], [\r\n                /* [1][0] */ Math.max(0, Math.floor((bd.y + padding.y * 2) / res.h)),\r\n                /* [1][1] */ Math.max(0, Math.floor((bd.y) / res.h)),\r\n                /* [1][2] */ Math.max(0, Math.floor((bd.y + bd.h - padding.y * 2) / res.h)),\r\n                /* [1][3] */ Math.max(0, Math.floor((bd.y + bd.h) / res.h))\r\n            ]];\r\n        // [dir][xy][pt#]\r\n        return [\r\n            [[mercy[0][0], mercy[0][2]], [mercy[1][1], mercy[1][1]]],\r\n            [[mercy[0][1], mercy[0][1]], [mercy[1][0], mercy[1][2]]],\r\n            [[mercy[0][0], mercy[0][2]], [mercy[1][3], mercy[1][3]]],\r\n            [[mercy[0][3], mercy[0][3]], [mercy[1][0], mercy[1][2]]]\r\n        ];\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/physics/_collision.ts?\n}");

/***/ }),

/***/ "./src/engine/physics/gridCollision.ts":
/*!*********************************************!*\
  !*** ./src/engine/physics/gridCollision.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CollisionGrid)\n/* harmony export */ });\n/* harmony import */ var _states__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./states */ \"./src/engine/physics/states.ts\");\n/* harmony import */ var _collision__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_collision */ \"./src/engine/physics/_collision.ts\");\n\r\n\r\n// import Game from '../../game/games';\r\n// import Games from '../../game/games';\r\nclass CollisionGrid extends _collision__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\r\n    // public npc;\r\n    padding = { x: 2, y: 2 };\r\n    resolution = 16;\r\n    walls = []; // walls[y][x]\r\n    // private game  : Games;\r\n    // private square  : number;\r\n    // private displaytileSize  : number;\r\n    // prote padding : T.Box = {w:1,h:1};\r\n    static sizeBit = 5; //32 bit\r\n    static bitSize = 1 << this.sizeBit;\r\n    ylimit;\r\n    xlimit;\r\n    constructor(boolArr, resolution, to, type) {\r\n        super(_states__WEBPACK_IMPORTED_MODULE_0__.CollideLayers.grid, to, type);\r\n        this.ylimit = boolArr.length;\r\n        let gridwidth = boolArr[0].length;\r\n        this.xlimit = Math.ceil(boolArr[0].length / CollisionGrid.bitSize);\r\n        // console.log(boolArr)\r\n        let flatArr = boolArr.flat(Infinity);\r\n        let passes = 0;\r\n        this.resolution = resolution;\r\n        for (let idx = 0; idx < flatArr.length; idx += gridwidth) {\r\n            // console.log(\"/\")\r\n            this.walls.push(Array());\r\n            // let bAidx : number;\r\n            for (let i = 0; i < gridwidth; i += CollisionGrid.bitSize) {\r\n                let stuff = 0;\r\n                for (let bAidx = 0; bAidx < CollisionGrid.bitSize; bAidx++) {\r\n                    if (i + bAidx >= gridwidth)\r\n                        break;\r\n                    if (flatArr[idx + i + bAidx] == true) {\r\n                        stuff |= 1 << bAidx;\r\n                    }\r\n                }\r\n                // console.log(stuff);\r\n                this.walls[passes].push(stuff);\r\n            }\r\n            passes += 1;\r\n            // idx += game.levelWidth;\r\n        }\r\n        // console.log(this.walls);\r\n    }\r\n    //gXbd and gYbd are in grid coordinates\r\n    againstGrid(gXbd, gYbd, bdX) {\r\n        let xIndex = gXbd;\r\n        let yIndex = gYbd;\r\n        if (yIndex >= this.ylimit || yIndex < 0)\r\n            return false;\r\n        const bitX = Math.floor(((bdX) / this.resolution)) % (CollisionGrid.bitSize); //CollisionGrid.sizeBit;\r\n        let bShift = bitX;\r\n        let checkX = 1 << bShift;\r\n        if (xIndex >= this.xlimit || xIndex < 0)\r\n            return false;\r\n        return ((this.walls[yIndex][xIndex] & checkX) != 0);\r\n    }\r\n    testWall(point) {\r\n        return this.againstGrid(Math.floor(point.x / this.resolution) >>> CollisionGrid.sizeBit, Math.floor(point.y / this.resolution), point.x);\r\n    }\r\n    /**\r\n     *\r\n     * @param arch\r\n     * @returns 0 up to 3 right boolean array of if a wall is nearby in each direction\r\n     */\r\n    intersect(bd) {\r\n        // if(bd.dbgName==\"scorpion\"){\r\n        //   console.log(\"TOUTE\");\r\n        // }\r\n        const collidePoints = this.computeCollidePoints({ x: bd.pos.x + bd.hitbox.x, y: bd.pos.y + bd.hitbox.y, w: bd.hitbox.w, h: bd.hitbox.h }, this.padding, { w: this.resolution, h: this.resolution }, CollisionGrid.sizeBit);\r\n        // console.log(\"Collide Points:\", collidePoints);\r\n        //check top\r\n        this.checkCollisionDirection(bd, 0, collidePoints[0][0][0], collidePoints[0][1][0], bd.pos.x + bd.hitbox.x + 2 * this.padding.x, collidePoints[0][0][1], collidePoints[0][1][1], bd.pos.x + bd.hitbox.x + bd.hitbox.w - 2 * this.padding.x);\r\n        //check left\r\n        this.checkCollisionDirection(bd, 1, \r\n        // collidePoints[1][0][0],collidePoints[1][1][0], collidePoints[1][0][0],\r\n        // collidePoints[1][0][1],collidePoints[1][1][1], collidePoints[1][0][1])\r\n        collidePoints[1][0][0], collidePoints[1][1][0], bd.pos.x + bd.hitbox.x, collidePoints[1][0][1], collidePoints[1][1][1], bd.pos.x + bd.hitbox.x);\r\n        //check below\r\n        this.checkCollisionDirection(bd, 2, collidePoints[2][0][0], collidePoints[2][1][0], bd.pos.x + bd.hitbox.x + 2 * this.padding.x, collidePoints[2][0][1], collidePoints[2][1][1], bd.pos.x + bd.hitbox.x + bd.hitbox.w - 2 * this.padding.x);\r\n        //check right\r\n        this.checkCollisionDirection(bd, 3, collidePoints[3][0][0], collidePoints[3][1][0], bd.pos.x + bd.hitbox.x + bd.hitbox.w - this.padding.x, collidePoints[3][0][1], collidePoints[3][1][1], bd.pos.x + bd.hitbox.x + bd.hitbox.w - this.padding.x);\r\n        // return result;\r\n    }\r\n    checkCollisionDirection(bd, direction, x1, y1, posX1, x2, y2, posX2) {\r\n        const collision1 = this.againstGrid(x1, y1, posX1);\r\n        const collision2 = this.againstGrid(x2, y2, posX2);\r\n        // console.log(`Direction: ${direction}, Collision1: ${collision1}, Collision2: ${collision2}`);\r\n        bd.activeeffects[direction] |=\r\n            collision1 || collision2\r\n                ? this.type\r\n                : _states__WEBPACK_IMPORTED_MODULE_0__.CollideTypes.none;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/physics/gridCollision.ts?\n}");

/***/ }),

/***/ "./src/engine/physics/npcCollision.ts":
/*!********************************************!*\
  !*** ./src/engine/physics/npcCollision.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ NPCCollision)\n/* harmony export */ });\n/* harmony import */ var _states__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./states */ \"./src/engine/physics/states.ts\");\n/* harmony import */ var _collision__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_collision */ \"./src/engine/physics/_collision.ts\");\n\r\n\r\n// import Collision from \"../collisions/_collision\"\r\nclass NPCCollision extends _collision__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\r\n    // public self : Bodies.Embodiment;\r\n    constructor(self, from, to, types) {\r\n        super(from, to, types);\r\n        this.self = self;\r\n        this.padding = { x: 8, y: 8 };\r\n    }\r\n    intersect(bd) {\r\n        const body = { x: bd.pos.x + bd.hitbox.x, y: bd.pos.y + bd.hitbox.y, w: bd.hitbox.w, h: bd.hitbox.h };\r\n        const collidePoints = this.computeCollidePoints(body, this.padding);\r\n        const npcBounds = {\r\n            x: this.self.pos.x + this.self.hitbox.x,\r\n            y: this.self.pos.y + this.self.hitbox.y,\r\n            w: this.self.hitbox.w,\r\n            h: this.self.hitbox.h\r\n        };\r\n        let applyEffects = [\r\n            _states__WEBPACK_IMPORTED_MODULE_0__.CollideTypes.none,\r\n            _states__WEBPACK_IMPORTED_MODULE_0__.CollideTypes.none,\r\n            _states__WEBPACK_IMPORTED_MODULE_0__.CollideTypes.none,\r\n            _states__WEBPACK_IMPORTED_MODULE_0__.CollideTypes.none\r\n        ];\r\n        if ((body.x > npcBounds.x && body.x + this.padding.x < npcBounds.x + npcBounds.w) || (body.x + body.w - this.padding.x > npcBounds.x && body.x + body.w < npcBounds.x + npcBounds.w)) {\r\n            // Check top\r\n            applyEffects[0] |= ((npcBounds.y + npcBounds.h) - body.y > 0 && body.y > npcBounds.y) ? this.type : _states__WEBPACK_IMPORTED_MODULE_0__.CollideTypes.none;\r\n            // Check below\r\n            applyEffects[2] |= (npcBounds.y - (body.y + body.h) < 0 && body.y + body.h < npcBounds.y + npcBounds.h) ? this.type : _states__WEBPACK_IMPORTED_MODULE_0__.CollideTypes.none;\r\n        }\r\n        if ((body.y > npcBounds.y && body.y + this.padding.y < npcBounds.y + npcBounds.h) || (body.y + body.w - this.padding.y > npcBounds.y && body.y + body.w < npcBounds.y + npcBounds.h)) {\r\n            // Check left\r\n            applyEffects[1] |= ((npcBounds.x + npcBounds.w) - body.x > 0 && body.x > npcBounds.x) ? this.type : _states__WEBPACK_IMPORTED_MODULE_0__.CollideTypes.none;\r\n            // Check right\r\n            // console.log(\"npcbdx\" + npcBounds.x + \" rightmost:\" + (body.x + body.w) +\" lt0:\" + (npcBounds.x - body.x + body.w) + \" limits:\" + (body.x + body.w < npcBounds.x + npcBounds.w))\r\n            applyEffects[3] |= (npcBounds.x - (body.x + body.w) < 0 && body.x + body.w < npcBounds.x + npcBounds.w) ? this.type : _states__WEBPACK_IMPORTED_MODULE_0__.CollideTypes.none;\r\n        }\r\n        // Apply effects\r\n        for (let i = 0; i < 4; i++) {\r\n            bd.activeeffects[i] |= applyEffects[i];\r\n        }\r\n    }\r\n    // Helper function to check bounds\r\n    static checkBounds(points, bounds) {\r\n        return _collision__WEBPACK_IMPORTED_MODULE_1__[\"default\"].inBounds(points[0][0], points[1][0], bounds) ||\r\n            _collision__WEBPACK_IMPORTED_MODULE_1__[\"default\"].inBounds(points[0][1], points[1][1], bounds);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/physics/npcCollision.ts?\n}");

/***/ }),

/***/ "./src/engine/physics/states.ts":
/*!**************************************!*\
  !*** ./src/engine/physics/states.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CollideLayers: () => (/* binding */ CollideLayers),\n/* harmony export */   CollideTypes: () => (/* binding */ CollideTypes)\n/* harmony export */ });\nvar CollideTypes;\r\n(function (CollideTypes) {\r\n    CollideTypes[CollideTypes[\"none\"] = 1] = \"none\";\r\n    CollideTypes[CollideTypes[\"block\"] = 2] = \"block\";\r\n    CollideTypes[CollideTypes[\"hurt\"] = 4] = \"hurt\";\r\n    CollideTypes[CollideTypes[\"interact\"] = 8] = \"interact\";\r\n    CollideTypes[CollideTypes[\"climbable\"] = 16] = \"climbable\";\r\n    CollideTypes[CollideTypes[\"water\"] = 32] = \"water\";\r\n    CollideTypes[CollideTypes[\"instakill\"] = 64] = \"instakill\";\r\n    CollideTypes[CollideTypes[\"get\"] = 128] = \"get\";\r\n    CollideTypes[CollideTypes[\"all\"] = 255] = \"all\";\r\n})(CollideTypes || (CollideTypes = {}));\r\nvar CollideLayers;\r\n(function (CollideLayers) {\r\n    CollideLayers[CollideLayers[\"none\"] = 1] = \"none\";\r\n    CollideLayers[CollideLayers[\"player\"] = 2] = \"player\";\r\n    CollideLayers[CollideLayers[\"npc\"] = 4] = \"npc\";\r\n    CollideLayers[CollideLayers[\"grid\"] = 8] = \"grid\";\r\n    CollideLayers[CollideLayers[\"interactable\"] = 16] = \"interactable\";\r\n    CollideLayers[CollideLayers[\"all\"] = 31] = \"all\";\r\n})(CollideLayers || (CollideLayers = {}));\r\n\n\n//# sourceURL=webpack:///./src/engine/physics/states.ts?\n}");

/***/ }),

/***/ "./src/engine/render/_render.ts":
/*!**************************************!*\
  !*** ./src/engine/render/_render.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Render: () => (/* binding */ Render)\n/* harmony export */ });\n// import S\r\nvar Render;\r\n(function (Render) {\r\n    class Info {\r\n        static MAXLAYERS = 256;\r\n        static vbuffer;\r\n        static Rframebuffer;\r\n        static framebuffer;\r\n        static renderbuffer;\r\n        static gl;\r\n        static txt;\r\n        static textCanvas;\r\n    }\r\n    Render.Info = Info;\r\n    class GL extends Info {\r\n        constructor(width, height) {\r\n            super();\r\n            if (!Info.txt && document.getElementById('text') != undefined) {\r\n                Info.txt = (() => {\r\n                    // document.getElementsByTagName('body')[0].clientWidth\r\n                    document.getElementById('text').setAttribute('width', document.getElementsByTagName('body')[0].clientWidth + '');\r\n                    document.getElementById('text').setAttribute('height', document.getElementsByTagName('body')[0].clientHeight + '');\r\n                    return document.querySelector('#text').\r\n                        getContext('2d');\r\n                })();\r\n                Info.textCanvas = document.querySelector('#text');\r\n            }\r\n            if (!Info.gl) {\r\n                Info.gl = (() => {\r\n                    document.getElementById(\"canvas\").setAttribute(\"width\", width);\r\n                    document.getElementById(\"canvas\").setAttribute(\"height\", height);\r\n                    let ctx = document.querySelector(\"#canvas\").\r\n                        getContext(\"webgl2\", { premultipliedAlpha: false });\r\n                    ctx.enable(ctx.BLEND);\r\n                    ctx.blendFunc(ctx.SRC_ALPHA, ctx.ONE_MINUS_SRC_ALPHA);\r\n                    return ctx;\r\n                })();\r\n                Info.framebuffer = Info.gl.createFramebuffer();\r\n                Info.Rframebuffer = Info.gl.createFramebuffer();\r\n                Info.renderbuffer = Info.gl.createRenderbuffer();\r\n                Info.vbuffer = Info.gl.createBuffer();\r\n                Info.gl.bindBuffer(Info.gl.ARRAY_BUFFER, Info.vbuffer);\r\n                Info.gl.bufferData(Info.gl.ARRAY_BUFFER, new Float32Array([\r\n                    1, 0, 0, 0, 0, 1,\r\n                    1, 0, 0, 1, 1, 1 // Triangle 2\r\n                ]), Info.gl.STATIC_DRAW);\r\n                Info.gl.clearColor(0, 0.5, 0, 0);\r\n                Info.gl.bindFramebuffer(Info.gl.READ_FRAMEBUFFER, Info.Rframebuffer);\r\n                Info.gl.bindFramebuffer(Info.gl.DRAW_FRAMEBUFFER, Info.framebuffer);\r\n                Info.gl.bindRenderbuffer(Info.gl.RENDERBUFFER, Info.renderbuffer);\r\n                Info.gl.renderbufferStorage(Info.gl.RENDERBUFFER, Info.gl.RGBA8, 2000, 2000);\r\n                Info.gl.framebufferRenderbuffer(Info.gl.DRAW_FRAMEBUFFER, Info.gl.COLOR_ATTACHMENT0, Info.gl.RENDERBUFFER, Info.renderbuffer);\r\n                Info.gl.readBuffer(Info.gl.COLOR_ATTACHMENT0);\r\n                Info.gl.drawBuffers([Info.gl.COLOR_ATTACHMENT0]);\r\n                // Info.gl.drawingBufferColorSpace = \"display-p3\";\r\n                // Info.gl.unpackColorSpace = \"display-p3\";\r\n            }\r\n        }\r\n        static resizeCanvasToDisplaySize(canvas, multiplier) {\r\n            multiplier = multiplier || 1;\r\n            const width = canvas.clientWidth * multiplier | 0;\r\n            const height = canvas.clientHeight * multiplier | 0;\r\n            if (canvas.width !== width || canvas.height !== height) {\r\n                canvas.width = width;\r\n                canvas.height = height;\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n    Render.GL = GL;\r\n})(Render || (Render = {}));\r\n\n\n//# sourceURL=webpack:///./src/engine/render/_render.ts?\n}");

/***/ }),

/***/ "./src/engine/render/_shaders.ts":
/*!***************************************!*\
  !*** ./src/engine/render/_shaders.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Shader)\n/* harmony export */ });\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_render */ \"./src/engine/render/_render.ts\");\n\r\nclass Shader extends _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info {\r\n    static shaders = {};\r\n    static fallbackShader = 'normal';\r\n    static previousShader = \"\";\r\n    static currShader;\r\n    static getShader(id = '') {\r\n        let shader = Shader.shaders[id] || Shader.shaders[Shader.fallbackShader] || undefined;\r\n        if (shader === undefined) {\r\n            console.log(\"Shader \" + id + \" doesn't exist and couldn't find fallback shader \" + Shader.fallbackShader);\r\n        }\r\n        return shader;\r\n    }\r\n    static compileShader(type, source) {\r\n        let shader = Shader.gl.createShader(type);\r\n        Shader.gl.shaderSource(shader, source);\r\n        Shader.gl.compileShader(shader);\r\n        let success = Shader.gl.getShaderParameter(shader, Shader.gl.COMPILE_STATUS);\r\n        if (success)\r\n            return shader;\r\n        console.debug(Shader.gl.getShaderInfoLog(shader));\r\n        Shader.gl.deleteShader(shader);\r\n        return null;\r\n    }\r\n    static createProgram(vertexShader, fragmentShader) {\r\n        let program = Shader.gl.createProgram();\r\n        Shader.gl.attachShader(program, vertexShader);\r\n        Shader.gl.attachShader(program, fragmentShader);\r\n        Shader.gl.linkProgram(program);\r\n        let success = Shader.gl.getProgramParameter(program, Shader.gl.LINK_STATUS);\r\n        if (success)\r\n            return program;\r\n        console.debug(Shader.gl.getProgramInfoLog(program));\r\n        Shader.gl.deleteProgram(program);\r\n        return null;\r\n    }\r\n    static passShader(cmp, plane) {\r\n        if (cmp.rprops.shaderID != undefined)\r\n            Shader.validateShader(cmp.rprops.shaderID);\r\n        else\r\n            Shader.validateShader(this.fallbackShader);\r\n        // console.log(Shader.currShader.name)\r\n        if (Shader.currShader != undefined) {\r\n            // for(const a in Shader.currShader.first){\r\n            //   // console.log(\"A\");\r\n            //   Shader.currShader.first[a]();\r\n            // }\r\n            for (const a of Shader.currShader.second) {\r\n                a();\r\n            }\r\n            for (const a of Shader.currShader.passes) {\r\n                a(cmp, plane);\r\n            }\r\n        }\r\n    }\r\n    static validateShader(shaderID) {\r\n        if (Shader.previousShader !== shaderID) {\r\n            Shader.currShader = Shader.shaders[shaderID];\r\n            if (Shader.currShader != undefined) {\r\n                Shader.initShader(Shader.currShader);\r\n                Shader.previousShader = shaderID;\r\n            }\r\n            else {\r\n                console.log('Using Fallback shader');\r\n                Shader.currShader = Shader.shaders[this.fallbackShader] || undefined;\r\n                if (Shader.currShader != undefined)\r\n                    Shader.initShader(Shader.currShader);\r\n                else\r\n                    console.log(\"Fallback shader undefined\");\r\n                Shader.previousShader = this.fallbackShader;\r\n            }\r\n        }\r\n    }\r\n    static initShader(sh) {\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.useProgram(sh.program);\r\n        for (const a of Shader.currShader.first) {\r\n            a();\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/render/_shaders.ts?\n}");

/***/ }),

/***/ "./src/engine/render/assets.ts":
/*!*************************************!*\
  !*** ./src/engine/render/assets.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Assets)\n/* harmony export */ });\n/* harmony import */ var _textures__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./textures */ \"./src/engine/render/textures.ts\");\n\r\nclass Assets {\r\n    static pathprefix = '';\r\n    static parser = new DOMParser();\r\n    static textures = {};\r\n    static texts = {};\r\n    static sounds = {};\r\n    static imgExts = ['png', 'jpg', 'gif', 'jpeg'];\r\n    static txtExts = ['nw', 'txt', 'vert', 'frag', 'gani', 'csv'];\r\n    static sndExts = ['wav', 'mp3'];\r\n    static audioContext;\r\n    static placeholder = \"_assets/blocking.png\";\r\n    static setprefix(prefix) {\r\n        this.pathprefix = prefix;\r\n    }\r\n    static getTexture(fileName) {\r\n        if (!Assets.textures[this.pathprefix + fileName]) {\r\n            console.log(\"Texture file not found or not loaded : \" + this.pathprefix + fileName);\r\n            return Assets.textures[this.placeholder];\r\n        }\r\n        return Assets.textures[this.pathprefix + fileName].t;\r\n    }\r\n    static getTextureWidth(fileName) {\r\n        if (!Assets.textures[this.pathprefix + fileName]) {\r\n            console.log(\"Texture file not found or not loaded : \" + this.pathprefix + fileName);\r\n            return -1;\r\n        }\r\n        return Assets.textures[this.pathprefix + fileName].w;\r\n    }\r\n    static getTextureHeight(fileName) {\r\n        if (!Assets.textures[this.pathprefix + fileName]) {\r\n            console.log(\"Texture file not found or not loaded : \" + this.pathprefix + fileName);\r\n            return -1;\r\n        }\r\n        return Assets.textures[this.pathprefix + fileName].h;\r\n    }\r\n    static getText(fileName) {\r\n        if (!Assets.texts[this.pathprefix + fileName]) {\r\n            console.log(\"Text file not found or not loaded : \" + this.pathprefix + fileName);\r\n            return \"\";\r\n        }\r\n        return Assets.texts[this.pathprefix + fileName];\r\n    }\r\n    static initAudio() {\r\n        // window.addEventListener('load', function() {\r\n        Assets.audioContext = new window.AudioContext();\r\n        // });\r\n    }\r\n    static addTexture(name, tex, size) {\r\n        Assets.textures[name] = { t: tex, ...size };\r\n    }\r\n    static async addImage(fileName) {\r\n        if (!Assets.textures[this.pathprefix + fileName]) {\r\n            let img = new Image();\r\n            img.src = this.pathprefix + fileName;\r\n            try {\r\n                await img.decode().then(() => {\r\n                    Assets.textures[this.pathprefix + fileName] = { t: _textures__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createTexture(img), w: img.width, h: img.height };\r\n                });\r\n            }\r\n            catch {\r\n                console.log(\"Error\");\r\n            }\r\n        }\r\n        return this.pathprefix + fileName;\r\n    }\r\n    static async addText(fileName) {\r\n        if (!Assets.texts[this.pathprefix + fileName]) {\r\n            Assets.texts[this.pathprefix + fileName] = await fetch(this.pathprefix + fileName).then((x) => x.text());\r\n        }\r\n        return this.pathprefix + fileName;\r\n    }\r\n    static async addSound(fileName) {\r\n        if (!Assets.sounds[this.pathprefix + fileName]) {\r\n            await fetch(this.pathprefix + fileName)\r\n                .then(response => response.arrayBuffer())\r\n                .then(arrayBuffer => Assets.audioContext.decodeAudioData(arrayBuffer))\r\n                .then(decodedAudio => {\r\n                Assets.sounds[this.pathprefix + fileName] = decodedAudio;\r\n            })\r\n                .catch(error => console.error('Error loading audio file:', error));\r\n        }\r\n        return this.pathprefix + fileName;\r\n    }\r\n    static playSound(fileName) {\r\n        if (!Assets.sounds[this.pathprefix + fileName]) {\r\n            Assets.addSound(this.pathprefix + fileName).then((file) => Assets.play(Assets.sounds[this.pathprefix + fileName]));\r\n        }\r\n        else {\r\n            Assets.play(Assets.sounds[this.pathprefix + fileName]);\r\n        }\r\n    }\r\n    static play(decodedAudio) {\r\n        let source = Assets.audioContext.createBufferSource();\r\n        source.buffer = decodedAudio;\r\n        source.connect(Assets.audioContext.destination);\r\n        source.start();\r\n    }\r\n    /**\r\n     *\r\n     * @param folderPath Folder to load files from\r\n     * @param ext File extension(s) to load\r\n     * @returns Relative path of files found\r\n     */\r\n    static async loadAllExtInFolder(folderPath, ext) {\r\n        let xhr = new XMLHttpRequest();\r\n        let jobs = [];\r\n        xhr.open('GET', folderPath, false);\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState === 4 && xhr.status === 200) {\r\n                let filesa = Assets.parser.parseFromString(xhr.responseText, \"text/html\").getElementsByTagName('a');\r\n                let files = [];\r\n                for (let i = 0; i < filesa.length; i++)\r\n                    files.push(filesa[i].getAttribute(\"href\"));\r\n                for (let file of files) {\r\n                    if (file.trim().length <= 0)\r\n                        continue;\r\n                    let fspl = file.split('.');\r\n                    let fileType = fspl[fspl.length - 1];\r\n                    if (fileType.endsWith('/'))\r\n                        continue;\r\n                    if (fileType.startsWith('?'))\r\n                        continue;\r\n                    if (ext.includes(fileType)) {\r\n                        if (Assets.imgExts.includes(fileType))\r\n                            jobs.push(Assets.addImage(folderPath + file));\r\n                        else if (Assets.txtExts.includes(fileType))\r\n                            jobs.push(Assets.addText(folderPath + file));\r\n                        else if (Assets.sndExts.includes(fileType))\r\n                            jobs.push(Assets.addSound(folderPath + file));\r\n                        else\r\n                            console.log('Incompatible file : ' + file);\r\n                    }\r\n                    else\r\n                        console.log('File is neither ' + ext.join(' or ') + ' : ' + file);\r\n                }\r\n            }\r\n        };\r\n        xhr.send();\r\n        await Promise.all(jobs);\r\n        return jobs;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/render/assets.ts?\n}");

/***/ }),

/***/ "./src/engine/render/composite.ts":
/*!****************************************!*\
  !*** ./src/engine/render/composite.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Composite: () => (/* binding */ Composite)\n/* harmony export */ });\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_render */ \"./src/engine/render/_render.ts\");\n/* harmony import */ var _shaders__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_shaders */ \"./src/engine/render/_shaders.ts\");\n/* harmony import */ var _textures__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./textures */ \"./src/engine/render/textures.ts\");\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./assets */ \"./src/engine/render/assets.ts\");\n/* harmony import */ var _alacrity_time__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../alacrity/time */ \"./src/engine/alacrity/time.ts\");\n\r\n\r\n\r\n\r\n\r\nvar Composite;\r\n(function (Composite_1) {\r\n    class Renderable extends _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info {\r\n        rprops;\r\n        texture;\r\n        file;\r\n        ready;\r\n        parent = undefined;\r\n        constructor() {\r\n            super();\r\n            this.rprops = {\r\n                srcrect: undefined,\r\n                dstrect: { x: 0, y: 0, w: 0, h: 0 },\r\n                pos: { x: 0, y: 0 },\r\n                flip: { flipx: false, flipy: false },\r\n                angle: 0,\r\n                scalex: 1,\r\n                scaley: 1,\r\n                layer: 0,\r\n                hidden: false,\r\n                delete: false\r\n            };\r\n        }\r\n        getclientbounds() {\r\n            return {\r\n                x: this.getclientleft(),\r\n                y: this.getclienttop(),\r\n                w: this.getclientwidth(),\r\n                h: this.getclientheight()\r\n            };\r\n        }\r\n        // add \"add\" methods to Snap, animation, frame (or simply composite?) \r\n        //// so parent is updated at addition (instead of pushing directly)\r\n        getclientleft() {\r\n            // console.log(this.rprops.pos.x)\r\n            if (!this.parent) {\r\n                return this.rprops.pos.x * this.getwidthratio(); // + (this.parent==undefined?0:this.parent.getclientleft());\r\n            }\r\n            return (this.rprops.pos.x + this.parent.getclientleft()) * this.getwidthratio();\r\n        }\r\n        getclienttop() {\r\n            return (this.rprops.pos.y + (this.parent == undefined ? 0 : this.parent.getclienttop())) * this.getwidthratio();\r\n        }\r\n        getclientwidth(dstrect = this.rprops.dstrect) {\r\n            return dstrect.w * this.getwidthratio();\r\n        }\r\n        getclientheight(dstrect = this.rprops.dstrect) {\r\n            return dstrect.h * this.getheightratio();\r\n            // removed by dead control flow\n{}\r\n        }\r\n        getwidthratio() {\r\n            if (this.parent != undefined) {\r\n                return (this.rprops.dstrect.w / this.rprops.srcrect.w) * this.parent.getwidthratio();\r\n            }\r\n            return this.rprops.dstrect.w / this.rprops.srcrect.w;\r\n        }\r\n        getheightratio() {\r\n            if (this.parent != undefined) {\r\n                return (this.rprops.dstrect.h / this.rprops.srcrect.h) * this.parent.getheightratio();\r\n            }\r\n            return this.rprops.dstrect.h / this.rprops.srcrect.h;\r\n        }\r\n    }\r\n    Composite_1.Renderable = Renderable;\r\n    // export class Text extends Renderable {\r\n    //   constructor(content: string, size: number, font: string, color: string){\r\n    //     super();\r\n    //     // Create a 2D canvas\r\n    //     // const textCanvas = Render.Info.txt;\r\n    //     // Draw text on the 2D canvas\r\n    //     Render.Info.txt.fillStyle = color;//'white';\r\n    //     Render.Info.txt.font = size + 'px' + ' ' + font; //'30px Arial' ;\r\n    //     Render.Info.txt.fillText(content, 0, 0);\r\n    //     let textsize = Render.Info.txt.measureText(content);\r\n    //     this.rprops.srcrect = {\r\n    //       x:0,\r\n    //       y:0,\r\n    //       w: textsize.width,\r\n    //       h: size\r\n    //     }\r\n    //     this.rprops.dstrect = this.rprops.srcrect;\r\n    //     // Use the 2D canvas as a texture in WebGL\r\n    //     // const gl = document.getElementById('webglCanvas').getContext('webgl');\r\n    //     const texture = Render.Info.gl.createTexture();\r\n    //     Render.Info.gl.bindTexture(Render.Info.gl.TEXTURE_2D, texture);\r\n    //     Render.Info.gl.texImage2D(Render.Info.gl.TEXTURE_2D, 0, Render.Info.gl.RGBA, Render.Info.gl.RGBA, Render.Info.gl.UNSIGNED_BYTE, Render.Info.textCanvas);\r\n    //     Render.Info.gl.generateMipmap(Render.Info.gl.TEXTURE_2D);\r\n    //   }\r\n    // }\r\n    class Image extends Renderable {\r\n        constructor(file, srcrect, dstrect, plane = undefined) {\r\n            super();\r\n            this.file = file;\r\n            this.rprops.srcrect = srcrect;\r\n            this.rprops.dstrect = dstrect;\r\n        }\r\n        compose() {\r\n            // console.log(this.file);\r\n            // if(this.ready){\r\n            //   Image.gl.deleteTexture(this.texture);\r\n            //   this.ready = false;\r\n            // }\r\n            if (!this.ready /*  && Assets.getTexture(this.file) */) {\r\n                let spr = _textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].createTexToBlitOn(this.rprops.srcrect.w, this.rprops.srcrect.h);\r\n                _textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.bindFramebuffer(_textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.FRAMEBUFFER, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.framebuffer);\r\n                _textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.framebufferTexture2D(_textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.FRAMEBUFFER, _textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.COLOR_ATTACHMENT0, _textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.TEXTURE_2D, _assets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getTexture(this.file), 0);\r\n                _textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.bindTexture(_textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.TEXTURE_2D, spr);\r\n                _textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.copyTexSubImage2D(_textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.TEXTURE_2D, 0, 0, 0, this.rprops.srcrect.x, this.rprops.srcrect.y, this.rprops.srcrect.w, this.rprops.srcrect.h);\r\n                _textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.bindFramebuffer(_textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].gl.FRAMEBUFFER, null);\r\n                this.texture = spr;\r\n            }\r\n        }\r\n    }\r\n    Composite_1.Image = Image;\r\n    class Composite extends Renderable {\r\n        remove;\r\n        dynamic = false;\r\n        bg;\r\n        mask;\r\n        viewport;\r\n        applyBg() { }\r\n        applyMask() { }\r\n        compose() { return this.rprops.delete; }\r\n        constructor() {\r\n            super();\r\n            this.viewport = { x: 0, y: 0, w: Composite.gl.canvas.width, h: Composite.gl.canvas.height };\r\n        }\r\n        static createFocus(rd) {\r\n            // console.log(rd);\r\n            return {\r\n                x: rd.reduce((acc, c) => { return Math.min(acc, c.rprops.dstrect.x); }, rd[0].rprops.dstrect.x),\r\n                y: rd.reduce((acc, c) => { return Math.min(acc, c.rprops.dstrect.y); }, rd[0].rprops.dstrect.y),\r\n                w: rd.reduce((acc, c) => { return Math.max(acc, c.rprops.dstrect.w + c.rprops.dstrect.x); }, 0),\r\n                h: rd.reduce((acc, c) => { return Math.max(acc, c.rprops.dstrect.h + c.rprops.dstrect.y); }, 0)\r\n            };\r\n        }\r\n        generateComposite(rd, focusRect) {\r\n            let toDraw = rd.filter((r) => { return !r?.rprops.hidden; });\r\n            if (toDraw.length > 0) {\r\n                toDraw.sort((a, b) => a.rprops.layer - b.rprops.layer);\r\n                for (let i = 0; i < toDraw.length; i++)\r\n                    toDraw[i].compose();\r\n                // let focusRect : T.Bounds = ;\r\n                // console.log(focusRect)\r\n                this.rprops.srcrect = {\r\n                    x: focusRect.x,\r\n                    y: focusRect.y,\r\n                    w: focusRect.w /*  <= this.rprops.dstrect.w ? this.rprops.dstrect.w : focusRect.w */,\r\n                    h: focusRect.h /*  <= this.rprops.dstrect.h ? this.rprops.dstrect.h : focusRect.h */\r\n                };\r\n                this.rprops.dstrect = {\r\n                    x: this.rprops.pos.x /* + (this.rprops.scalex == 1 ? 0 : (this.rprops.srcrect!.w - (this.rprops.srcrect!.w * this.rprops.scalex)) / 2) */,\r\n                    y: this.rprops.pos.y /* + (this.rprops.scaley == 1 ? 0 : (this.rprops.srcrect!.h - (this.rprops.srcrect!.h * this.rprops.scaley)) / 2) */,\r\n                    w: this.rprops.srcrect.w /* +focusRect.x */,\r\n                    h: this.rprops.srcrect.h /* +focusRect.y */\r\n                };\r\n                let gl = Snap.gl;\r\n                gl.bindFramebuffer(gl.FRAMEBUFFER, Composite.framebuffer);\r\n                this.texture = _textures__WEBPACK_IMPORTED_MODULE_2__[\"default\"].createTexToBlitOn(this.rprops.dstrect.w, this.rprops.dstrect.h);\r\n                gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.texture, 0);\r\n                gl.viewport(-this.viewport.x, -this.viewport.y, this.rprops.dstrect.w, this.rprops.dstrect.h);\r\n                // gl.clearColor(0, 1, 0, .5);\r\n                // gl.clear(gl.COLOR_BUFFER_BIT);\r\n                for (let i = 0; i < toDraw.length; i++) {\r\n                    // toDraw[i].compose();\r\n                    _shaders__WEBPACK_IMPORTED_MODULE_1__[\"default\"].gl.bindTexture(gl.TEXTURE_2D, toDraw[i].texture);\r\n                    _shaders__WEBPACK_IMPORTED_MODULE_1__[\"default\"].passShader(toDraw[i], this.rprops.dstrect);\r\n                    gl.drawArrays(gl.TRIANGLES, 0, 6);\r\n                }\r\n                this.ready = true;\r\n            }\r\n            else\r\n                this.ready = false;\r\n        }\r\n        // add \"add\" methods to Snap, animation, frame (or simply composite?) \r\n        //// so parent is updated at addition (instead of pushing directly)\r\n        // need to refresh camera for viewport to have the camera modifications\r\n        getclientleft() {\r\n            // console.log(this.rprops.pos.x - this.viewport.x);\r\n            if (!this.parent) {\r\n                return this.rprops.pos.x - this.viewport.x; // + (this.parent==undefined?0:this.parent.getclientleft());\r\n            }\r\n            return this.rprops.pos.x + this.parent.getclientleft() - this.viewport.x;\r\n        }\r\n        getclienttop() {\r\n            return this.rprops.pos.y + (this.parent == undefined ? 0 : this.parent.getclienttop()) - this.viewport.y;\r\n        }\r\n        addtocomposition(arr) { }\r\n    }\r\n    class Snap extends Composite {\r\n        parts;\r\n        constructor(parts) {\r\n            super();\r\n            for (let p of parts)\r\n                p.parent = this;\r\n            this.parts = parts;\r\n        }\r\n        compose() {\r\n            if (this.rprops.delete) {\r\n                if (this.ready)\r\n                    Composite.gl.deleteTexture(this.texture);\r\n                return this.rprops.delete;\r\n            }\r\n            if (this.dynamic) {\r\n                if (this.ready) {\r\n                    Composite.gl.deleteTexture(this.texture);\r\n                }\r\n                this.ready = false;\r\n            }\r\n            if (!this.ready) {\r\n                let focusRect = Snap.createFocus(this.parts);\r\n                // focusRect.x = 0;\r\n                // focusRect.y = 0;\r\n                // this.rprops.pos.x = focusRect.x;\r\n                // this.viewport.x   = -focusRect.x;\r\n                this.generateComposite(this.parts, focusRect);\r\n            }\r\n            return this.rprops.delete;\r\n        }\r\n        addtocomposition(arr) {\r\n            for (let a of arr) {\r\n                a.parent = this;\r\n            }\r\n            this.parts.push(...arr);\r\n        }\r\n    }\r\n    Composite_1.Snap = Snap;\r\n    class Animation extends Composite {\r\n        frames;\r\n        currentFrame = 0;\r\n        // private timings     : number[];\r\n        timer;\r\n        constructor(frames, timings = [200]) {\r\n            super();\r\n            this.dynamic = true;\r\n            this.timer = new _alacrity_time__WEBPACK_IMPORTED_MODULE_4__.Time.Timeout(timings, \"framechange\");\r\n            this.frames = frames;\r\n            for (let f of frames)\r\n                f.parent = this;\r\n        }\r\n        compose() {\r\n            if (this.rprops.delete) {\r\n                for (let f of this.frames) {\r\n                    f.rprops.delete = true;\r\n                    f.compose();\r\n                }\r\n                return this.rprops.delete;\r\n            }\r\n            this.handleframechange();\r\n            if (this.frames[this.currentFrame].dynamic || !this.frames[this.currentFrame].ready) {\r\n                this.frames[this.currentFrame].compose();\r\n            }\r\n            this.texture = this.frames[this.currentFrame].texture;\r\n            this.rprops = this.frames[this.currentFrame].rprops;\r\n            // this.rprops.srcrect = this.frames[this.currentFrame].rprops.srcrect;\r\n            // this.rprops.dstrect = this.frames[this.currentFrame].rprops.dstrect;\r\n            // this.rprops.pos     = this.frames[this.currentFrame].rprops.pos    ;\r\n            // this.rprops.flip    = this.frames[this.currentFrame].rprops.flip   ;\r\n            // this.rprops.angle   = this.frames[this.currentFrame].rprops.angle  ;\r\n            // this.rprops.scalex  = this.frames[this.currentFrame].rprops.scalex ;\r\n            // this.rprops.scaley  = this.frames[this.currentFrame].rprops.scaley ;\r\n            // this.rprops.layer   = this.frames[this.currentFrame].rprops.layer  ;\r\n            // this.rprops.hidden  = this.frames[this.currentFrame].rprops.hidden ;\r\n            // this.rprops.delete  = this.frames[this.currentFrame].rprops.delete ;\r\n            // console.log(this.rprops.pos.y);\r\n            this.ready = this.frames[this.currentFrame].ready;\r\n            return this.rprops.delete;\r\n        }\r\n        handleframechange() {\r\n            let trig = this.timer.test();\r\n            if (trig.state == 'triggered') {\r\n                this.currentFrame += 1;\r\n                if (this.currentFrame >= this.frames.length)\r\n                    this.currentFrame = 0;\r\n            }\r\n        }\r\n        pause() {\r\n            this.timer.pause();\r\n        }\r\n        resume() {\r\n            this.timer.resume();\r\n        }\r\n        restart() {\r\n            this.timer.restart();\r\n            this.currentFrame = 0;\r\n        }\r\n        // these are present because of a bug linking animation position, \r\n        // currently, i need to link every of its frames to the animation's parent position\r\n        // it works but is incorrect and may lead to future malfunctioning\r\n        //\r\n        getclientleft() {\r\n            return this.parent.getclientleft();\r\n        }\r\n        getclienttop() {\r\n            return this.parent.getclienttop();\r\n        }\r\n        // returns and diminishes once too many\r\n        getclientwidth() {\r\n            return super.getclientwidth(this.frames[this.currentFrame].rprops.dstrect);\r\n            // return this.frames[this.currentFrame].rprops.dstrect.w * this.getwidthratio();\r\n        }\r\n        getclientheight() {\r\n            return super.getclientheight(this.frames[this.currentFrame].rprops.dstrect);\r\n        }\r\n        addtocomposition(arr) {\r\n            for (let a of arr) {\r\n                a.parent = this;\r\n            }\r\n            this.frames.push(...arr);\r\n        }\r\n    }\r\n    Composite_1.Animation = Animation;\r\n    class Frame extends Composite {\r\n        frame;\r\n        // public worldpos : T.Point = {x:0,y:0};\r\n        camera = undefined;\r\n        picture = { crop: { do: false, w: 0, h: 0 }, x: 0, y: 0, w: 0, h: 0, img: undefined, ready: false };\r\n        // private size : T.Box;\r\n        constructor(frame, size = { w: 0, h: 0 }) {\r\n            super();\r\n            this.frame = frame;\r\n            this.dynamic = true;\r\n            // this.size = size;\r\n            this.rprops.dstrect.w = size.w;\r\n            this.rprops.dstrect.h = size.h;\r\n            for (let f of frame)\r\n                f.parent = this;\r\n        }\r\n        compose() {\r\n            // if(this.rprops.delete) return this.rprops.delete;\r\n            // There has to be an underlying bug for this next line to be required:\r\n            if (this.frame[0] === undefined) {\r\n                console.log(\"Skipping empty frame...\");\r\n                return true;\r\n            }\r\n            if (this.dynamic || this.rprops.delete) {\r\n                if ((this.rprops.delete && this.ready) || this.ready) {\r\n                    Composite.gl.deleteTexture(this.texture);\r\n                }\r\n                this.ready = false;\r\n            }\r\n            if (!this.ready) {\r\n                this.frame = this.frame.filter((f) => f != undefined && !f.compose());\r\n                let parts = this.frame.filter((f) => { return f.ready; });\r\n                let focusRect = Snap.createFocus(parts);\r\n                this.rprops.dstrect.x = this.rprops.pos.x;\r\n                this.rprops.dstrect.y = this.rprops.pos.y;\r\n                if (this.camera !== undefined) {\r\n                    this.rprops.dstrect.w = this.camera.viewport.w;\r\n                    this.rprops.dstrect.h = this.camera.viewport.h;\r\n                    // console.log(this.camera.viewport.x)\r\n                    this.viewport = { x: this.camera.viewport.x, y: this.camera.viewport.y, w: this.camera.viewport.w, h: this.camera.viewport.h };\r\n                }\r\n                // console.log(\"BOB\")\r\n                if (parts.length > 0)\r\n                    this.generateComposite(parts, focusRect);\r\n                if (this.picture.crop.do)\r\n                    this.crop();\r\n                this.ready = true;\r\n            }\r\n            return this.rprops.delete;\r\n        }\r\n        crop() {\r\n            if (this.picture.ready) {\r\n                // Composite.gl.deleteTexture(this.picture.img.texture);\r\n                Composite.gl.deleteTexture(_assets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getTexture('croptex'));\r\n                this.picture.ready = false;\r\n            }\r\n            if (!this.picture.ready) {\r\n                _assets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].addTexture('croptex', this.texture, { w: 100, h: 100 });\r\n                let img = new Image('croptex', { x: 0, y: 0, w: this.picture.crop.w, h: this.picture.crop.h }, { x: 0, y: 0, w: this.picture.w, h: this.picture.h });\r\n                img.compose();\r\n                this.texture = img.texture;\r\n                this.rprops.pos.x = this.picture.x;\r\n                this.rprops.pos.y = this.picture.y;\r\n                this.rprops.dstrect.w = this.picture.w;\r\n                this.rprops.dstrect.h = this.picture.h;\r\n                this.picture.ready = true;\r\n            }\r\n        }\r\n        setCrop(crop, dest) {\r\n            this.picture =\r\n                { crop: { do: true, ...crop }, ...dest, img: undefined, ready: false };\r\n        }\r\n        addtocomposition(arr) {\r\n            for (let a of arr) {\r\n                a.parent = this;\r\n            }\r\n            this.frame.push(...arr);\r\n        }\r\n    }\r\n    Composite_1.Frame = Frame;\r\n})(Composite || (Composite = {}));\r\n\n\n//# sourceURL=webpack:///./src/engine/render/composite.ts?\n}");

/***/ }),

/***/ "./src/engine/render/shaderloader.ts":
/*!*******************************************!*\
  !*** ./src/engine/render/shaderloader.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ShaderLoader)\n/* harmony export */ });\n/* harmony import */ var _shaders__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_shaders */ \"./src/engine/render/_shaders.ts\");\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./assets */ \"./src/engine/render/assets.ts\");\n/* harmony import */ var _shaders_reverser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shaders/reverser */ \"./src/engine/render/shaders/reverser.ts\");\n/* harmony import */ var _shaders_normal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shaders/normal */ \"./src/engine/render/shaders/normal.ts\");\n/* harmony import */ var _shaders_whitetransparent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./shaders/whitetransparent */ \"./src/engine/render/shaders/whitetransparent.ts\");\n\r\n\r\n\r\n\r\n\r\nclass ShaderLoader extends _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    static shaderts = [new _shaders_normal__WEBPACK_IMPORTED_MODULE_3__[\"default\"](), new _shaders_reverser__WEBPACK_IMPORTED_MODULE_2__[\"default\"](), new _shaders_whitetransparent__WEBPACK_IMPORTED_MODULE_4__[\"default\"]()];\r\n    static async init() {\r\n        await this.compileAllShadersFrom(\"shaders/\");\r\n    }\r\n    static async compileAllShadersFrom(folder) {\r\n        let programs = [];\r\n        await Promise.all(await _assets__WEBPACK_IMPORTED_MODULE_1__[\"default\"].loadAllExtInFolder(folder, [\"frag\", \"vert\"]))\r\n            .then((q) => {\r\n            q.map((val, idx, arr) => {\r\n                let name = val.split('/')[1].split('.')[0];\r\n                for (let i = idx; i < arr.length; i++) {\r\n                    if (name == arr[i].split('/')[1].split('.')[0] && !programs.includes(name)) {\r\n                        programs.push(name);\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        ;\r\n        for (let i = 0; i < programs.length; i++) {\r\n            _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].shaders[programs[i]] = (() => {\r\n                let vertexShader = _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].compileShader(_shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gl.VERTEX_SHADER, _assets__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getText(\"shaders/\" + programs[i] + \".vert\"));\r\n                let fragmentShader = _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].compileShader(_shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gl.FRAGMENT_SHADER, _assets__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getText(\"shaders/\" + programs[i] + \".frag\"));\r\n                let program = _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createProgram(vertexShader, fragmentShader);\r\n                if (!program) {\r\n                    console.log(\"Shader creation unsuccessful:\" + _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].shaders[programs[i]]);\r\n                }\r\n                for (let j = 0; j < this.shaderts.length; j++) {\r\n                    if (this.shaderts[j].name == programs[i]) {\r\n                        if (program != null) {\r\n                            this.shaderts[j].program = program;\r\n                            return this.shaderts[j];\r\n                        }\r\n                    }\r\n                }\r\n                // If unsuccessful, revert to first loaded shader\r\n                // Should return default shader, for now it is first in the list\r\n                // of loaded shaders (shaderts:Array<Shader>)\r\n                return this.shaderts[0];\r\n            })();\r\n        }\r\n        return programs;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/render/shaderloader.ts?\n}");

/***/ }),

/***/ "./src/engine/render/shaders/matrices.ts":
/*!***********************************************!*\
  !*** ./src/engine/render/shaders/matrices.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Matrix)\n/* harmony export */ });\n// Taken from www.webglfundamentals.com or something\r\nclass Matrix {\r\n    static iM = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\r\n    static ortho(x, y, z, w, h, d) {\r\n        return new Float32Array([\r\n            w, 0, 0, 0,\r\n            0, h, 0, 0,\r\n            0, 0, d, 0,\r\n            x, y, z, 1\r\n        ]);\r\n    }\r\n    static multiplyMatrices(matrixA, matrixB) {\r\n        // Slice the second matrix up into rows\r\n        let row0 = [matrixB[0], matrixB[1], matrixB[2], matrixB[3]];\r\n        let row1 = [matrixB[4], matrixB[5], matrixB[6], matrixB[7]];\r\n        let row2 = [matrixB[8], matrixB[9], matrixB[10], matrixB[11]];\r\n        let row3 = [matrixB[12], matrixB[13], matrixB[14], matrixB[15]];\r\n        // Multiply each row by matrixA\r\n        let result0 = this.multiplyMatrixAndPoint(matrixA, row0);\r\n        let result1 = this.multiplyMatrixAndPoint(matrixA, row1);\r\n        let result2 = this.multiplyMatrixAndPoint(matrixA, row2);\r\n        let result3 = this.multiplyMatrixAndPoint(matrixA, row3);\r\n        // Turn the result rows back into a single matrix\r\n        return new Float32Array([\r\n            result0[0],\r\n            result0[1],\r\n            result0[2],\r\n            result0[3],\r\n            result1[0],\r\n            result1[1],\r\n            result1[2],\r\n            result1[3],\r\n            result2[0],\r\n            result2[1],\r\n            result2[2],\r\n            result2[3],\r\n            result3[0],\r\n            result3[1],\r\n            result3[2],\r\n            result3[3]\r\n        ]);\r\n    }\r\n    static multiplyMatrixAndPoint(matrix, point) {\r\n        // Give a simple variable name to each part of the matrix, a column and row number\r\n        let c0r0 = matrix[0], c1r0 = matrix[1], c2r0 = matrix[2], c3r0 = matrix[3];\r\n        let c0r1 = matrix[4], c1r1 = matrix[5], c2r1 = matrix[6], c3r1 = matrix[7];\r\n        let c0r2 = matrix[8], c1r2 = matrix[9], c2r2 = matrix[10], c3r2 = matrix[11];\r\n        let c0r3 = matrix[12], c1r3 = matrix[13], c2r3 = matrix[14], c3r3 = matrix[15];\r\n        // Now set some simple names for the point\r\n        let x = point[0];\r\n        let y = point[1];\r\n        let z = point[2];\r\n        let w = point[3];\r\n        // Multiply the point against each part of the 1st column, then add together\r\n        let resultX = x * c0r0 + y * c0r1 + z * c0r2 + w * c0r3;\r\n        // Multiply the point against each part of the 2nd column, then add together\r\n        let resultY = x * c1r0 + y * c1r1 + z * c1r2 + w * c1r3;\r\n        // Multiply the point against each part of the 3rd column, then add together\r\n        let resultZ = x * c2r0 + y * c2r1 + z * c2r2 + w * c2r3;\r\n        // Multiply the point against each part of the 4th column, then add together\r\n        let resultW = x * c3r0 + y * c3r1 + z * c3r2 + w * c3r3;\r\n        return [resultX, resultY, resultZ, resultW];\r\n    }\r\n    static rotation(dst, radians) {\r\n        return this.multiplyMatrices(dst, [\r\n            Math.cos(radians), -Math.sin(radians), 0, 0,\r\n            Math.sin(radians), Math.cos(radians), 0, 0,\r\n            0, 0, 1, 0,\r\n            0, 0, 0, 1,\r\n        ]);\r\n    }\r\n    static normalize(dst, width, height) {\r\n        dst[0] = dst[0] / width;\r\n        dst[5] = dst[5] / height;\r\n        dst[12] = dst[12] / width;\r\n        dst[13] = dst[13] / height;\r\n        return dst;\r\n    }\r\n    static orthographic(left, right, bottom, top, near, far, dst = new Float32Array(16)) {\r\n        dst[0] = 2 / (right - left);\r\n        dst[1] = 0;\r\n        dst[2] = 0;\r\n        dst[3] = 0;\r\n        dst[4] = 0;\r\n        dst[5] = 2 / (top - bottom);\r\n        dst[6] = 0;\r\n        dst[7] = 0;\r\n        dst[8] = 0;\r\n        dst[9] = 0;\r\n        dst[10] = 2 / (near - far);\r\n        dst[11] = 0;\r\n        dst[12] = (left + right) / (left - right);\r\n        dst[13] = (bottom + top) / (bottom - top);\r\n        dst[14] = (near + far) / (near - far);\r\n        dst[15] = 1;\r\n        return dst;\r\n    }\r\n    static scale(m, sx, sy, sz, dst = new Float32Array(16)) {\r\n        dst[0] = sx * m[0 * 4 + 0];\r\n        dst[1] = sx * m[0 * 4 + 1];\r\n        dst[2] = sx * m[0 * 4 + 2];\r\n        dst[3] = sx * m[0 * 4 + 3];\r\n        dst[4] = sy * m[1 * 4 + 0];\r\n        dst[5] = sy * m[1 * 4 + 1];\r\n        dst[6] = sy * m[1 * 4 + 2];\r\n        dst[7] = sy * m[1 * 4 + 3];\r\n        dst[8] = sz * m[2 * 4 + 0];\r\n        dst[9] = sz * m[2 * 4 + 1];\r\n        dst[10] = sz * m[2 * 4 + 2];\r\n        dst[11] = sz * m[2 * 4 + 3];\r\n        if (m !== dst) {\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n        return dst;\r\n    }\r\n    static translate(m, tx, ty, tz, dst = new Float32Array(16)) {\r\n        var m00 = m[0];\r\n        var m01 = m[1];\r\n        var m02 = m[2];\r\n        var m03 = m[3];\r\n        var m10 = m[1 * 4 + 0];\r\n        var m11 = m[1 * 4 + 1];\r\n        var m12 = m[1 * 4 + 2];\r\n        var m13 = m[1 * 4 + 3];\r\n        var m20 = m[2 * 4 + 0];\r\n        var m21 = m[2 * 4 + 1];\r\n        var m22 = m[2 * 4 + 2];\r\n        var m23 = m[2 * 4 + 3];\r\n        var m30 = m[3 * 4 + 0];\r\n        var m31 = m[3 * 4 + 1];\r\n        var m32 = m[3 * 4 + 2];\r\n        var m33 = m[3 * 4 + 3];\r\n        if (m !== dst) {\r\n            dst[0] = m00;\r\n            dst[1] = m01;\r\n            dst[2] = m02;\r\n            dst[3] = m03;\r\n            dst[4] = m10;\r\n            dst[5] = m11;\r\n            dst[6] = m12;\r\n            dst[7] = m13;\r\n            dst[8] = m20;\r\n            dst[9] = m21;\r\n            dst[10] = m22;\r\n            dst[11] = m23;\r\n        }\r\n        dst[12] = m00 * tx + m10 * ty + m20 * tz + m30;\r\n        dst[13] = m01 * tx + m11 * ty + m21 * tz + m31;\r\n        dst[14] = m02 * tx + m12 * ty + m22 * tz + m32;\r\n        dst[15] = m03 * tx + m13 * ty + m23 * tz + m33;\r\n        return dst;\r\n    }\r\n    static mat4mul(lefthand, righthand) {\r\n        const result = [];\r\n        for (let row = 0; row < 4; row++) {\r\n            for (let col = 0; col < 4; col++) {\r\n                const value = lefthand[row * 4 + 0] * righthand[0 * 4 + col]\r\n                    + lefthand[row * 4 + 1] * righthand[1 * 4 + col]\r\n                    + lefthand[row * 4 + 2] * righthand[2 * 4 + col]\r\n                    + lefthand[row * 4 + 3] * righthand[3 * 4 + col];\r\n                result[row * 4 + col] = value;\r\n            }\r\n        }\r\n        return new Float32Array(result);\r\n    }\r\n    static mat4translation(point) {\r\n        return new Float32Array([\r\n            1.0, 0.0, 0.0, 0.0,\r\n            0.0, 1.0, 0.0, 0.0,\r\n            0.0, 0.0, 1.0, 0.0,\r\n            point.x, point.y, 0.0, 1.0\r\n        ]);\r\n    }\r\n    static mat4rot(radians) {\r\n        return new Float32Array([\r\n            Math.cos(radians), -Math.sin(radians), 0, 0,\r\n            Math.sin(radians), Math.cos(radians), 0, 0,\r\n            0, 0, 1, 0,\r\n            0, 0, 0, 1,\r\n        ]);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/render/shaders/matrices.ts?\n}");

/***/ }),

/***/ "./src/engine/render/shaders/normal.ts":
/*!*********************************************!*\
  !*** ./src/engine/render/shaders/normal.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Normal)\n/* harmony export */ });\n/* harmony import */ var _shaders__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_shaders */ \"./src/engine/render/_shaders.ts\");\n/* harmony import */ var _matrices__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./matrices */ \"./src/engine/render/shaders/matrices.ts\");\n\r\n\r\nclass Normal extends _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    program;\r\n    name = \"normal\";\r\n    matrixLocation;\r\n    textureMatrixLocation;\r\n    texture;\r\n    second = [\r\n        () => { }\r\n    ];\r\n    first = [\r\n        () => {\r\n            let gl = _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gl;\r\n            // DefaultShader.gl.activeTexture(DefaultShader.gl.TEXTURE0);\r\n            let aVertexPosition = gl.getAttribLocation(this.program, \"aVertexPosition\");\r\n            gl.enableVertexAttribArray(aVertexPosition);\r\n            gl.vertexAttribPointer(aVertexPosition, 2, gl.FLOAT, false, 0, 0);\r\n            let texCoordLocation = gl.getAttribLocation(this.program, \"texcoordLocation\");\r\n            gl.enableVertexAttribArray(texCoordLocation);\r\n            gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);\r\n            this.matrixLocation = gl.getUniformLocation(this.program, \"matrixLocation\");\r\n            this.textureMatrixLocation = gl.getUniformLocation(this.program, \"textureMatrixLocation\");\r\n            // this.texture = gl.getUniformLocation(this.program, \"texture\");\r\n        },\r\n    ];\r\n    passes = [\r\n        (cmp, plane) => {\r\n            let gl = _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gl;\r\n            // gl.activeTexture(gl.TEXTURE0);\r\n            // gl.bindTexture(gl.TEXTURE_2D, cmp.texture);\r\n            // gl.uniform1i(this.texture, 0);\r\n            // let matrix = Matrix.orthographic(-1, 1, 1, -1, -1,1);\r\n            // matrix = Matrix.scale(matrix,cmp.rprops.dstrect.w,cmp.rprops.dstrect.h,1);\r\n            // matrix = Matrix.translate(matrix,cmp.rprops.dstrect.x,cmp.rprops.dstrect.y,1);\r\n            let funtimes = new Float32Array([cmp.rprops.dstrect.w, 0, 0, 0,\r\n                0, cmp.rprops.dstrect.h, 0, 0,\r\n                0, 0, 1, 0,\r\n                cmp.rprops.dstrect.x, plane.h - cmp.rprops.dstrect.y - cmp.rprops.dstrect.h, 0, 1]);\r\n            if (cmp.rprops.rotcenter != undefined) {\r\n                let rotcenter = { x: cmp.rprops.rotcenter.x, y: cmp.rprops.rotcenter.y };\r\n                // rotate around center? Image bobs up and down\r\n                // funtimes =  Matrix.translate(funtimes,-centerX,-centerY,0);\r\n                funtimes = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4mul(funtimes, _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4translation({ x: -rotcenter.x, y: rotcenter.y }));\r\n                funtimes = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4mul(funtimes, _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4rot(cmp.rprops.angle));\r\n                funtimes = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4mul(funtimes, _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mat4translation({ x: rotcenter.x, y: -rotcenter.y }));\r\n            }\r\n            // console.log(cmp.rprops.dstrect.h)\r\n            // funtimes =  Matrix.translate(funtimes,centerX,centerY,0);\r\n            // funtimes = Matrix.translate(funtimes,cmp.rprops.dstrect.w/2,cmp.rprops.dstrect.h/2,0)\r\n            // if(cmp.rprops.scalex != 1){\r\n            //   funtimes[0]  *= cmp.rprops.scalex;\r\n            //   funtimes[12] += cmp.rprops.dstrect.w - ((cmp.rprops.dstrect.w * cmp.rprops.scalex) / 2);\r\n            // }\r\n            // if(cmp.rprops.scaley != 1){\r\n            //   funtimes[4]  *= cmp.rprops.scaley;\r\n            //   funtimes[13] += cmp.rprops.scaley;\r\n            // }\r\n            // if(cmp.rprops.angle!=0){ \r\n            //   // TODO: rotate around a point\r\n            //   let twomat : Array<number> = [];\r\n            //   twomat[0] = ( Math.cos(-cmp.rprops.angle) * funtimes[0]);\r\n            //   twomat[1] = (-Math.sin(-cmp.rprops.angle) * funtimes[0]);\r\n            //   twomat[3] = ( Math.sin(-cmp.rprops.angle) * funtimes[5]);\r\n            //   twomat[4] = ( Math.cos(-cmp.rprops.angle) * funtimes[5]);\r\n            //   funtimes[0] = twomat[0];\r\n            //   funtimes[1] = twomat[1];\r\n            //   funtimes[4] = twomat[3];\r\n            //   funtimes[5] = twomat[4];\r\n            // }\r\n            // Math.cos(radians),-Math.sin(radians)\r\n            // Math.sin(radians), Math.cos(radians)\r\n            funtimes[0] *= 2 / plane.w;\r\n            funtimes[1] *= 2 / plane.w;\r\n            // funtimes[3]  *=  (funtimes[3] * (2/plane.w));\r\n            funtimes[4] *= -2 / plane.h;\r\n            funtimes[5] *= -2 / plane.h;\r\n            funtimes[12] = (funtimes[12] * (2 / plane.w)) - 1;\r\n            funtimes[13] = -(funtimes[13] * (2 / plane.h)) + 1;\r\n            // funtimes = Matrix.translate()\r\n            // funtimes[12]  -= (2*cmp.rprops.rotcenter.x)/plane.w;\r\n            // funtimes[13]  -= (2*cmp.rprops.rotcenter.y)/plane.h;\r\n            // funtimes = Matrix.rotation(funtimes,cmp.rprops.angle);\r\n            // funtimes[12]  += (2*cmp.rprops.rotcenter.x)/plane.w;\r\n            // funtimes[13]  += (2*cmp.rprops.rotcenter.y)/plane.h;\r\n            gl.uniformMatrix4fv(this.matrixLocation, false, funtimes);\r\n            // console.log(\"FDS)\")\r\n            if (this.textureMatrixLocation != null) {\r\n                // let texMatrix = new Float32Array(\r\n                //   [cmp.rprops.srcrect.w,0,0,0,\r\n                //     0,cmp.rprops.srcrect.h,0,0,\r\n                //     0,0,1,0,\r\n                //     cmp.rprops.srcrect.x, cmp.rprops.srcrect.y,0,1]\r\n                // )\r\n                // texMatrix[0]  *=  2/cmp.rprops.dstrect.w;\r\n                // texMatrix[5]  *= -2/cmp.rprops.dstrect.h;\r\n                // texMatrix[12]  =  (texMatrix[12]*(2/cmp.rprops.dstrect.w))-1;\r\n                // texMatrix[13]  = -(texMatrix[13]*(2/cmp.rprops.dstrect.h))+1;\r\n                let texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].orthographic(-1, 1, -1, 1, -1, 1);\r\n                texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].translate(texMatrix, 0, 1, 0);\r\n                if (cmp.rprops.flip.flipx && cmp.rprops.flip.flipy) {\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].orthographic(1, -1, 1, -1, -1, 1);\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].translate(texMatrix, -1, 0, 0);\r\n                }\r\n                else if (cmp.rprops.flip.flipx) {\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].orthographic(1, -1, -1, 1, -1, 1);\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].translate(texMatrix, -1, 1, 0);\r\n                }\r\n                else if (cmp.rprops.flip.flipy) {\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].orthographic(-1, 1, 1, -1, -1, 1);\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].translate(texMatrix, 0, 0, 0);\r\n                }\r\n                // console.log(\"FDS)\")\r\n                // let texMatrix = Matrix.orthographic(-1, 1, -1,1,  -1,1);\r\n                gl.uniformMatrix4fv(this.textureMatrixLocation, false, texMatrix);\r\n            }\r\n        }\r\n    ];\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/render/shaders/normal.ts?\n}");

/***/ }),

/***/ "./src/engine/render/shaders/reverser.ts":
/*!***********************************************!*\
  !*** ./src/engine/render/shaders/reverser.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Main2)\n/* harmony export */ });\n/* harmony import */ var _shaders__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_shaders */ \"./src/engine/render/_shaders.ts\");\n/* harmony import */ var _matrices__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./matrices */ \"./src/engine/render/shaders/matrices.ts\");\n\r\n\r\nclass Main2 extends _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    program;\r\n    name = \"reverser\";\r\n    matrixLocation;\r\n    textureMatrixLocation;\r\n    texture;\r\n    second = [\r\n        () => { }\r\n    ];\r\n    first = [\r\n        () => {\r\n            let gl = _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gl;\r\n            // DefaultShader.gl.activeTexture(DefaultShader.gl.TEXTURE0);\r\n            let aVertexPosition = gl.getAttribLocation(this.program, \"aVertexPosition\");\r\n            gl.enableVertexAttribArray(aVertexPosition);\r\n            gl.vertexAttribPointer(aVertexPosition, 2, gl.FLOAT, false, 0, 0);\r\n            let texCoordLocation = gl.getAttribLocation(this.program, \"texcoordLocation\");\r\n            gl.enableVertexAttribArray(texCoordLocation);\r\n            gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);\r\n            this.matrixLocation = gl.getUniformLocation(this.program, \"matrixLocation\");\r\n            this.textureMatrixLocation = gl.getUniformLocation(this.program, \"textureMatrixLocation\");\r\n            this.texture = gl.getUniformLocation(this.program, \"texture\");\r\n        },\r\n    ];\r\n    passes = [\r\n        (cmp, plane) => {\r\n            let gl = _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gl;\r\n            // gl.activeTexture(gl.TEXTURE0);\r\n            // gl.bindTexture(gl.TEXTURE_2D, cmp.texture);\r\n            // gl.uniform1i(this.texture, 0);\r\n            // let matrix = Matrix.orthographic(-1, 1, 1, -1, -1,1);\r\n            // matrix = Matrix.scale(matrix,cmp.rprops.dstrect.w,cmp.rprops.dstrect.h,1);\r\n            // matrix = Matrix.translate(matrix,cmp.rprops.dstrect.x,cmp.rprops.dstrect.y,1);\r\n            let funtimes = new Float32Array([cmp.rprops.dstrect.w, 0, 0, 0,\r\n                0, cmp.rprops.dstrect.h, 0, 0,\r\n                0, 0, 1, 0,\r\n                cmp.rprops.dstrect.x, cmp.rprops.dstrect.y, 0, 1]);\r\n            funtimes[0] *= 2 / plane.w;\r\n            funtimes[5] *= -2 / plane.h;\r\n            funtimes[12] = (funtimes[12] * (2 / plane.w)) - 1;\r\n            funtimes[13] = -(funtimes[13] * (2 / plane.h)) + 1;\r\n            // console.log(\"FDS)\")\r\n            gl.uniformMatrix4fv(this.matrixLocation, false, funtimes);\r\n            if (this.textureMatrixLocation != null) {\r\n                // let texMatrix = new Float32Array(\r\n                //   [cmp.rprops.srcrect.w,0,0,0,\r\n                //     0,cmp.rprops.srcrect.h,0,0,\r\n                //     0,0,1,0,\r\n                //     cmp.rprops.srcrect.x, cmp.rprops.srcrect.y,0,1]\r\n                // )\r\n                // texMatrix[0]  *=  2/cmp.rprops.dstrect.w;\r\n                // texMatrix[5]  *= -2/cmp.rprops.dstrect.h;\r\n                // texMatrix[12]  =  (texMatrix[12]*(2/cmp.rprops.dstrect.w))-1;\r\n                // texMatrix[13]  = -(texMatrix[13]*(2/cmp.rprops.dstrect.h))+1;\r\n                let texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].orthographic(-1, 1, 1, -1, -1, 1);\r\n                gl.uniformMatrix4fv(this.textureMatrixLocation, false, texMatrix);\r\n            }\r\n        }\r\n    ];\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/render/shaders/reverser.ts?\n}");

/***/ }),

/***/ "./src/engine/render/shaders/whitetransparent.ts":
/*!*******************************************************!*\
  !*** ./src/engine/render/shaders/whitetransparent.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ WhiteTransparent)\n/* harmony export */ });\n/* harmony import */ var _shaders__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_shaders */ \"./src/engine/render/_shaders.ts\");\n/* harmony import */ var _matrices__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./matrices */ \"./src/engine/render/shaders/matrices.ts\");\n\r\n\r\nclass WhiteTransparent extends _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    program;\r\n    name = \"whitetransparent\";\r\n    matrixLocation;\r\n    textureMatrixLocation;\r\n    texture;\r\n    second = [\r\n        () => { }\r\n    ];\r\n    first = [\r\n        () => {\r\n            let gl = _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gl;\r\n            // DefaultShader.gl.activeTexture(DefaultShader.gl.TEXTURE0);\r\n            let aVertexPosition = gl.getAttribLocation(this.program, \"aVertexPosition\");\r\n            gl.enableVertexAttribArray(aVertexPosition);\r\n            gl.vertexAttribPointer(aVertexPosition, 2, gl.FLOAT, false, 0, 0);\r\n            let texCoordLocation = gl.getAttribLocation(this.program, \"texcoordLocation\");\r\n            gl.enableVertexAttribArray(texCoordLocation);\r\n            gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);\r\n            this.matrixLocation = gl.getUniformLocation(this.program, \"matrixLocation\");\r\n            this.textureMatrixLocation = gl.getUniformLocation(this.program, \"textureMatrixLocation\");\r\n            // this.texture = gl.getUniformLocation(this.program, \"texture\");\r\n        },\r\n    ];\r\n    passes = [\r\n        (cmp, plane) => {\r\n            let gl = _shaders__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gl;\r\n            // gl.activeTexture(gl.TEXTURE0);\r\n            // gl.bindTexture(gl.TEXTURE_2D, cmp.texture);\r\n            // gl.uniform1i(this.texture, 0);\r\n            // let matrix = Matrix.orthographic(-1, 1, 1, -1, -1,1);\r\n            // matrix = Matrix.scale(matrix,cmp.rprops.dstrect.w,cmp.rprops.dstrect.h,1);\r\n            // matrix = Matrix.translate(matrix,cmp.rprops.dstrect.x,cmp.rprops.dstrect.y,1);\r\n            let funtimes = new Float32Array([cmp.rprops.dstrect.w, 0, 0, 0,\r\n                0, cmp.rprops.dstrect.h, 0, 0,\r\n                0, 0, 1, 0,\r\n                cmp.rprops.dstrect.x, plane.h - cmp.rprops.dstrect.y - cmp.rprops.dstrect.h, 0, 1]);\r\n            // if(cmp.rprops.scalex != 1){\r\n            //   funtimes[0]  *= cmp.rprops.scalex;\r\n            //   funtimes[12] += cmp.rprops.dstrect.w - ((cmp.rprops.dstrect.w * cmp.rprops.scalex) / 2);\r\n            // }\r\n            // if(cmp.rprops.scaley != 1){\r\n            //   funtimes[4]  *= cmp.rprops.scaley;\r\n            //   funtimes[13] += cmp.rprops.scaley;\r\n            // }\r\n            if (cmp.rprops.angle != 0) {\r\n                // TODO: rotate around a point\r\n                let twomat = [];\r\n                twomat[0] = (Math.cos(-cmp.rprops.angle) * funtimes[0]);\r\n                twomat[1] = (-Math.sin(-cmp.rprops.angle) * funtimes[0]);\r\n                twomat[3] = (Math.sin(-cmp.rprops.angle) * funtimes[5]);\r\n                twomat[4] = (Math.cos(-cmp.rprops.angle) * funtimes[5]);\r\n                funtimes[0] = twomat[0];\r\n                funtimes[1] = twomat[1];\r\n                funtimes[4] = twomat[3];\r\n                funtimes[5] = twomat[4];\r\n            }\r\n            // Math.cos(radians),-Math.sin(radians)\r\n            // Math.sin(radians), Math.cos(radians)\r\n            funtimes[0] *= 2 / plane.w;\r\n            funtimes[1] *= 2 / plane.w;\r\n            // funtimes[3]  *=  (funtimes[3] * (2/plane.w));\r\n            funtimes[4] *= -2 / plane.h;\r\n            funtimes[5] *= -2 / plane.h;\r\n            funtimes[12] = (funtimes[12] * (2 / plane.w)) - 1;\r\n            funtimes[13] = -(funtimes[13] * (2 / plane.h)) + 1;\r\n            // funtimes = Matrix.translate()\r\n            // funtimes[12]  -= (2*cmp.rprops.rotcenter.x)/plane.w;\r\n            // funtimes[13]  -= (2*cmp.rprops.rotcenter.y)/plane.h;\r\n            // funtimes = Matrix.rotation(funtimes,cmp.rprops.angle);\r\n            // funtimes[12]  += (2*cmp.rprops.rotcenter.x)/plane.w;\r\n            // funtimes[13]  += (2*cmp.rprops.rotcenter.y)/plane.h;\r\n            gl.uniformMatrix4fv(this.matrixLocation, false, funtimes);\r\n            // console.log(\"FDS)\")\r\n            if (this.textureMatrixLocation != null) {\r\n                // let texMatrix = new Float32Array(\r\n                //   [cmp.rprops.srcrect.w,0,0,0,\r\n                //     0,cmp.rprops.srcrect.h,0,0,\r\n                //     0,0,1,0,\r\n                //     cmp.rprops.srcrect.x, cmp.rprops.srcrect.y,0,1]\r\n                // )\r\n                // texMatrix[0]  *=  2/cmp.rprops.dstrect.w;\r\n                // texMatrix[5]  *= -2/cmp.rprops.dstrect.h;\r\n                // texMatrix[12]  =  (texMatrix[12]*(2/cmp.rprops.dstrect.w))-1;\r\n                // texMatrix[13]  = -(texMatrix[13]*(2/cmp.rprops.dstrect.h))+1;\r\n                let texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].orthographic(-1, 1, -1, 1, -1, 1);\r\n                texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].translate(texMatrix, 0, 1, 0);\r\n                if (cmp.rprops.flip.flipx && cmp.rprops.flip.flipy) {\r\n                }\r\n                else if (cmp.rprops.flip.flipx) {\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].orthographic(1, -1, -1, 1, -1, 1);\r\n                    texMatrix = _matrices__WEBPACK_IMPORTED_MODULE_1__[\"default\"].translate(texMatrix, -1, 1, 0);\r\n                }\r\n                else if (cmp.rprops.flip.flipy) {\r\n                }\r\n                // console.log(\"FDS)\")\r\n                // let texMatrix = Matrix.orthographic(-1, 1, -1,1,  -1,1);\r\n                gl.uniformMatrix4fv(this.textureMatrixLocation, false, texMatrix);\r\n            }\r\n        }\r\n    ];\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/render/shaders/whitetransparent.ts?\n}");

/***/ }),

/***/ "./src/engine/render/textures.ts":
/*!***************************************!*\
  !*** ./src/engine/render/textures.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Textures)\n/* harmony export */ });\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_render */ \"./src/engine/render/_render.ts\");\n\r\nclass Textures extends _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info {\r\n    static createTexture(img) {\r\n        // console.log(Render.Info.gl);\r\n        let tex = this.createTexToBlitOn(img.width, img.height);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.bindTexture(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, tex);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.texImage2D(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, 0, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.RGBA, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.RGBA, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.UNSIGNED_BYTE, img);\r\n        return tex;\r\n    }\r\n    static createSprite(file, from, bounds) {\r\n        const framebuffer = _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.createFramebuffer();\r\n        let spr = Textures.createTexToBlitOn(bounds.w, bounds.h);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.bindFramebuffer(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.FRAMEBUFFER, framebuffer);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.framebufferTexture2D(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.FRAMEBUFFER, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.COLOR_ATTACHMENT0, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, from, 0);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.bindTexture(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, spr);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.copyTexSubImage2D(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, 0, 0, 0, bounds.x, bounds.y, bounds.w, bounds.h);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.deleteFramebuffer(framebuffer);\r\n        return spr;\r\n    }\r\n    static createTexToBlitOn(width, height) {\r\n        const targetTexture = _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.createTexture();\r\n        // let arr = new Uint8Array(width*height*4).fill(0);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.bindTexture(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, targetTexture);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.texImage2D(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, 0, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.RGBA, width, height, \r\n        // Textures.nextPowerOfTwo(width), Textures.nextPowerOfTwo(height),\r\n        // 1024,1024,\r\n        0, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.RGBA, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.UNSIGNED_BYTE, null);\r\n        // arr)\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.texParameteri(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_MIN_FILTER, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.NEAREST);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.texParameteri(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_MAG_FILTER, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.NEAREST);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.texParameteri(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_WRAP_S, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.CLAMP_TO_EDGE);\r\n        _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.texParameteri(_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_2D, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.TEXTURE_WRAP_T, _render__WEBPACK_IMPORTED_MODULE_0__.Render.Info.gl.CLAMP_TO_EDGE);\r\n        return targetTexture;\r\n    }\r\n    static nextPowerOfTwo(n) {\r\n        if (n == 2 || n == 4 || n == 8 || n == 16 || n == 32 || n == 64 || n == 128 || n == 256 || n == 512 || n == 1024 || n == 2048 /*||n==4096 */)\r\n            return n;\r\n        if (n > 2048)\r\n            return 2048;\r\n        if (n <= 0)\r\n            return 1; // Handle edge case for non-positive numbers\r\n        n--;\r\n        n |= n >> 1;\r\n        n |= n >> 2;\r\n        n |= n >> 4;\r\n        n |= n >> 8;\r\n        n |= n >> 16;\r\n        return n + 1;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/render/textures.ts?\n}");

/***/ }),

/***/ "./src/engine/systems/_system.ts":
/*!***************************************!*\
  !*** ./src/engine/systems/_system.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ System)\n/* harmony export */ });\nclass System {\r\n    static pool = [];\r\n    constructor(priority = false) {\r\n        if (priority)\r\n            System.pool.unshift(this);\r\n        else\r\n            System.pool.push(this);\r\n    }\r\n    static refresh() {\r\n        for (let i = 0; i < this.pool.length; i++) {\r\n            System.pool[i].refresh();\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/systems/_system.ts?\n}");

/***/ }),

/***/ "./src/engine/systems/camera.ts":
/*!**************************************!*\
  !*** ./src/engine/systems/camera.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Camera)\n/* harmony export */ });\n/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_system */ \"./src/engine/systems/_system.ts\");\n/* harmony import */ var _cameraman__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cameraman */ \"./src/engine/systems/cameraman.ts\");\n\r\n\r\nclass Camera extends _system__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    viewport;\r\n    bounds;\r\n    // public actor     : Bodies.Embodiment;\r\n    scale = { x: 1, y: 1 };\r\n    cameraman;\r\n    constructor(/* actor: Bodies.Embodiment,  */ size, bounds) {\r\n        super();\r\n        // this.actor = actor;\r\n        this.viewport = { x: 0, y: 0, w: size.w, h: size.h };\r\n        this.bounds = bounds;\r\n        this.cameraman = new _cameraman__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this);\r\n    }\r\n    refresh() {\r\n        // this.viewport.w  = Math.floor(this.viewport.w / this.scale.x);;\r\n        // Render.Info.gl.canvas.height = Math.floor(this.viewport.h / this.scale.y);\r\n        this.viewport.x =\r\n            this.cameraman.actor.pos.x - this.viewport.w / 2 + this.cameraman.actor.hitbox.w / 2 + this.cameraman.actor.hitbox.x > this.bounds.x\r\n                ? (this.cameraman.actor.pos.x + this.viewport.w / 2 + this.cameraman.actor.hitbox.w / 2 + this.cameraman.actor.hitbox.x > this.bounds.w\r\n                    ? this.bounds.w - this.viewport.w\r\n                    : Math.floor(this.cameraman.actor.pos.x - this.viewport.w / 2 + this.cameraman.actor.hitbox.w / 2 + this.cameraman.actor.hitbox.x))\r\n                : this.bounds.x;\r\n        this.viewport.y =\r\n            this.cameraman.actor.pos.y - this.viewport.h / 2 + this.cameraman.actor.hitbox.h / 2 + this.cameraman.actor.hitbox.y > this.bounds.y\r\n                ? (this.cameraman.actor.pos.y + this.viewport.h / 2 + this.cameraman.actor.hitbox.h / 2 + this.cameraman.actor.hitbox.y > this.bounds.h\r\n                    ? this.bounds.h - this.viewport.h\r\n                    : Math.floor(this.cameraman.actor.pos.y - this.viewport.h / 2 + this.cameraman.actor.hitbox.h / 2 + this.cameraman.actor.hitbox.y))\r\n                : this.bounds.y;\r\n    }\r\n    setbounds(bounds) {\r\n        this.bounds = bounds;\r\n    }\r\n    // old and may not work\r\n    worldtoscreen(actor) {\r\n        return { x: actor.pos.x - this.viewport.x, y: actor.pos.y - this.viewport.y };\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/systems/camera.ts?\n}");

/***/ }),

/***/ "./src/engine/systems/cameraman.ts":
/*!*****************************************!*\
  !*** ./src/engine/systems/cameraman.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Cameraman)\n/* harmony export */ });\n/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_system */ \"./src/engine/systems/_system.ts\");\n/* harmony import */ var _alacrity_bodies__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../alacrity/_bodies */ \"./src/engine/alacrity/_bodies.ts\");\n/* harmony import */ var _render_composite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../render/composite */ \"./src/engine/render/composite.ts\");\n/* harmony import */ var _alacrity_time__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../alacrity/time */ \"./src/engine/alacrity/time.ts\");\n\r\n\r\n\r\n\r\nvar Actions;\r\n(function (Actions) {\r\n    Actions[Actions[\"idle\"] = 0] = \"idle\";\r\n    Actions[Actions[\"pan\"] = 1] = \"pan\";\r\n    Actions[Actions[\"zoom\"] = 2] = \"zoom\";\r\n})(Actions || (Actions = {}));\r\nclass Cameraman extends _system__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    action = Actions.idle;\r\n    actor;\r\n    freemovement;\r\n    callback = () => { };\r\n    camera;\r\n    pan = []; //from, distance\r\n    zoom = []; //from, distance\r\n    constructor(camera) {\r\n        super(true);\r\n        this.freemovement = new _alacrity_bodies__WEBPACK_IMPORTED_MODULE_1__.Bodies.Embodiment(new _render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Frame([new _render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Snap([\r\n                new _render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Image(\"_assets/blocking.png\", { x: 0, y: 0, w: 1, h: 1 }, { x: 0, y: 0, w: 1, h: 1 })\r\n            ])]));\r\n        this.freemovement.myFrame.rprops.hidden = true;\r\n        this.camera = camera;\r\n    }\r\n    refresh() {\r\n        if (this.action == Actions.idle)\r\n            return;\r\n        if (this.action == Actions.pan) {\r\n            while (this.actor.triggers.length > 0) {\r\n                let trig = this.actor.triggers.pop() || { name: '' };\r\n                if (trig.name == 'pan') {\r\n                    if (trig.state == 'active') {\r\n                        this.actor.pos.x = this.pan[0].x + ((this.actor.timeouts[0].getTimeoutTicks() / this.actor.timeouts[0].ms[0]) * this.pan[1].x);\r\n                        this.actor.pos.y = this.pan[0].y + ((this.actor.timeouts[0].getTimeoutTicks() / this.actor.timeouts[0].ms[0]) * this.pan[1].y);\r\n                        console.log(this.actor.pos);\r\n                    }\r\n                    if (trig.state == 'triggered') {\r\n                        this.actor.timeouts = [];\r\n                        this.action = Actions.idle;\r\n                        this.callback();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this.action == Actions.zoom) {\r\n            while (this.actor.triggers.length > 0) {\r\n                let trig = this.actor.triggers.pop() || { name: '' };\r\n                if (trig.name == 'zoom') {\r\n                    if (trig.state == 'active') {\r\n                        this.actor.pos.x = this.pan[0].x + ((this.actor.timeouts[0].getTimeoutTicks() / this.actor.timeouts[0].ms[0]) * this.pan[1].x);\r\n                        this.actor.pos.y = this.pan[0].y + ((this.actor.timeouts[0].getTimeoutTicks() / this.actor.timeouts[0].ms[0]) * this.pan[1].y);\r\n                        this.camera.scale.x = this.zoom[0].x + ((this.actor.timeouts[0].getTimeoutTicks() / this.actor.timeouts[0].ms[0]) * this.zoom[1].x);\r\n                        this.camera.scale.y = this.zoom[0].y + ((this.actor.timeouts[0].getTimeoutTicks() / this.actor.timeouts[0].ms[0]) * this.zoom[1].y);\r\n                    }\r\n                    if (trig.state == 'triggered') {\r\n                        this.actor.timeouts = [];\r\n                        this.action = Actions.idle;\r\n                        this.callback();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    panCamera(from, to, duration, callback = () => { }) {\r\n        this.actor = this.freemovement;\r\n        this.actor.pos.x = from.x;\r\n        this.actor.pos.y = from.y;\r\n        this.actor.timeouts = [new _alacrity_time__WEBPACK_IMPORTED_MODULE_3__.Time.Timeout([duration], 'pan')];\r\n        this.pan[0] = from;\r\n        this.pan[1] = { x: to.x - from.x, y: to.y - from.y };\r\n        this.action = Actions.pan;\r\n        this.callback = callback;\r\n    }\r\n    zoomCamera(from, to, zoom, duration, callback = () => { }) {\r\n        this.actor = this.freemovement;\r\n        this.actor.pos.x = from.x;\r\n        this.actor.pos.y = from.y;\r\n        this.actor.timeouts = [new _alacrity_time__WEBPACK_IMPORTED_MODULE_3__.Time.Timeout([duration], 'zoom')];\r\n        this.pan[0] = from;\r\n        this.pan[1] = { x: to.x - from.x, y: to.y - from.y };\r\n        this.zoom[0] = { x: this.camera.scale.x, y: this.camera.scale.y };\r\n        this.zoom[1] = { x: zoom.x - this.camera.scale.x, y: zoom.y - this.camera.scale.y };\r\n        this.action = Actions.zoom;\r\n        this.callback = callback;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/systems/cameraman.ts?\n}");

/***/ }),

/***/ "./src/engine/systems/keyboard.ts":
/*!****************************************!*\
  !*** ./src/engine/systems/keyboard.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Keyboard)\n/* harmony export */ });\nclass Keyboard {\r\n    // private static keyboardpool : Array<Keyboard> = [];\r\n    static init = false;\r\n    static keys = {};\r\n    // protected abstract update();\r\n    // protected controlled : NPC;\r\n    constructor() {\r\n        // Keyboard.keyboardpool.push(this)\r\n        // this.mKeyboard = this;\r\n        if (!Keyboard.init) {\r\n            document.addEventListener(\"keydown\", (event) => {\r\n                if (!event.repeat)\r\n                    Keyboard.keys[event.key] = 1;\r\n            });\r\n            document.addEventListener(\"keyup\", (event) => {\r\n                Keyboard.keys[event.key] = -1;\r\n            });\r\n        }\r\n        Keyboard.init = true;\r\n    }\r\n    static refresh() {\r\n        for (let k in Keyboard.keys) {\r\n            Keyboard.keys[k] = Keyboard.keys[k] < 0 ?\r\n                0 : Keyboard.keys[k] > 0 ? 2 : 0;\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/systems/keyboard.ts?\n}");

/***/ }),

/***/ "./src/engine/systems/physics.ts":
/*!***************************************!*\
  !*** ./src/engine/systems/physics.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Physics)\n/* harmony export */ });\n/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_system */ \"./src/engine/systems/_system.ts\");\n/* harmony import */ var _physics_states__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../physics/states */ \"./src/engine/physics/states.ts\");\n\r\n\r\nclass Physics extends _system__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    static physicspool = [];\r\n    collisionpool = [];\r\n    // private affectedpool : Array<Bodies.Mobility>  = [];\r\n    constructor() {\r\n        super();\r\n        Physics.physicspool.push(this);\r\n    }\r\n    refresh() {\r\n        for (let phys of Physics.physicspool) {\r\n            phys.collisionpool = phys.collisionpool.filter((a) => (!a.deleteMe));\r\n            let all = phys.collisionpool.filter((a) => (a.self != null) || a.self == null);\r\n            for (let item of all) {\r\n                if (item.self)\r\n                    item.self.activeeffects = [_physics_states__WEBPACK_IMPORTED_MODULE_1__.CollideTypes.none, _physics_states__WEBPACK_IMPORTED_MODULE_1__.CollideTypes.none, _physics_states__WEBPACK_IMPORTED_MODULE_1__.CollideTypes.none, _physics_states__WEBPACK_IMPORTED_MODULE_1__.CollideTypes.none];\r\n            }\r\n            all.forEach((element) => {\r\n                let totest = new Set(all.filter((a) => ((a.from & element.to) && a.self)).map((a) => a.self));\r\n                if (element.self)\r\n                    totest.delete(element.self);\r\n                // if(element.self?.dbgName === \"scorpion\") {console.log(dupes); console.log(element);}\r\n                element.update(totest);\r\n            });\r\n        }\r\n    }\r\n    addCollisionTo(self, collision) {\r\n        // collision.offX     = bounds.x;\r\n        // collision.offY     = bounds.y;\r\n        // collision.width    = bounds.w;\r\n        // collision.height   = bounds.h;\r\n        // if(self?.dbgName == \"scorpion\"){\r\n        //   console.log(self?.dbgName);\r\n        //   console.log(bounds.y * this.zoom);\r\n        //   console.log({x:collision.offX, y: collision.offY, w:collision.width, h:collision.height})\r\n        // }\r\n        this.collisionpool.push(collision);\r\n        if (self != null) {\r\n            self.collisions.push(collision);\r\n            collision.self = self;\r\n        }\r\n        return collision;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/systems/physics.ts?\n}");

/***/ }),

/***/ "./src/engine/systems/touch.ts":
/*!*************************************!*\
  !*** ./src/engine/systems/touch.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Touch)\n/* harmony export */ });\n/* harmony import */ var _alacrity_time__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../alacrity/time */ \"./src/engine/alacrity/time.ts\");\n\r\nclass Touch {\r\n    static view;\r\n    static ckables = [];\r\n    static clicked = [];\r\n    static touches = [];\r\n    static init = false;\r\n    static clickables = {};\r\n    constructor() {\r\n        if (!Touch.init) {\r\n            let html = document.getElementById(\"canvas\");\r\n            Touch.view = { w: html.clientWidth, h: html.clientHeight };\r\n            for (let i = 0; i < 4; i++) {\r\n                Touch.touches.push({\r\n                    state: 0,\r\n                    pos: { x: 0, y: 0 },\r\n                    start: { x: 0, y: 0 },\r\n                    timer: new _alacrity_time__WEBPACK_IMPORTED_MODULE_0__.Time.Timeout([Infinity], \"time\")\r\n                });\r\n            }\r\n            document.addEventListener('touchstart', (event) => {\r\n                // if()\r\n                for (let i = 0; i < Math.min(event.changedTouches.length, 4); i++) {\r\n                    // console.log(event.changedTouches[i].clientX)\r\n                    // console.log(event.changedTouches[i].identifier)\r\n                    Touch.touches[event.changedTouches[i].identifier] = {\r\n                        state: 1,\r\n                        pos: { x: event.changedTouches[i].clientX,\r\n                            y: event.changedTouches[i].clientY },\r\n                        start: { x: event.changedTouches[i].clientX,\r\n                            y: event.changedTouches[i].clientY },\r\n                        timer: new _alacrity_time__WEBPACK_IMPORTED_MODULE_0__.Time.Timeout([Infinity], \"time\")\r\n                    };\r\n                    // update this\r\n                    // for(let c of Touch.clickables){\r\n                    //   if(Touch.inBounds(\r\n                    //     Touch.touches[event.changedTouches[i].identifier].pos.x,\r\n                    //     Touch.touches[event.changedTouches[i].identifier].pos.y,\r\n                    //     c.bounds)) c.callback();\r\n                    // if(Touch.inBounds(Touch.touchPos.x,Touch.touchPos.y, c.bounds)) Touch.clicked.push(c.name);\r\n                    // }\r\n                }\r\n            });\r\n            document.addEventListener('touchend', (event) => {\r\n                event.preventDefault();\r\n                for (let i = 0; i < event.changedTouches.length; i++) {\r\n                    Touch.touches[event.changedTouches[i].identifier].state = -1;\r\n                }\r\n                Touch.clicked = [];\r\n                // Touch.time.paused = true;\r\n                // Touch.touchstate = -1;\r\n            });\r\n            document.addEventListener('touchmove', (event) => {\r\n                event.preventDefault();\r\n                for (let i = 0; i < event.changedTouches.length; i++) {\r\n                    Touch.touches[event.changedTouches[i].identifier].pos =\r\n                        { x: event.changedTouches[i].clientX, y: event.changedTouches[i].clientY };\r\n                }\r\n            });\r\n            // let ckables = [].slice.call(document.getElementById('clickables')!.getElementsByTagName('*'));\r\n            // for(let c of ckables){\r\n            //   let boundrect = c.getBoundingClientRect();\r\n            //   Touch.clickables.push({name:c.getAttribute('id'),bounds:{x:boundrect.left,y:boundrect.top,w:boundrect.right-boundrect.left,h:boundrect.bottom-boundrect.top}})\r\n            // }\r\n            // let swordclickable = document.getElementById(\"sword\");\r\n        }\r\n        Touch.init = true;\r\n    }\r\n    static refresh() {\r\n        for (let t in Touch.touches) {\r\n            Touch.touches[t].state = Touch.touches[t].state < 0 ?\r\n                0 : Touch.touches[t].state > 0 ? 2 : 0;\r\n        }\r\n        for (let c in Touch.clickables) {\r\n            Touch.clickables[c] = Touch.clickables[c] < 0 ?\r\n                0 : Touch.clickables[c] > 0 ? 2 : 0;\r\n        }\r\n        for (let i = 0; i < Touch.touches.length; i++) {\r\n            let h = Touch.touches[i];\r\n            if (h && h.state == 0) {\r\n                for (let j of Touch.ckables) {\r\n                    if (i == j.ownertouch) {\r\n                        Touch.clickables[j.name] = -1;\r\n                        j.ownertouch = -1;\r\n                    }\r\n                }\r\n            }\r\n            if (h && h.state > 0) {\r\n                for (let j of Touch.ckables) {\r\n                    // if(h==j.ownertouch && h.state)\r\n                    if (Touch.inBounds(h.pos.x, h.pos.y, j.bounds)) {\r\n                        if (Touch.clickables[j.name] <= 0) {\r\n                            Touch.clickables[j.name] = 1;\r\n                            j.ownertouch = i;\r\n                        }\r\n                        j.callback();\r\n                    }\r\n                    else if (Touch.clickables[j.name] > 0) {\r\n                        Touch.clickables[j.name] = -1;\r\n                        j.ownertouch = -1;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // for(let k in Keyboard.keys){\r\n        //   Touch.touchstate = Touch.touchstate < 0 ? \r\n        //     0 : Touch.touchstate > 0 ? 2 : 0;\r\n        // // }\r\n    }\r\n    static addButton(name, bounds, callback = () => { }) {\r\n        Touch.ckables.push({ name: name, bounds: bounds, callback: callback, ownertouch: -1 });\r\n        console.log(bounds);\r\n        Touch.clickables[name] = 0;\r\n        // Touch.clickables.push({name:name,bounds:bounds,callback:callback})\r\n    }\r\n    static registeruielement(name, element) {\r\n    }\r\n    static inBounds(x, y, bounds) {\r\n        return x > bounds.x &&\r\n            x < bounds.x + bounds.w &&\r\n            y > bounds.y &&\r\n            y < bounds.y + bounds.h;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/systems/touch.ts?\n}");

/***/ }),

/***/ "./src/engine/systems/window.ts":
/*!**************************************!*\
  !*** ./src/engine/systems/window.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Window)\n/* harmony export */ });\n/* harmony import */ var _render_render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../render/_render */ \"./src/engine/render/_render.ts\");\n/* harmony import */ var _render_shaders__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../render/_shaders */ \"./src/engine/render/_shaders.ts\");\n\r\n\r\nclass Window extends _render_render__WEBPACK_IMPORTED_MODULE_0__.Render.Info {\r\n    static frm;\r\n    static refresh() {\r\n        var gl = _render_shaders__WEBPACK_IMPORTED_MODULE_1__[\"default\"].gl;\r\n        Window.frm.compose();\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n        // gl.viewport(windwx, windowy, windowwidht, windowheight);\r\n        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n        // gl.clearColor(0, 0.5, 0, 1);\r\n        gl.clear(gl.COLOR_BUFFER_BIT);\r\n        // console.log(\"C\");\r\n        gl.bindTexture(gl.TEXTURE_2D, Window.frm.texture);\r\n        _render_shaders__WEBPACK_IMPORTED_MODULE_1__[\"default\"].passShader(Window.frm, { w: gl.canvas.width, h: gl.canvas.height });\r\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/systems/window.ts?\n}");

/***/ }),

/***/ "./src/games/arduboyracing/animations/animations.ts":
/*!**********************************************************!*\
  !*** ./src/games/arduboyracing/animations/animations.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Animations: () => (/* binding */ Animations)\n/* harmony export */ });\n/* harmony import */ var _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/render/composite */ \"./src/engine/render/composite.ts\");\n\r\nvar Animations;\r\n(function (Animations) {\r\n    class Car {\r\n        static all = [];\r\n        static directions = 16;\r\n        constructor() {\r\n            if (Car.all.length <= 0) {\r\n                let source = \"_assets/arduboy/carsprites.png\";\r\n                let north = new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Image(source, { x: 0, y: 37, w: 13, h: 25 }, { x: 5, y: 0, w: 13, h: 25 })]);\r\n                let nnortheast = new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Image(source, { x: 16, y: 37, w: 19, h: 26 }, { x: 2, y: 0, w: 19, h: 26 })]);\r\n                let northeast = new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Image(source, { x: 38, y: 39, w: 23, h: 23 }, { x: 1, y: 1, w: 23, h: 23 })]);\r\n                let northeeast = new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Image(source, { x: 46, y: 0, w: 26, h: 19 }, { x: 0, y: 2, w: 26, h: 19 })]);\r\n                let east = new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Image(source, { x: 36, y: 21, w: 25, h: 13 }, { x: 0, y: 7, w: 25, h: 13 })]);\r\n                // flip y\r\n                let south = new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Image(source, { x: 0, y: 37, w: 13, h: 25 }, { x: 5, y: 0, w: 13, h: 25 })]);\r\n                let southeast = new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Image(source, { x: 38, y: 39, w: 23, h: 23 }, { x: 1, y: 1, w: 23, h: 23 })]);\r\n                let ssoutheast = new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Image(source, { x: 16, y: 37, w: 19, h: 26 }, { x: 2, y: 0, w: 19, h: 26 })]);\r\n                let southeeast = new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Image(source, { x: 46, y: 0, w: 26, h: 19 }, { x: 0, y: 2, w: 26, h: 19 })]);\r\n                south.rprops.flip.flipy = true;\r\n                southeast.rprops.flip.flipy = true;\r\n                ssoutheast.rprops.flip.flipy = true;\r\n                southeeast.rprops.flip.flipy = true;\r\n                // flip x\r\n                let west = new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Image(source, { x: 36, y: 21, w: 25, h: 13 }, { x: 0, y: 7, w: 25, h: 13 })]);\r\n                let northwest = new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Image(source, { x: 38, y: 39, w: 23, h: 23 }, { x: 1, y: 1, w: 23, h: 23 })]);\r\n                let nnorthwest = new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Image(source, { x: 16, y: 37, w: 19, h: 26 }, { x: 2, y: 0, w: 19, h: 26 })]);\r\n                let northwwest = new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Image(source, { x: 46, y: 0, w: 26, h: 19 }, { x: 0, y: 2, w: 26, h: 19 })]);\r\n                northwest.rprops.flip.flipx = true;\r\n                west.rprops.flip.flipx = true;\r\n                nnorthwest.rprops.flip.flipx = true;\r\n                northwwest.rprops.flip.flipx = true;\r\n                //flip x and y\r\n                let southwest = new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Image(source, { x: 38, y: 39, w: 23, h: 23 }, { x: 1, y: 1, w: 23, h: 23 })]);\r\n                let ssouthwest = new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Image(source, { x: 16, y: 37, w: 19, h: 26 }, { x: 2, y: 0, w: 19, h: 26 })]);\r\n                let southwwest = new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_0__.Composite.Image(source, { x: 46, y: 0, w: 26, h: 19 }, { x: 0, y: 2, w: 26, h: 19 })]);\r\n                southwest.rprops.flip.flipy = true;\r\n                southwest.rprops.flip.flipx = true;\r\n                ssouthwest.rprops.flip.flipy = true;\r\n                ssouthwest.rprops.flip.flipx = true;\r\n                southwwest.rprops.flip.flipy = true;\r\n                southwwest.rprops.flip.flipx = true;\r\n                Car.all = [\r\n                    north,\r\n                    nnorthwest,\r\n                    northwest,\r\n                    northwwest,\r\n                    west,\r\n                    southwwest,\r\n                    southwest,\r\n                    ssouthwest,\r\n                    south,\r\n                    ssoutheast,\r\n                    southeast,\r\n                    southeeast,\r\n                    east,\r\n                    northeeast,\r\n                    northeast,\r\n                    nnortheast\r\n                ];\r\n            }\r\n        }\r\n    }\r\n    Animations.Car = Car;\r\n})(Animations || (Animations = {}));\r\n\n\n//# sourceURL=webpack:///./src/games/arduboyracing/animations/animations.ts?\n}");

/***/ }),

/***/ "./src/games/arduboyracing/car.ts":
/*!****************************************!*\
  !*** ./src/games/arduboyracing/car.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Car)\n/* harmony export */ });\n/* harmony import */ var _engine_alacrity_time__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/alacrity/time */ \"./src/engine/alacrity/time.ts\");\n/* harmony import */ var _engine_render_composite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/render/composite */ \"./src/engine/render/composite.ts\");\n/* harmony import */ var _engine_physics_npcCollision__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/physics/npcCollision */ \"./src/engine/physics/npcCollision.ts\");\n/* harmony import */ var _engine_physics_states__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../engine/physics/states */ \"./src/engine/physics/states.ts\");\n/* harmony import */ var _engine_alacrity_incarnations__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../engine/alacrity/_incarnations */ \"./src/engine/alacrity/_incarnations.ts\");\n/* harmony import */ var _animations_animations__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./animations/animations */ \"./src/games/arduboyracing/animations/animations.ts\");\n/* harmony import */ var _engine_systems_touch__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../engine/systems/touch */ \"./src/engine/systems/touch.ts\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ui */ \"./src/games/arduboyracing/ui.ts\");\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./game */ \"./src/games/arduboyracing/game.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// import { T}\r\n//Starting north, counterclockwise\r\nvar Dir;\r\n(function (Dir) {\r\n    Dir[Dir[\"n\"] = 0] = \"n\";\r\n    Dir[Dir[\"nnw\"] = 1] = \"nnw\";\r\n    Dir[Dir[\"nw\"] = 2] = \"nw\";\r\n    Dir[Dir[\"nww\"] = 3] = \"nww\";\r\n    Dir[Dir[\"w\"] = 4] = \"w\";\r\n    Dir[Dir[\"sww\"] = 5] = \"sww\";\r\n    Dir[Dir[\"sw\"] = 6] = \"sw\";\r\n    Dir[Dir[\"ssw\"] = 7] = \"ssw\";\r\n    Dir[Dir[\"s\"] = 8] = \"s\";\r\n    Dir[Dir[\"sse\"] = 9] = \"sse\";\r\n    Dir[Dir[\"se\"] = 10] = \"se\";\r\n    Dir[Dir[\"see\"] = 11] = \"see\";\r\n    Dir[Dir[\"e\"] = 12] = \"e\";\r\n    Dir[Dir[\"nee\"] = 13] = \"nee\";\r\n    Dir[Dir[\"ne\"] = 14] = \"ne\";\r\n    Dir[Dir[\"nne\"] = 15] = \"nne\";\r\n})(Dir || (Dir = {}));\r\nclass Car extends _engine_alacrity_incarnations__WEBPACK_IMPORTED_MODULE_4__.Incarnations.Player {\r\n    // private directionsnaps : Composite.Snap[] = [];\r\n    static hitboxes = [];\r\n    dir = Dir.see;\r\n    usestouch = true;\r\n    static directions = 16;\r\n    static RADIANS = Math.PI * 2;\r\n    static vectors = [];\r\n    // private        acceltime   : Time.Timeout = new Time.Timeout([Infinity],'accel');\r\n    turnticks = new _engine_alacrity_time__WEBPACK_IMPORTED_MODULE_0__.Time.Timeout([Infinity], 'turn');\r\n    accel = new _engine_alacrity_time__WEBPACK_IMPORTED_MODULE_0__.Time.Timeout([Infinity], 'accel');\r\n    decel = new _engine_alacrity_time__WEBPACK_IMPORTED_MODULE_0__.Time.Timeout([Infinity], 'decel');\r\n    accelincrement = .005;\r\n    acceltime = 100;\r\n    // private        throttle    : number     = 0;\r\n    // private        vector      : Touch.Point    = {x:0,y:0};\r\n    myvelocity = [];\r\n    dirtouch = 0;\r\n    // private        impedance   : Set<Bodies.Impedance> = new Set();\r\n    padcenter;\r\n    padbounds;\r\n    static angle;\r\n    static angleperdir = Car.RADIANS / Car.directions;\r\n    // public refresh(){\r\n    //   Touch.touches.forEach((t)=>{\r\n    //     if(Touch.inBounds(touch.pos.x,touch.pos.y,this.padbounds)){\r\n    //       UI.angle = Math.atan2(touch.pos.y - this.padcenter.y, touch.pos.x - this.padcenter.x) * 4;\r\n    //     }\r\n    //   })\r\n    //   // console.log(this.angle);\r\n    // }\r\n    constructor() {\r\n        new _animations_animations__WEBPACK_IMPORTED_MODULE_5__.Animations.Car();\r\n        let anims = new _engine_render_composite__WEBPACK_IMPORTED_MODULE_1__.Composite.Animation(_animations_animations__WEBPACK_IMPORTED_MODULE_5__.Animations.Car.all);\r\n        super(new _engine_render_composite__WEBPACK_IMPORTED_MODULE_1__.Composite.Frame([anims]));\r\n        this.anims = [anims];\r\n        this.anims[0].currentFrame = this.dir;\r\n        this.anims[0].pause();\r\n        // let arrows = document.getElementById('arrows');\r\n        // // console.log(arrows);\r\n        // this.padbounds = {w:arrows!.clientWidth,h:arrows!.clientHeight,x:arrows!.offsetLeft,y:arrows!.offsetTop};\r\n        // this.padcenter = {x:this.padbounds.w/2,y:this.padbounds.h/2};\r\n        if (Car.hitboxes.length <= 0) {\r\n            Car.hitboxes[Dir.n] = { x: 5, y: 0, w: 16, h: 25 };\r\n            Car.hitboxes[Dir.nne] = { x: 7, y: 3, w: 13, h: 20 };\r\n            Car.hitboxes[Dir.ne] = { x: 12, y: 1, w: 12, h: 12 }; // needs 2\r\n            Car.hitboxes[Dir.nee] = { x: 3, y: 7, w: 20, h: 13 };\r\n            Car.hitboxes[Dir.e] = { x: 0, y: 5, w: 25, h: 16 };\r\n            Car.hitboxes[Dir.see] = { x: 3, y: 3, w: 24, h: 13 };\r\n            Car.hitboxes[Dir.se] = { x: 12, y: 3, w: 12, h: 12 }; // needs 2\r\n            Car.hitboxes[Dir.sse] = { x: 7, y: 3, w: 13, h: 20 };\r\n            Car.hitboxes[Dir.s] = { x: 5, y: 0, w: 16, h: 25 };\r\n            Car.hitboxes[Dir.ssw] = { x: 8, y: 3, w: 23, h: 20 };\r\n            Car.hitboxes[Dir.sw] = { x: 1, y: 3, w: 12, h: 12 }; // needs 2\r\n            Car.hitboxes[Dir.sww] = { x: 3, y: 3, w: 24, h: 13 };\r\n            Car.hitboxes[Dir.w] = { x: 0, y: 5, w: 25, h: 16 };\r\n            Car.hitboxes[Dir.nww] = { x: 3, y: 7, w: 20, h: 13 };\r\n            Car.hitboxes[Dir.nw] = { x: 1, y: 3, w: 12, h: 12 }; // needs 2\r\n            Car.hitboxes[Dir.nnw] = { x: 8, y: 3, w: 13, h: 20 };\r\n        }\r\n        if (Car.vectors.length <= 0) {\r\n            for (let i = 0; i < Car.directions; i++) {\r\n                let point = {\r\n                    x: Math.cos(i * Car.angleperdir + Math.PI / 2),\r\n                    y: Math.sin(i * Car.angleperdir + Math.PI / 2)\r\n                };\r\n                if (point.x + point.y > 1) {\r\n                    point.x = point.x * Math.min(1, (1 / (point.x + point.y)));\r\n                    point.y = point.y * Math.min(1, (1 / (point.x + point.y)));\r\n                    // this.myvelocity.push()\r\n                }\r\n                Car.vectors.push({ x: -point.x, y: point.y });\r\n                this.myvelocity.push({ strength: 0, x: -point.x, y: point.y });\r\n            }\r\n        }\r\n        for (let m of this.myvelocity)\r\n            this.velocity.add(m);\r\n        _game__WEBPACK_IMPORTED_MODULE_8__[\"default\"].gamephysics.collisionpool.push(new _engine_physics_npcCollision__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this, _engine_physics_states__WEBPACK_IMPORTED_MODULE_3__.CollideLayers.player, _engine_physics_states__WEBPACK_IMPORTED_MODULE_3__.CollideLayers.grid | _engine_physics_states__WEBPACK_IMPORTED_MODULE_3__.CollideLayers.npc | _engine_physics_states__WEBPACK_IMPORTED_MODULE_3__.CollideLayers.interactable, _engine_physics_states__WEBPACK_IMPORTED_MODULE_3__.CollideTypes.block));\r\n        this.pos.x = 160;\r\n        this.pos.y = 360;\r\n        this.speed = 0.075;\r\n    }\r\n    // }\r\n    update() {\r\n        super.update();\r\n        this.anims[0].currentFrame = this.dir;\r\n        this.hitbox = Car.hitboxes[this.dir];\r\n        this.handletouch();\r\n        if (this.decel.getTimeoutTicks() > this.acceltime) {\r\n            this.decel.reset();\r\n            for (let m = 0; m < this.myvelocity.length; m++) {\r\n                if (m == this.dir)\r\n                    continue;\r\n                if (this.myvelocity[m].strength < this.accelincrement)\r\n                    this.myvelocity[m].strength = 0;\r\n                if (this.myvelocity[m].strength > 0)\r\n                    this.myvelocity[m].strength -= this.accelincrement;\r\n            }\r\n        }\r\n        this.hitbox = Car.hitboxes[this.dir];\r\n        // if(this.gimpedence.strength > 0){\r\n        // if(this.dir > 8){\r\n        //   this.gimpedence.x = Math.sin(Car.vectors[this.dir].x);\r\n        //   this.gimpedence.y = Math.cos(Car.vectors[this.dir].y);\r\n        // } else {\r\n        // this.gimpedence.x = Car.vectors[this.dir].x;\r\n        // this.gimpedence.y = Car.vectors[this.dir].y;\r\n        // }\r\n        // } else {\r\n        // this.gimpedence.x = Car.vectors[(this.dir+8)%16].x;\r\n        // this.gimpedence.y = Car.vectors[(this.dir+8)%16].y;\r\n        // }\r\n    }\r\n    handletouch() {\r\n        let touchCount = 0;\r\n        for (let t of _engine_systems_touch__WEBPACK_IMPORTED_MODULE_6__[\"default\"].touches)\r\n            if (t !== undefined && t.state !== undefined && t.state > 0)\r\n                touchCount++;\r\n        if (touchCount > 0)\r\n            this.usestouch = true;\r\n        if (this.usestouch) {\r\n            for (let c in _engine_systems_touch__WEBPACK_IMPORTED_MODULE_6__[\"default\"].clickables) {\r\n                switch (c) {\r\n                    case \"dpadup\":\r\n                        switch (_engine_systems_touch__WEBPACK_IMPORTED_MODULE_6__[\"default\"].clickables[c]) {\r\n                            case -1:\r\n                                _ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].arrowbuttons[0].myAnim.currentFrame = 0;\r\n                                break;\r\n                            case 0:\r\n                                break;\r\n                            case 1:\r\n                                _ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].arrowbuttons[0].myAnim.currentFrame = 1;\r\n                            // break;\r\n                            case 2:\r\n                                this.movementvector.x = Car.vectors[(this.dir + 8) % 16].x;\r\n                                this.movementvector.y = Car.vectors[(this.dir + 8) % 16].y;\r\n                                // if(this.accel.getTimeoutTicks()>this.acceltime){\r\n                                //   this.accel.reset();\r\n                                //   this.myvelocity[(this.dir+8)%16].strength = Math.max(0.075,this.myvelocity[(this.dir+8)%16].strength+this.accelincrement);\r\n                                // }\r\n                                // this.gimpedence.strength = Math.max(this.gimpedence.strength-this.acceltime.getTimeoutTicks() / 1200000,.1);\r\n                                // this.gimpedence.x = Math.sin(-Car.vectors[this.dir].x);\r\n                                // this.gimpedence.y = Math.cos(-Car.vectors[this.dir].y);\r\n                                break;\r\n                        }\r\n                        break;\r\n                    case \"dpadleft\":\r\n                        switch (_engine_systems_touch__WEBPACK_IMPORTED_MODULE_6__[\"default\"].clickables[c]) {\r\n                            case -1:\r\n                                _ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].arrowbuttons[1].myAnim.currentFrame = 0;\r\n                                break;\r\n                            case 0:\r\n                                break;\r\n                            case 1:\r\n                                _ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].arrowbuttons[1].myAnim.currentFrame = 1;\r\n                            // break;\r\n                            case 2:\r\n                                if (this.turnticks.getTimeoutTicks() > 300) {\r\n                                    this.turnticks.reset();\r\n                                    this.dir = this.dir + 1 > Dir.nne ? Dir.n : this.dir + 1;\r\n                                }\r\n                                break;\r\n                        }\r\n                        break;\r\n                    case \"dpaddown\":\r\n                        switch (_engine_systems_touch__WEBPACK_IMPORTED_MODULE_6__[\"default\"].clickables[c]) {\r\n                            case -1:\r\n                                _ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].arrowbuttons[2].myAnim.currentFrame = 0;\r\n                                console.log(this.pos.x, this.pos.y);\r\n                                break;\r\n                            case 0:\r\n                                break;\r\n                            case 1:\r\n                                _ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].arrowbuttons[2].myAnim.currentFrame = 1;\r\n                            // break;\r\n                            case 2:\r\n                                this.movementvector.x = Car.vectors[this.dir].x;\r\n                                this.movementvector.y = Car.vectors[this.dir].y;\r\n                                // this.gimpedence.strength = Math.min(this.gimpedence.strength+this.acceltime.getTimeoutTicks() / 1200000,-0.05);\r\n                                // this.gimpedence.x = Math.sin(-Car.vectors[this.dir].x);\r\n                                // this.gimpedence.y = Math.cos(-Car.vectors[this.dir].y);\r\n                                break;\r\n                        }\r\n                        break;\r\n                    case \"dpadright\":\r\n                        switch (_engine_systems_touch__WEBPACK_IMPORTED_MODULE_6__[\"default\"].clickables[c]) {\r\n                            case -1:\r\n                                _ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].arrowbuttons[3].myAnim.currentFrame = 0;\r\n                                break;\r\n                            case 0:\r\n                                break;\r\n                            case 1:\r\n                                _ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].arrowbuttons[3].myAnim.currentFrame = 1;\r\n                            // break;\r\n                            case 2:\r\n                                if (this.turnticks.getTimeoutTicks() > 300) {\r\n                                    this.turnticks.reset();\r\n                                    this.dir = this.dir - 1 < 0 ? Dir.nne : this.dir - 1;\r\n                                    // this.dir = this.dir+1 > Dir.nne ? Dir.n :this.dir+1;\r\n                                }\r\n                                break;\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            // Touch.clickables\r\n            // for(let i = 0; i < Touch.touches.length; i++){\r\n            //   let touch = Touch.touches[i];\r\n            //   if(touch === undefined) continue;\r\n            //   switch(touch.state){\r\n            //     case -1:\r\n            //     break;\r\n            //     case 0:\r\n            //       // if(this.dirtouch==i) this.gimpedence.strength = Math.max(this.gimpedence.strength - 0.0001,0);\r\n            //     break;\r\n            //     case 1:\r\n            //       if(touch.pos.x > document.body.clientWidth / 2) this.dir = this.dir-1 < 0 ? 15:this.dir-1;\r\n            //       else this.dir = (this.dir+1) % 16;\r\n            //       if(Touch.inBounds(touch.pos.x,touch.pos.y,this.padbounds)){\r\n            //         this.dirtouch = i;\r\n            //         this.acceltime.reset();\r\n            //       }\r\n            //     break;\r\n            //     case 2:\r\n            //       if(Touch.inBounds(touch.pos.x,touch.pos.y,this.padbounds)){\r\n            //         // UI.angle = Math.atan2((this.padcenter.y - touch.pos.y), this.padcenter.x - touch.pos.x) * -4 - Math.PI/2;\r\n            //       }\r\n            //       this.gimpedence.strength = Math.min(this.gimpedence.strength+this.acceltime.getTimeoutTicks() / 1200000,0.075);\r\n            //       // if(this.dir * Car.angleperdir > UI.angle){\r\n            //       // }\r\n            //       // this.gimpedence.x = Math.sin(UI.angle);\r\n            //       // this.gimpedence.y = Math.cos(UI.angle);\r\n            //       // this.movementvector.x = Car.vectors[this.dir].x;\r\n            //       // this.movementvector.y = Car.vectors[this.dir].y;\r\n            //     break;\r\n            //   }\r\n            // }\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/games/arduboyracing/car.ts?\n}");

/***/ }),

/***/ "./src/games/arduboyracing/game.ts":
/*!*****************************************!*\
  !*** ./src/games/arduboyracing/game.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Game)\n/* harmony export */ });\n/* harmony import */ var _engine_games__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/games */ \"./src/engine/games.ts\");\n/* harmony import */ var _engine_render_render__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/render/_render */ \"./src/engine/render/_render.ts\");\n/* harmony import */ var _engine_render_assets__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/render/assets */ \"./src/engine/render/assets.ts\");\n/* harmony import */ var _engine_render_composite__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../engine/render/composite */ \"./src/engine/render/composite.ts\");\n/* harmony import */ var _engine_systems_window__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../engine/systems/window */ \"./src/engine/systems/window.ts\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ui */ \"./src/games/arduboyracing/ui.ts\");\n/* harmony import */ var _timer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./timer */ \"./src/games/arduboyracing/timer.ts\");\n/* harmony import */ var _level00__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./level00 */ \"./src/games/arduboyracing/level00.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Game extends _engine_games__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    gamename = 'arduboy';\r\n    levels = [new _level00__WEBPACK_IMPORTED_MODULE_7__[\"default\"]()];\r\n    srcview = { w: 200, h: 200 };\r\n    timer;\r\n    async load() {\r\n        await this.initialize();\r\n        _engine_render_render__WEBPACK_IMPORTED_MODULE_1__.Render.Info.gl.clearColor(.25, .4, .25, 1);\r\n        this.timer = new _timer__WEBPACK_IMPORTED_MODULE_6__[\"default\"]();\r\n        await Promise.all(await _engine_render_assets__WEBPACK_IMPORTED_MODULE_2__[\"default\"].loadAllExtInFolder('_assets/_debug/', ['png']));\r\n        this.currentLevel = await this.newLevel(0);\r\n        this.gameframe.camera.cameraman.freemovement.pos.y = 35 * 16;\r\n        let per = .75;\r\n        let gameframewidth = _engine_render_render__WEBPACK_IMPORTED_MODULE_1__.Render.Info.gl.canvas.width > _engine_render_render__WEBPACK_IMPORTED_MODULE_1__.Render.Info.gl.canvas.height ? _engine_render_render__WEBPACK_IMPORTED_MODULE_1__.Render.Info.gl.canvas.height * per : _engine_render_render__WEBPACK_IMPORTED_MODULE_1__.Render.Info.gl.canvas.width * per;\r\n        this.gameframe.setCrop(this.srcview, {\r\n            x: _engine_render_render__WEBPACK_IMPORTED_MODULE_1__.Render.Info.gl.canvas.width / 2 - (_engine_render_render__WEBPACK_IMPORTED_MODULE_1__.Render.Info.gl.canvas.height * per) / 2,\r\n            y: 0,\r\n            w: gameframewidth,\r\n            h: gameframewidth\r\n        });\r\n        new _ui__WEBPACK_IMPORTED_MODULE_5__[\"default\"](gameframewidth);\r\n        let dpad = _ui__WEBPACK_IMPORTED_MODULE_5__[\"default\"].dpad;\r\n        _engine_systems_window__WEBPACK_IMPORTED_MODULE_4__[\"default\"].frm = new _engine_render_composite__WEBPACK_IMPORTED_MODULE_3__.Composite.Frame([\r\n            this.gameframe,\r\n            dpad,\r\n        ]);\r\n        // car.myCamera = Window.frm.camera;\r\n        // Window.frm.rprops.srcrect = {x:0,y:0, w:Render.Info.gl.canvas.width,h:Render.Info.gl.canvas.height};\r\n        _engine_systems_window__WEBPACK_IMPORTED_MODULE_4__[\"default\"].frm.rprops.shaderID = \"reverser\";\r\n        // Window.frm.compose();\r\n        // this.gameframe.camera.refresh();\r\n        // console.log(this.gameframe.test())\r\n        // console.log(this.player.myFrame.getclientleft());\r\n        // console.log(ui[3].mySnap.getclientleft());\r\n        return new Game();\r\n    }\r\n    start() {\r\n        this.timer.elapsed.restart();\r\n    }\r\n    run() {\r\n        super.run();\r\n        this.gameframe.camera.refresh();\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/games/arduboyracing/game.ts?\n}");

/***/ }),

/***/ "./src/games/arduboyracing/level00.ts":
/*!********************************************!*\
  !*** ./src/games/arduboyracing/level00.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ GameLevel)\n/* harmony export */ });\n/* harmony import */ var _engine_parsers_iniparser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/parsers/iniparser */ \"./src/engine/parsers/iniparser.ts\");\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./game */ \"./src/games/arduboyracing/game.ts\");\n/* harmony import */ var _engine_alacrity_incarnations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/alacrity/_incarnations */ \"./src/engine/alacrity/_incarnations.ts\");\n/* harmony import */ var _engine_physics_gridCollision__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../engine/physics/gridCollision */ \"./src/engine/physics/gridCollision.ts\");\n/* harmony import */ var _engine_physics_states__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../engine/physics/states */ \"./src/engine/physics/states.ts\");\n/* harmony import */ var _engine_parsers_tiledParser__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../engine/parsers/tiledParser */ \"./src/engine/parsers/tiledParser.ts\");\n/* harmony import */ var _car__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./car */ \"./src/games/arduboyracing/car.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass GameLevel extends _engine_alacrity_incarnations__WEBPACK_IMPORTED_MODULE_2__.Incarnations.Level {\r\n    ininame = \"arduboy00a.ini\";\r\n    levelsize;\r\n    // public representation : Composite.Snap[];\r\n    constructor() {\r\n        super();\r\n    }\r\n    async build(game) {\r\n        // console.log(Render.Info.gl)\r\n        game.cellbuild = await _engine_parsers_iniparser__WEBPACK_IMPORTED_MODULE_0__[\"default\"].loadIni(game.rootFolder + this.ininame);\r\n        this.levelsize = { w: game.cellbuild.tiles[0].tileYX[0].length * game.cellbuild.square.w, h: game.cellbuild.tiles[0].tileYX.length * game.cellbuild.square.h };\r\n        // await Assets.addText(game.rootFolder+game.gamename+\"/00/tree.csv\")\r\n        _game__WEBPACK_IMPORTED_MODULE_1__[\"default\"].gamephysics.collisionpool.push(new _engine_physics_gridCollision__WEBPACK_IMPORTED_MODULE_3__[\"default\"](game.cellbuild.collisions[0], 16, _engine_physics_states__WEBPACK_IMPORTED_MODULE_4__.CollideLayers.player, _engine_physics_states__WEBPACK_IMPORTED_MODULE_4__.CollideTypes.block));\r\n        game.player = new _car__WEBPACK_IMPORTED_MODULE_6__[\"default\"]();\r\n        // new divUI(game.player)\r\n        this.bodies.push(game.player);\r\n        this.representation = _engine_parsers_tiledParser__WEBPACK_IMPORTED_MODULE_5__[\"default\"].blit(game.cellbuild, \"level-layer\");\r\n        for (let p of this.representation) {\r\n            p.rprops.shaderID = \"whitetransparent\";\r\n        }\r\n        // this.bodies.push(new Tree(game));\r\n        // return new GameLevel(this);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/games/arduboyracing/level00.ts?\n}");

/***/ }),

/***/ "./src/games/arduboyracing/timer.ts":
/*!******************************************!*\
  !*** ./src/games/arduboyracing/timer.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Timer)\n/* harmony export */ });\n/* harmony import */ var _engine_alacrity_bodies__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/alacrity/_bodies */ \"./src/engine/alacrity/_bodies.ts\");\n/* harmony import */ var _engine_alacrity_time__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/alacrity/time */ \"./src/engine/alacrity/time.ts\");\n\r\n\r\nclass Timer extends _engine_alacrity_bodies__WEBPACK_IMPORTED_MODULE_0__.Bodies.Alacrity {\r\n    elapsed;\r\n    timerbar;\r\n    constructor() {\r\n        super();\r\n        this.elapsed = new _engine_alacrity_time__WEBPACK_IMPORTED_MODULE_1__.Time.Timeout([Infinity], 'elapsed');\r\n        this.timerbar = document.getElementById('timer');\r\n    }\r\n    update() {\r\n        super.update();\r\n        this.timerbar.innerHTML = (Math.round(this.elapsed.getTimeoutTicks() / 100) / 100) + '';\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/games/arduboyracing/timer.ts?\n}");

/***/ }),

/***/ "./src/games/arduboyracing/ui.ts":
/*!***************************************!*\
  !*** ./src/games/arduboyracing/ui.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ UI)\n/* harmony export */ });\n/* harmony import */ var _engine_systems_touch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/systems/touch */ \"./src/engine/systems/touch.ts\");\n/* harmony import */ var _engine_alacrity_bodies__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/alacrity/_bodies */ \"./src/engine/alacrity/_bodies.ts\");\n/* harmony import */ var _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/render/composite */ \"./src/engine/render/composite.ts\");\n/* harmony import */ var _engine_render_render__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../engine/render/_render */ \"./src/engine/render/_render.ts\");\n\r\n\r\n\r\n\r\n// import ~Render\r\nclass UI extends _engine_alacrity_bodies__WEBPACK_IMPORTED_MODULE_1__.Bodies.Alacrity {\r\n    static arrowbuttons = [];\r\n    static dpad;\r\n    constructor(gameframewidth) {\r\n        super();\r\n        let sixtyfour = (50 / 270) * gameframewidth;\r\n        UI.arrowbuttons = [\r\n            new _engine_alacrity_bodies__WEBPACK_IMPORTED_MODULE_1__.Bodies.UIElement(new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Animation([\r\n                new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Image('_assets/arduboy/dpad_element_north.png', { x: 0, y: 0, w: 128, h: 128 }, { x: 0, y: 0, w: sixtyfour, h: sixtyfour })]),\r\n                new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Image('_assets/arduboy/dpad_element_north.png', { x: 0, y: 0, w: 128, h: 128 }, { x: 0, y: 0, w: sixtyfour, h: sixtyfour }),\r\n                    new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Image('_assets/arduboy/dpad_element_north_highlight.png', { x: 0, y: 0, w: 128, h: 128 }, { x: 0, y: 0, w: sixtyfour, h: sixtyfour })\r\n                ])\r\n            ])),\r\n            new _engine_alacrity_bodies__WEBPACK_IMPORTED_MODULE_1__.Bodies.UIElement(new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Animation([\r\n                new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Image('_assets/arduboy/dpad_element_west.png', { x: 0, y: 0, w: 128, h: 128 }, { x: 0, y: 0, w: sixtyfour, h: sixtyfour })]),\r\n                new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Image('_assets/arduboy/dpad_element_west.png', { x: 0, y: 0, w: 128, h: 128 }, { x: 0, y: 0, w: sixtyfour, h: sixtyfour }),\r\n                    new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Image('_assets/arduboy/dpad_element_west_highlight.png', { x: 0, y: 0, w: 128, h: 128 }, { x: 0, y: 0, w: sixtyfour, h: sixtyfour })\r\n                ])\r\n            ])),\r\n            new _engine_alacrity_bodies__WEBPACK_IMPORTED_MODULE_1__.Bodies.UIElement(new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Animation([\r\n                new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Image('_assets/arduboy/dpad_element_south.png', { x: 0, y: 0, w: 128, h: 128 }, { x: 0, y: 0, w: sixtyfour, h: sixtyfour })]),\r\n                new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Image('_assets/arduboy/dpad_element_south.png', { x: 0, y: 0, w: 128, h: 128 }, { x: 0, y: 0, w: sixtyfour, h: sixtyfour }),\r\n                    new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Image('_assets/arduboy/dpad_element_south_highlight.png', { x: 0, y: 0, w: 128, h: 128 }, { x: 0, y: 0, w: sixtyfour, h: sixtyfour })\r\n                ])\r\n            ])),\r\n            new _engine_alacrity_bodies__WEBPACK_IMPORTED_MODULE_1__.Bodies.UIElement(new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Animation([\r\n                new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Image('_assets/arduboy/dpad_element_east.png', { x: 0, y: 0, w: 128, h: 128 }, { x: 0, y: 0, w: sixtyfour, h: sixtyfour })]),\r\n                new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Snap([new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Image('_assets/arduboy/dpad_element_east.png', { x: 0, y: 0, w: 128, h: 128 }, { x: 0, y: 0, w: sixtyfour, h: sixtyfour }),\r\n                    new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Image('_assets/arduboy/dpad_element_east_highlight.png', { x: 0, y: 0, w: 128, h: 128 }, { x: 0, y: 0, w: sixtyfour, h: sixtyfour })\r\n                ])\r\n            ]))\r\n        ];\r\n        for (let a of UI.arrowbuttons)\r\n            a.myAnim.pause();\r\n        UI.arrowbuttons[0].pos.x = sixtyfour / 2 + ((5 / 270) * gameframewidth);\r\n        UI.arrowbuttons[0].pos.y = 0;\r\n        UI.arrowbuttons[1].pos.x = 0;\r\n        UI.arrowbuttons[1].pos.y = sixtyfour / 2 + ((5 / 270) * gameframewidth);\r\n        UI.arrowbuttons[2].pos.x = sixtyfour / 2 + ((5 / 270) * gameframewidth);\r\n        UI.arrowbuttons[2].pos.y = sixtyfour + ((10 / 270) * gameframewidth);\r\n        UI.arrowbuttons[3].pos.x = sixtyfour + ((10 / 270) * gameframewidth);\r\n        UI.arrowbuttons[3].pos.y = sixtyfour / 2 + ((5 / 270) * gameframewidth);\r\n        UI.dpad = new _engine_render_composite__WEBPACK_IMPORTED_MODULE_2__.Composite.Frame(UI.arrowbuttons.map((u) => u.myAnim));\r\n        UI.dpad.rprops.pos.x = (55 / 270) * gameframewidth;\r\n        UI.dpad.rprops.pos.y = _engine_render_render__WEBPACK_IMPORTED_MODULE_3__.Render.Info.gl.canvas.height - ((340 / 270) * gameframewidth);\r\n        UI.dpad.compose();\r\n        _engine_systems_touch__WEBPACK_IMPORTED_MODULE_0__[\"default\"].addButton('dpadup', UI.arrowbuttons[0].myAnim.frames[0].getclientbounds());\r\n        _engine_systems_touch__WEBPACK_IMPORTED_MODULE_0__[\"default\"].addButton('dpadleft', UI.arrowbuttons[1].myAnim.frames[0].getclientbounds());\r\n        _engine_systems_touch__WEBPACK_IMPORTED_MODULE_0__[\"default\"].addButton('dpaddown', UI.arrowbuttons[2].myAnim.frames[0].getclientbounds());\r\n        _engine_systems_touch__WEBPACK_IMPORTED_MODULE_0__[\"default\"].addButton('dpadright', UI.arrowbuttons[3].myAnim.frames[0].getclientbounds());\r\n    }\r\n    refresh() {\r\n        // console.log(Touch.touches)\r\n        // console.log(UI.padbounds);\r\n        // Touch.touches.forEach((t)=>{\r\n        //   for(let i = 0; i < UI.arrows.length; i++){\r\n        //     if(Touch.inBounds(t.pos.x,t.pos.y,UI.arrows[i])){\r\n        //       UI.directionspressed[i] = true;\r\n        //       // UI.angle = Math.atan2(t.pos.y - UI.padcenter.y, t.pos.x - UI.padcenter.x) * 4;\r\n        //     } else {\r\n        //       UI.directionspressed[i] = false;\r\n        //     }\r\n        //   }\r\n        // })\r\n        // for(let i = 0; i < UI.directionspressed.length; i++){\r\n        //   if(UI.directionspressed[i]){\r\n        //     console.log(\"YO\")\r\n        //     UI.arr[i].style.visibility = \"visible\";\r\n        //   } else UI.arr[i].style.visibility = \"hidden\";\r\n        // }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/games/arduboyracing/ui.ts?\n}");

/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _engine_render_render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./engine/render/_render */ \"./src/engine/render/_render.ts\");\n/* harmony import */ var _engine_render_shaderloader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./engine/render/shaderloader */ \"./src/engine/render/shaderloader.ts\");\n/* harmony import */ var _engine_render_assets__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./engine/render/assets */ \"./src/engine/render/assets.ts\");\n/* harmony import */ var _engine_systems_touch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./engine/systems/touch */ \"./src/engine/systems/touch.ts\");\n/* harmony import */ var _engine_systems_window__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./engine/systems/window */ \"./src/engine/systems/window.ts\");\n/* harmony import */ var _engine_systems_keyboard__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./engine/systems/keyboard */ \"./src/engine/systems/keyboard.ts\");\n/* harmony import */ var _engine_alacrity_time__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./engine/alacrity/time */ \"./src/engine/alacrity/time.ts\");\n/* harmony import */ var _games_arduboyracing_game__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./games/arduboyracing/game */ \"./src/games/arduboyracing/game.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet paused = true;\r\nconst mainLoop = () => {\r\n    game.run();\r\n    _engine_systems_keyboard__WEBPACK_IMPORTED_MODULE_5__[\"default\"].refresh();\r\n    _engine_systems_touch__WEBPACK_IMPORTED_MODULE_3__[\"default\"].refresh();\r\n    _engine_systems_window__WEBPACK_IMPORTED_MODULE_4__[\"default\"].refresh();\r\n    if (!paused)\r\n        requestAnimationFrame(mainLoop);\r\n    else\r\n        requestAnimationFrame(pauseLoop);\r\n};\r\nfunction pauseLoop() {\r\n    for (let k in _engine_systems_keyboard__WEBPACK_IMPORTED_MODULE_5__[\"default\"].keys) {\r\n        switch (k) {\r\n            default:\r\n                switch (_engine_systems_keyboard__WEBPACK_IMPORTED_MODULE_5__[\"default\"].keys[k]) {\r\n                    case 1:\r\n                        _engine_alacrity_time__WEBPACK_IMPORTED_MODULE_6__.Time.Timeout.resumeAll();\r\n                        _engine_render_assets__WEBPACK_IMPORTED_MODULE_2__[\"default\"].audioContext.resume();\r\n                        document.getElementById('gobutton').style.display = 'none';\r\n                        game.start();\r\n                        paused = false;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n    _engine_systems_keyboard__WEBPACK_IMPORTED_MODULE_5__[\"default\"].refresh();\r\n    _engine_systems_touch__WEBPACK_IMPORTED_MODULE_3__[\"default\"].refresh();\r\n    _engine_systems_window__WEBPACK_IMPORTED_MODULE_4__[\"default\"].refresh();\r\n    if (!paused)\r\n        requestAnimationFrame(mainLoop);\r\n    else\r\n        requestAnimationFrame(pauseLoop);\r\n}\r\nconst start = async () => {\r\n    await _engine_render_shaderloader__WEBPACK_IMPORTED_MODULE_1__[\"default\"].init();\r\n    _engine_render_assets__WEBPACK_IMPORTED_MODULE_2__[\"default\"].initAudio();\r\n    await game.load();\r\n    _engine_alacrity_time__WEBPACK_IMPORTED_MODULE_6__.Time.Timeout.pauseAll();\r\n};\r\nlet game;\r\nnew _engine_render_render__WEBPACK_IMPORTED_MODULE_0__.Render.GL(document.body.clientWidth + '', document.body.clientHeight + '');\r\nconsole.log(document.body.clientWidth);\r\n// console.log(Render.Info.gl)\r\n// game = new ArbreGame();\r\ngame = new _games_arduboyracing_game__WEBPACK_IMPORTED_MODULE_7__[\"default\"]();\r\nstart().then(() => {\r\n    document.getElementById('gobutton').style.visibility = 'visible';\r\n    mainLoop();\r\n});\r\nlet gobutton = document.getElementById('gobutton').getBoundingClientRect();\r\n_engine_systems_touch__WEBPACK_IMPORTED_MODULE_3__[\"default\"].addButton('gobutton', { x: gobutton.x, y: gobutton.y, w: gobutton.width, h: 500 }, () => {\r\n    // Time.Delta.firstTick = Date.now();\r\n    _engine_alacrity_time__WEBPACK_IMPORTED_MODULE_6__.Time.Timeout.resumeAll();\r\n    _engine_render_assets__WEBPACK_IMPORTED_MODULE_2__[\"default\"].audioContext.resume();\r\n    document.getElementById('gobutton').style.display = 'none';\r\n    game.start();\r\n    paused = false;\r\n});\r\n\n\n//# sourceURL=webpack:///./src/main.ts?\n}");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/main.ts");
/******/ 	
/******/ })()
;